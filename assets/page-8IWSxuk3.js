import{a as e,s as t,j as r}from"./index-BH-fJ4Ku.js";import{c as a,L as s}from"./react-vendor-Bx1kqAC_.js";import"./supabase-vendor-Bh6n7b__.js";function i(){const[i,o]=a.useState([]),[l,n]=a.useState(new Set),[c,d]=a.useState(!0),[g,x]=a.useState(!1),{addToCart:m}=e();a.useEffect(()=>{h();const e=()=>{h()};return window.addEventListener("favoritesChanged",e),()=>window.removeEventListener("favoritesChanged",e)},[]);const h=async()=>{d(!0);try{const e=localStorage.getItem("favorites");if(e){const r=JSON.parse(e),{data:a,error:s}=await t.from("products").select("*").in("id",r).eq("is_active",!0);if(s)throw s;o(a||[])}else o([])}catch(e){o([])}finally{d(!1)}};if(c)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("i",{className:"ri-loader-4-line text-5xl text-[#b62bff] animate-spin"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando favoritos..."})]})});if(0===i.length)return r.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"w-32 h-32 mx-auto mb-6 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center",children:r.jsx("i",{className:"ri-heart-line text-6xl text-white"})}),r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Nenhum Favorito Ainda"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Comece a adicionar produtos aos seus favoritos para vê-los aqui!"}),r.jsxs(s,{to:"/category",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg font-semibold hover:shadow-2xl hover:scale-105 transition-all",children:[r.jsx("i",{className:"ri-shopping-bag-line text-xl"}),"Explorar Produtos"]})]})});const f=l.size===i.length&&i.length>0,p=l.size>0;return r.jsx("div",{className:"min-h-screen py-12 px-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-4xl font-bold flex items-center gap-3",children:[r.jsx("i",{className:"ri-heart-fill text-red-500"}),"Meus Favoritos"]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[i.length," ",1===i.length?"produto":"produtos"," favoritado",1===i.length?"":"s"]})]}),r.jsxs(s,{to:"/category",className:"flex items-center gap-2 px-6 py-3 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-all",children:[r.jsx("i",{className:"ri-arrow-left-line"}),"Continuar Comprando"]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800",children:[r.jsxs("button",{onClick:()=>{l.size===i.length?n(new Set):n(new Set(i.map(e=>e.id)))},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all",children:[r.jsx("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-all "+(f?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] border-transparent":"border-gray-400 dark:border-gray-600"),children:f&&r.jsx("i",{className:"ri-check-line text-white text-sm"})}),r.jsx("span",{className:"font-medium",children:f?"Desselecionar Todos":"Selecionar Todos"})]}),p&&r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 rounded-lg",children:[r.jsx("i",{className:"ri-checkbox-multiple-line text-[#b62bff]"}),r.jsxs("span",{className:"font-semibold",children:[l.size," selecionado",1===l.size?"":"s"]})]}),p&&r.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[r.jsxs("button",{onClick:()=>{try{const e=localStorage.getItem("favorites");if(e){const t=JSON.parse(e).filter(e=>!l.has(e));localStorage.setItem("favorites",JSON.stringify(t)),window.dispatchEvent(new Event("favoritesChanged")),n(new Set),h()}}catch(e){}},className:"flex items-center gap-2 px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 hover:scale-105 transition-all",children:[r.jsx("i",{className:"ri-delete-bin-line"}),"Remover"]}),r.jsx("button",{onClick:async()=>{if(0!==l.size){x(!0);try{const e=i.filter(e=>l.has(e.id));for(const t of e)await m(t,1);window.REACT_APP_NAVIGATE("/cart")}catch(e){}finally{x(!1)}}},disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-2xl hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:g?r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Processando..."]}):r.jsxs(r.Fragment,{children:[r.jsx("i",{className:"ri-shopping-bag-3-fill"}),"Comprar Agora"]})})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map(e=>{const t=l.has(e.id),a=Array.isArray(e.images)&&e.images.length>0?e.images[0]:"https://readdy.ai/api/search-image?query=modern%20elegant%20product%20photography%20simple%20white%20background%20professional%20ecommerce%20style%20minimalist%20clean%20aesthetic&width=400&height=500&seq=fav-default&orientation=portrait",i=e.compare_at_price?Math.round((e.compare_at_price-e.price)/e.compare_at_price*100):0;return r.jsxs("div",{className:"group relative bg-white dark:bg-gray-900 rounded-xl overflow-hidden border-2 transition-all "+(t?"border-[#b62bff] shadow-2xl shadow-[#b62bff]/20":"border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700"),children:[r.jsx("button",{onClick:()=>(e=>{const t=new Set(l);t.has(e)?t.delete(e):t.add(e),n(t)})(e.id),className:"absolute top-4 left-4 z-20 w-8 h-8 rounded-lg bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:scale-110 transition-all",children:r.jsx("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-all "+(t?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] border-transparent":"border-gray-400 dark:border-gray-600"),children:t&&r.jsx("i",{className:"ri-check-line text-white text-sm"})})}),r.jsx("button",{onClick:()=>(e=>{try{const t=localStorage.getItem("favorites");if(t){const r=JSON.parse(t).filter(t=>t!==e);localStorage.setItem("favorites",JSON.stringify(r)),window.dispatchEvent(new Event("favoritesChanged")),h()}}catch(t){}})(e.id),className:"absolute top-4 right-4 z-20 w-10 h-10 rounded-full bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm shadow-lg flex items-center justify-center hover:scale-110 hover:bg-red-500 hover:text-white transition-all group/remove",title:"Remover dos Favoritos",children:r.jsx("i",{className:"ri-heart-fill text-xl text-red-500 group-hover/remove:text-white transition-colors"})}),i>0&&r.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 px-3 py-1 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white text-sm font-bold rounded-full shadow-lg",children:["-",i,"%"]}),r.jsx(s,{to:`/produto/${e.slug}`,className:"block",children:r.jsx("div",{className:"relative w-full h-72 bg-gray-100 dark:bg-gray-800 overflow-hidden",children:r.jsx("img",{src:a,alt:e.name,className:"w-full h-full object-cover object-top group-hover:scale-110 transition-transform duration-500"})})}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx(s,{to:`/produto/${e.slug}`,children:r.jsx("h3",{className:"text-base font-bold min-h-[3rem] line-clamp-2 group-hover:text-transparent group-hover:bg-gradient-to-r group-hover:from-[#b62bff] group-hover:to-[#ff6a00] group-hover:bg-clip-text transition-all",children:e.name})}),r.jsxs("div",{className:"space-y-1",children:[e.compare_at_price&&e.compare_at_price>e.price&&r.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 line-through",children:["€",e.compare_at_price.toFixed(2)]}),r.jsxs("div",{className:"text-2xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:["€",e.price.toFixed(2)]})]}),e.stock<10&&e.stock>0&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-500",children:[r.jsx("i",{className:"ri-error-warning-line"}),"Últimas ",e.stock," unidades"]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{onClick:async t=>{t.preventDefault(),t.stopPropagation();try{await m(e,1)}catch(r){}},disabled:0===e.stock,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Adicionar ao Carrinho",children:0===e.stock?r.jsx("i",{className:"ri-close-circle-line text-2xl"}):r.jsx("i",{className:"ri-shopping-cart-line text-2xl"})}),r.jsx("button",{onClick:async t=>{t.preventDefault(),t.stopPropagation();try{await m(e,1),window.REACT_APP_NAVIGATE("/cart")}catch(r){}},disabled:0===e.stock,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-2xl hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed group/buy",title:"Comprar Agora",children:0===e.stock?r.jsx("i",{className:"ri-close-circle-line text-2xl"}):r.jsx("i",{className:"ri-shopping-bag-3-fill text-2xl group-hover/buy:animate-bounce"})})]})]})]},e.id)})})]})})}export{i as default};
