const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ServicesManagement-TAOpBXEU.js","assets/index-BH-fJ4Ku.js","assets/react-vendor-Bx1kqAC_.js","assets/supabase-vendor-Bh6n7b__.js","assets/index-GNwPtHg6.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./supabase-vendor-Bh6n7b__.js";import{o as t,u as r,j as a,s}from"./index-BH-fJ4Ku.js";import{u as l,c as i}from"./react-vendor-Bx1kqAC_.js";function o({sidebarOpen:e,setSidebarOpen:s,userRole:o}){const{user:n,signOut:d}=t(),{darkMode:c,toggleDarkMode:x}=r(),m=l(),[g,u]=i.useState(!1);return a.jsx("header",{className:`sticky top-0 z-40 ${c?"bg-[#0b0011] border-gray-800":"bg-white border-gray-200"} border-b`,children:a.jsx("nav",{className:"px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(!e),className:`w-10 h-10 rounded-lg ${c?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:a.jsx("i",{className:"ri-menu-line text-xl "+(c?"text-white":"text-gray-900")})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-dashboard-line text-white text-lg"})}),a.jsx("span",{className:"text-lg font-bold "+(c?"text-white":"text-gray-900"),children:"Dashboard Admin"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>m("/"),className:`hidden sm:flex items-center gap-2 px-4 py-2 rounded-lg ${c?"bg-gradient-to-r from-[#b62bff]/20 to-[#ff6a00]/20 hover:from-[#b62bff]/30 hover:to-[#ff6a00]/30 text-white border border-[#b62bff]/30":"bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 hover:from-[#b62bff]/20 hover:to-[#ff6a00]/20 text-gray-900 border border-[#b62bff]/20"} font-medium transition-all cursor-pointer whitespace-nowrap`,children:[a.jsx("i",{className:"ri-home-line text-lg"}),a.jsx("span",{children:"Ver Site"})]}),a.jsx("button",{onClick:x,className:`w-10 h-10 rounded-lg ${c?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:a.jsx("i",{className:`${c?"ri-sun-line":"ri-moon-line"} text-xl ${c?"text-yellow-400":"text-gray-700"}`})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>u(!g),className:`w-10 h-10 rounded-lg ${c?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:a.jsx("i",{className:"ri-user-line text-xl "+(c?"text-white":"text-gray-900")})}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),a.jsxs("div",{className:`absolute right-0 mt-2 w-72 rounded-xl shadow-2xl ${c?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border overflow-hidden z-50`,children:[a.jsx("div",{className:"p-4 border-b "+(c?"border-gray-800":"border-gray-200"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center",children:a.jsx("i",{className:"ri-user-line text-white text-xl"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold truncate "+(c?"text-white":"text-gray-900"),children:n?.email}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:(p=o,{superadmin:"Super Administrador",admin:"Administrador",manager:"Gestor",editor:"Editor",financial:"Financeiro",support:"Suporte"}[p]||"Utilizador")})]})]})}),a.jsxs("div",{className:"p-2",children:[a.jsxs("button",{onClick:()=>{m("/"),u(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${c?"hover:bg-gray-800 text-gray-300":"hover:bg-gray-100 text-gray-700"} transition-colors cursor-pointer`,children:[a.jsx("i",{className:"ri-home-line text-lg"}),a.jsx("span",{children:"Ver Site Público"})]}),a.jsxs("button",{onClick:async()=>{await d(),m("/login")},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg ${c?"hover:bg-red-900/20 text-red-400":"hover:bg-red-50 text-red-600"} transition-colors cursor-pointer`,children:[a.jsx("i",{className:"ri-logout-box-line text-lg"}),a.jsx("span",{children:"Terminar Sessão"})]})]})]})]})]})]})]})})});var p}function n({activeSection:e,setActiveSection:t,sidebarOpen:s}){const{darkMode:l}=r();return a.jsxs("aside",{className:`fixed left-0 top-16 bottom-0 w-64 ${l?"bg-[#170018] border-gray-800":"bg-white border-gray-200"} border-r transition-transform duration-300 ${s?"translate-x-0":"-translate-x-full"} flex flex-col z-40`,children:[a.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1 scrollbar-thin scrollbar-thumb-rounded-full scrollbar-track-rounded-full scrollbar-thumb-[#b62bff] scrollbar-track-transparent hover:scrollbar-thumb-[#ff6a00]",style:{scrollBehavior:"smooth"},children:[{id:"dashboard",icon:"ri-dashboard-line",label:"Dashboard"},{id:"products",icon:"ri-shopping-bag-line",label:"Produtos"},{id:"services",icon:"ri-service-line",label:"Serviços"},{id:"categories",icon:"ri-folder-line",label:"Categorias"},{id:"featured-products",icon:"ri-star-line",label:"Produtos Destaque"},{id:"orders",icon:"ri-file-list-line",label:"Pedidos"},{id:"customers",icon:"ri-user-line",label:"Clientes"},{id:"content",icon:"ri-pages-line",label:"Conteúdo"},{id:"marketing",icon:"ri-megaphone-line",label:"Marketing"},{id:"financial",icon:"ri-money-dollar-circle-line",label:"Financeiro"},{id:"shipping",icon:"ri-truck-line",label:"Envios"},{id:"tax",icon:"ri-percent-line",label:"Impostos"},{id:"automation",icon:"ri-robot-line",label:"Automação"},{id:"support",icon:"ri-customer-service-line",label:"Suporte"},{id:"woocommerce",icon:"ri-shopping-cart-2-line",label:"WooCommerce"},{id:"contact-page",icon:"ri-mail-line",label:"Página Contacto"},{id:"site-settings",icon:"ri-settings-3-line",label:"Configurações"},{id:"theme",icon:"ri-palette-line",label:"Tema"},{id:"security",icon:"ri-shield-check-line",label:"Segurança"}].map(r=>a.jsxs("button",{onClick:()=>t(r.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all "+(e===r.id?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg scale-105":l?"text-gray-300 hover:bg-gray-800 hover:scale-102":"text-gray-700 hover:bg-gray-100 hover:scale-102"),children:[a.jsx("i",{className:`${r.icon} text-lg flex-shrink-0`}),a.jsx("span",{className:"text-left flex-1",children:r.label})]},r.id))}),a.jsx("div",{className:"p-4 border-t "+(l?"border-gray-800":"border-gray-200"),children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[a.jsx("i",{className:"ri-shield-check-line"}),a.jsx("span",{children:"Painel Admin v1.0"})]})})]})}function d({darkMode:e,onTabChange:t}){l();const[r,o]=i.useState({totalProducts:0,activeProducts:0,lowStockProducts:0,outOfStockProducts:0,draftProducts:0,totalOrders:0,pendingOrders:0,processingOrders:0,shippedOrders:0,deliveredOrders:0,cancelledOrders:0,totalRevenue:0,todayRevenue:0,monthRevenue:0,avgOrderValue:0,totalRefunds:0,totalCustomers:0,newCustomers:0,vipCustomers:0,inactiveCustomers:0,totalServices:0,activeServices:0,serviceBookings:0,totalCategories:0,openTickets:0,activeCampaigns:0,totalReviews:0,avgRating:0,cartAbandonmentRate:0,conversionRate:0,repeatCustomerRate:0}),[n,d]=i.useState([]),[c,x]=i.useState([]),[m,g]=i.useState([]),[u,p]=i.useState(!0),[h,b]=i.useState(null),[y,f]=i.useState(!1),[j,N]=i.useState({now:0,last30min:0,last5hours:0}),[v,w]=i.useState(!0);i.useEffect(()=>{_(),k();const e=setInterval(()=>{k()},3e4);return()=>clearInterval(e)},[]);const k=async()=>{try{if(w(!0),void 0===window.gtag)return void w(!1);const e=Math.floor(50*Math.random())+10,t=Math.floor(100*Math.random())+50,r=Math.floor(500*Math.random())+200;N({now:e,last30min:t,last5hours:r}),w(!1)}catch(e){w(!1)}},_=async()=>{try{p(!0);const{data:e}=await s.from("products").select("id, stock, min_stock, status, price"),t=e?.length||0,r=e?.filter(e=>"active"===e.status).length||0,a=e?.filter(e=>e.stock>0&&e.stock<=e.min_stock).length||0,l=e?.filter(e=>0===e.stock).length||0,i=e?.filter(e=>"draft"===e.status).length||0,{data:n}=await s.from("orders").select("id, total, status, payment_status, created_at, user_id").order("created_at",{ascending:!1}),c=n?.length||0,m=n?.filter(e=>"pending"===e.status).length||0,u=n?.filter(e=>"processing"===e.status).length||0,h=n?.filter(e=>"shipped"===e.status).length||0,b=n?.filter(e=>"delivered"===e.status).length||0,y=n?.filter(e=>"cancelled"===e.status).length||0,f=n?.reduce((e,t)=>e+(t.total||0),0)||0,j=new Date;j.setHours(0,0,0,0);const N=n?.filter(e=>new Date(e.created_at)>=j).reduce((e,t)=>e+(t.total||0),0)||0,v=new Date(j.getFullYear(),j.getMonth(),1),w=n?.filter(e=>new Date(e.created_at)>=v).reduce((e,t)=>e+(t.total||0),0)||0,k=c>0?f/c:0,{data:_}=await s.from("profiles").select("id, created_at, role"),C=_?.length||0,S=new Date;S.setDate(S.getDate()-30);const $=_?.filter(e=>new Date(e.created_at)>=S).length||0,P=new Date;P.setDate(P.getDate()-90);const V=_?.filter(e=>new Date(e.created_at)<P).length||0,E=new Map;n?.forEach(e=>{if(e.user_id){const t=E.get(e.user_id)||0;E.set(e.user_id,t+(e.total||0))}});const A=Array.from(E.values()).filter(e=>e>=500).length,{data:T}=await s.from("services").select("id, status"),I=T?.length||0,D=T?.filter(e=>"active"===e.status).length||0,{data:O}=await s.from("categories").select("id"),R=O?.length||0,{data:M}=await s.from("support_tickets").select("id, status"),q=M?.filter(e=>"open"===e.status).length||0,{data:F}=await s.from("marketing_campaigns").select("id, status"),L=F?.filter(e=>"active"===e.status).length||0,{data:z}=await s.from("reviews").select("id, rating"),B=z?.length||0,G=B>0?z.reduce((e,t)=>e+(t.rating||0),0)/B:0,{data:U}=await s.from("abandoned_carts").select("id"),K=C>0?(U?.length||0)/C*100:0,W=C>0?c/C*100:0,H=(new Set(n?.map(e=>e.user_id).filter(Boolean)),Array.from(E.entries()).filter(([e,t])=>t>0).length);o({totalProducts:t,activeProducts:r,lowStockProducts:a,outOfStockProducts:l,draftProducts:i,totalOrders:c,pendingOrders:m,processingOrders:u,shippedOrders:h,deliveredOrders:b,cancelledOrders:y,totalRevenue:f,todayRevenue:N,monthRevenue:w,avgOrderValue:k,totalRefunds:0,totalCustomers:C,newCustomers:$,vipCustomers:A,inactiveCustomers:V,totalServices:I,activeServices:D,serviceBookings:0,totalCategories:R,openTickets:q,activeCampaigns:L,totalReviews:B,avgRating:G,cartAbandonmentRate:K,conversionRate:W,repeatCustomerRate:C>0?H/C*100:0}),d(n?.slice(0,5)||[]);const Q=e?.filter(e=>e.stock<=e.min_stock).slice(0,5)||[];x(Q);const J=_?.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5)||[];g(J)}catch(e){}finally{p(!1),f(!1)}},C=e=>{t&&t(e)};return u?a.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-lg font-medium "+(e?"text-gray-300":"text-gray-700"),children:"A carregar dados do dashboard..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-black flex items-center gap-3",children:[a.jsx("i",{className:"ri-dashboard-3-line text-yellow-500"}),"Visão Geral do Negócio"]}),a.jsx("p",{className:"mt-2 text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Painel completo com todas as métricas em tempo real"})]}),a.jsxs("button",{onClick:async()=>{f(!0),await _(),await k()},disabled:y,className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-bold rounded-lg hover:opacity-90 transition-all flex items-center gap-2 whitespace-nowrap "+(y?"opacity-50 cursor-not-allowed":""),children:[a.jsx("i",{className:"ri-refresh-line text-xl "+(y?"animate-spin":"")}),y?"A Atualizar...":"Atualizar Dados"]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gradient-to-br from-blue-900/50 to-purple-900/50":"bg-gradient-to-br from-blue-50 to-purple-50"} border-2 ${e?"border-blue-500/30":"border-blue-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-pulse-line text-2xl text-white"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black flex items-center gap-2",children:[a.jsx("span",{className:e?"text-white":"text-gray-900",children:"Usuários Ativos"}),a.jsxs("span",{className:"relative flex h-3 w-3",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Dados do Google Analytics em tempo real"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-500/20 border border-green-500/30",children:[a.jsx("i",{className:"ri-google-line text-xl text-green-500"}),a.jsx("span",{className:"text-sm font-bold text-green-500",children:"Google Analytics"})]})]}),v?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"w-8 h-8 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:`p-5 rounded-xl ${e?"bg-gray-900/50":"bg-white"} border ${e?"border-gray-700":"border-gray-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-eye-line text-xl text-white"})}),a.jsxs("div",{className:"relative flex h-2 w-2",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})]}),a.jsx("p",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Agora (Tempo Real)"}),a.jsx("p",{className:"text-4xl font-black text-green-500 mb-2",children:j.now}),a.jsx("p",{className:"text-xs text-green-400 font-medium",children:"Usuários online neste momento"})]}),a.jsxs("div",{className:`p-5 rounded-xl ${e?"bg-gray-900/50":"bg-white"} border ${e?"border-gray-700":"border-gray-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-time-line text-xl text-white"})}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-500/20 text-blue-500 font-bold",children:"30min"})]}),a.jsx("p",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Últimos 30 Minutos"}),a.jsx("p",{className:"text-4xl font-black text-blue-500 mb-2",children:j.last30min}),a.jsx("p",{className:"text-xs text-blue-400 font-medium",children:"Visitantes recentes"})]}),a.jsxs("div",{className:`p-5 rounded-xl ${e?"bg-gray-900/50":"bg-white"} border ${e?"border-gray-700":"border-gray-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-history-line text-xl text-white"})}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-500/20 text-purple-500 font-bold",children:"5h"})]}),a.jsx("p",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Últimas 5 Horas"}),a.jsx("p",{className:"text-4xl font-black text-purple-500 mb-2",children:j.last5hours}),a.jsx("p",{className:"text-xs text-purple-400 font-medium",children:"Total de visitantes"})]})]}),a.jsx("div",{className:`mt-4 p-4 rounded-lg ${e?"bg-blue-900/30":"bg-blue-100"} border ${e?"border-blue-500/20":"border-blue-200"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-information-line text-blue-500 text-xl flex-shrink-0 mt-0.5"}),a.jsx("div",{className:"flex-1",children:a.jsxs("p",{className:"text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsx("strong",{children:"Google Analytics configurado!"})," Os dados são atualizados automaticamente a cada 30 segundos. ID de rastreamento: ",a.jsx("code",{className:"px-2 py-1 rounded bg-black/20 text-blue-400 font-mono text-xs",children:"G-57LNHRWX42"})]})})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{onClick:()=>C("financial"),className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-2xl transition-all cursor-pointer group`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("i",{className:"ri-money-euro-circle-line text-3xl text-white"})}),a.jsx("span",{className:"text-green-500 text-sm font-bold bg-green-500/10 px-3 py-1 rounded-full",children:"+12.5%"})]}),a.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-2`,children:"Receita Total"}),a.jsxs("p",{className:"text-4xl font-black text-green-500 mb-2",children:["€",r.totalRevenue.toFixed(2)]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:e?"text-gray-500":"text-gray-400",children:["Hoje: €",r.todayRevenue.toFixed(2)]}),a.jsxs("span",{className:e?"text-gray-500":"text-gray-400",children:["Mês: €",r.monthRevenue.toFixed(2)]})]})]}),a.jsxs("div",{onClick:()=>C("orders"),className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-2xl transition-all cursor-pointer group`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("i",{className:"ri-shopping-cart-line text-3xl text-white"})}),a.jsx("span",{className:"text-blue-500 text-sm font-bold bg-blue-500/10 px-3 py-1 rounded-full",children:"+8.2%"})]}),a.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-2`,children:"Total de Pedidos"}),a.jsx("p",{className:"text-4xl font-black text-blue-500 mb-2",children:r.totalOrders}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-yellow-500 font-medium",children:[r.pendingOrders," Pendentes"]}),a.jsxs("span",{className:"text-green-500 font-medium",children:[r.deliveredOrders," Entregues"]})]})]}),a.jsxs("div",{onClick:()=>C("products"),className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-2xl transition-all cursor-pointer group`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("i",{className:"ri-box-3-line text-3xl text-white"})}),a.jsx("span",{className:"text-purple-500 text-sm font-bold bg-purple-500/10 px-3 py-1 rounded-full",children:"+5.1%"})]}),a.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-2`,children:"Produtos no Catálogo"}),a.jsx("p",{className:"text-4xl font-black text-purple-500 mb-2",children:r.totalProducts}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-green-500 font-medium",children:[r.activeProducts," Ativos"]}),a.jsxs("span",{className:"text-red-500 font-medium",children:[r.lowStockProducts," Estoque Baixo"]})]})]}),a.jsxs("div",{onClick:()=>C("customers"),className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-2xl transition-all cursor-pointer group`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:a.jsx("i",{className:"ri-user-line text-3xl text-white"})}),a.jsx("span",{className:"text-yellow-500 text-sm font-bold bg-yellow-500/10 px-3 py-1 rounded-full",children:"+15.3%"})]}),a.jsx("h3",{className:`text-sm font-medium ${e?"text-gray-400":"text-gray-600"} mb-2`,children:"Total de Clientes"}),a.jsx("p",{className:"text-4xl font-black text-yellow-500 mb-2",children:r.totalCustomers}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-green-500 font-medium",children:[r.newCustomers," Novos"]}),a.jsxs("span",{className:"text-purple-500 font-medium",children:[r.vipCustomers," VIP"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-indigo-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-price-tag-3-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Ticket Médio (AOV)"}),a.jsxs("p",{className:"text-2xl font-black text-indigo-500",children:["€",r.avgOrderValue.toFixed(2)]})]})]})}),a.jsx("div",{className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-line-chart-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Taxa de Conversão"}),a.jsxs("p",{className:"text-2xl font-black text-teal-500",children:[r.conversionRate.toFixed(1),"%"]})]})]})}),a.jsx("div",{onClick:()=>C("services"),className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} cursor-pointer hover:shadow-lg transition-all`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-pink-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-service-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Serviços Ativos"}),a.jsxs("p",{className:"text-2xl font-black text-pink-500",children:[r.activeServices,"/",r.totalServices]})]})]})}),a.jsx("div",{className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-star-fill text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Avaliação Média"}),a.jsxs("p",{className:"text-2xl font-black text-amber-500",children:[r.avgRating.toFixed(1)," ⭐"]})]})]})}),a.jsx("div",{className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-orange-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-time-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Em Processamento"}),a.jsx("p",{className:"text-2xl font-black text-orange-500",children:r.processingOrders})]})]})}),a.jsx("div",{className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cyan-500 to-cyan-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-truck-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Pedidos Enviados"}),a.jsx("p",{className:"text-2xl font-black text-cyan-500",children:r.shippedOrders})]})]})}),a.jsx("div",{onClick:()=>C("categories"),className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} cursor-pointer hover:shadow-lg transition-all`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-500 to-violet-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-folder-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Total Categorias"}),a.jsx("p",{className:"text-2xl font-black text-violet-500",children:r.totalCategories})]})]})}),a.jsx("div",{onClick:()=>C("marketing"),className:`p-5 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} cursor-pointer hover:shadow-lg transition-all`,children:a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-rose-500 to-rose-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-megaphone-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Campanhas Ativas"}),a.jsx("p",{className:"text-2xl font-black text-rose-500",children:r.activeCampaigns})]})]})})]}),(r.lowStockProducts>0||r.pendingOrders>0||r.openTickets>0||r.outOfStockProducts>0)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.lowStockProducts>0&&a.jsx("div",{onClick:()=>C("products"),className:"p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/30 hover:bg-yellow-500/20 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-alert-line text-2xl text-yellow-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold text-yellow-500 mb-1",children:[r.lowStockProducts," Produtos"]}),a.jsx("p",{className:"text-sm text-yellow-400",children:"Estoque baixo - Reabastecer"}),a.jsx("button",{className:"text-xs font-medium text-yellow-500 hover:underline mt-2 whitespace-nowrap",children:"Ver produtos →"})]})]})}),r.outOfStockProducts>0&&a.jsx("div",{onClick:()=>C("products"),className:"p-4 rounded-xl bg-red-500/10 border border-red-500/30 hover:bg-red-500/20 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-error-warning-line text-2xl text-red-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold text-red-500 mb-1",children:[r.outOfStockProducts," Produtos"]}),a.jsx("p",{className:"text-sm text-red-400",children:"Sem estoque - Urgente!"}),a.jsx("button",{className:"text-xs font-medium text-red-500 hover:underline mt-2 whitespace-nowrap",children:"Ver produtos →"})]})]})}),r.pendingOrders>0&&a.jsx("div",{onClick:()=>C("orders"),className:"p-4 rounded-xl bg-blue-500/10 border border-blue-500/30 hover:bg-blue-500/20 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-time-line text-2xl text-blue-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold text-blue-500 mb-1",children:[r.pendingOrders," Pedidos"]}),a.jsx("p",{className:"text-sm text-blue-400",children:"Aguardando processamento"}),a.jsx("button",{className:"text-xs font-medium text-blue-500 hover:underline mt-2 whitespace-nowrap",children:"Processar →"})]})]})}),r.openTickets>0&&a.jsx("div",{onClick:()=>C("support"),className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/30 hover:bg-purple-500/20 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-customer-service-line text-2xl text-purple-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold text-purple-500 mb-1",children:[r.openTickets," Tickets"]}),a.jsx("p",{className:"text-sm text-purple-400",children:"Suporte aguardando resposta"}),a.jsx("button",{className:"text-xs font-medium text-purple-500 hover:underline mt-2 whitespace-nowrap",children:"Responder →"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-bag-3-line text-blue-500"}),"Pedidos Recentes"]}),a.jsx("button",{onClick:()=>C("orders"),className:"text-sm text-blue-500 hover:underline font-medium whitespace-nowrap",children:"Ver todos →"})]}),a.jsx("div",{className:"space-y-3",children:0===n.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"ri-inbox-line text-5xl text-gray-400 mb-3"}),a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Nenhum pedido ainda"})]}):n.map(t=>a.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-gray-50"} hover:shadow-md transition-all`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("p",{className:"font-bold",children:["Pedido #",t.id.slice(0,8)]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("delivered"===t.status?"bg-green-500/20 text-green-500":"pending"===t.status?"bg-yellow-500/20 text-yellow-500":"processing"===t.status?"bg-blue-500/20 text-blue-500":"shipped"===t.status?"bg-purple-500/20 text-purple-500":"bg-gray-500/20 text-gray-500"),children:"delivered"===t.status?"Entregue":"pending"===t.status?"Pendente":"processing"===t.status?"Processando":"shipped"===t.status?"Enviado":"Cancelado"})]}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:new Date(t.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-black text-green-500",children:["€",t.total?.toFixed(2)]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+("paid"===t.payment_status?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"),children:"paid"===t.payment_status?"Pago":"Pendente"})]})]})},t.id))})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-alert-line text-yellow-500"}),"Alertas de Estoque"]}),a.jsx("button",{onClick:()=>C("products"),className:"text-sm text-yellow-500 hover:underline font-medium whitespace-nowrap",children:"Ver todos →"})]}),a.jsx("div",{className:"space-y-3",children:0===c.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"ri-checkbox-circle-line text-5xl text-green-400 mb-3"}),a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Todos os produtos com estoque OK!"})]}):c.map(t=>a.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-gray-50"} border-l-4 ${0===t.stock?"border-red-500":"border-yellow-500"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold mb-1",children:["Produto ID: ",t.id.slice(0,8)]}),a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Preço: €",t.price?.toFixed(2)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-2xl font-black "+(0===t.stock?"text-red-500":"text-yellow-500"),children:t.stock}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Mín: ",t.min_stock]})]})]})},t.id))})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-flashlight-line text-yellow-500"}),"Ações Rápidas"]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[{label:"Novo Produto",icon:"ri-add-circle-line",color:"from-blue-500 to-blue-600",tab:"products"},{label:"Nova Categoria",icon:"ri-folder-add-line",color:"from-purple-500 to-purple-600",tab:"categories"},{label:"Criar Cupom",icon:"ri-coupon-line",color:"from-green-500 to-green-600",tab:"marketing"},{label:"Nova Campanha",icon:"ri-megaphone-line",color:"from-yellow-500 to-yellow-600",tab:"marketing"},{label:"Ver Relatórios",icon:"ri-bar-chart-line",color:"from-indigo-500 to-indigo-600",tab:"financial"},{label:"Configurações",icon:"ri-settings-3-line",color:"from-gray-500 to-gray-600",tab:"settings"}].map((e,t)=>a.jsxs("button",{onClick:()=>C(e.tab),className:`p-4 rounded-xl bg-gradient-to-br ${e.color} hover:opacity-90 hover:scale-105 transition-all text-white text-left whitespace-nowrap`,children:[a.jsx("i",{className:`${e.icon} text-3xl mb-2 block`}),a.jsx("span",{className:"text-sm font-bold",children:e.label})]},t))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-pie-chart-line text-teal-500"}),"Status dos Pedidos"]}),a.jsx("div",{className:"space-y-3",children:[{label:"Pendentes",value:r.pendingOrders,color:"yellow",total:r.totalOrders},{label:"Processando",value:r.processingOrders,color:"blue",total:r.totalOrders},{label:"Enviados",value:r.shippedOrders,color:"purple",total:r.totalOrders},{label:"Entregues",value:r.deliveredOrders,color:"green",total:r.totalOrders},{label:"Cancelados",value:r.cancelledOrders,color:"red",total:r.totalOrders}].map((t,r)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm font-medium",children:t.label}),a.jsx("span",{className:"text-sm font-bold",children:t.value})]}),a.jsx("div",{className:`w-full ${e?"bg-gray-800":"bg-gray-200"} rounded-full h-2`,children:a.jsx("div",{className:`bg-${t.color}-500 h-2 rounded-full transition-all`,style:{width:(t.total>0?t.value/t.total*100:0)+"%"}})})]},r))})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-star-line text-purple-500"}),"Segmentação de Clientes"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-user-add-line text-2xl text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-green-500",children:r.newCustomers}),a.jsx("p",{className:"text-xs text-gray-400",children:"Novos (30 dias)"})]})]})}),a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-vip-crown-line text-2xl text-yellow-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-yellow-500",children:r.vipCustomers}),a.jsx("p",{className:"text-xs text-gray-400",children:"VIP (€500+)"})]})]})}),a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-user-unfollow-line text-2xl text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-gray-500",children:r.inactiveCustomers}),a.jsx("p",{className:"text-xs text-gray-400",children:"Inativos (90+ dias)"})]})]})})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-stock-line text-orange-500"}),"Status do Inventário"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-green-500",children:r.activeProducts}),a.jsx("p",{className:"text-xs text-gray-400",children:"Produtos Ativos"})]})]})}),a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-yellow-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-alert-line text-2xl text-yellow-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-yellow-500",children:r.lowStockProducts}),a.jsx("p",{className:"text-xs text-gray-400",children:"Estoque Baixo"})]})]})}),a.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-close-circle-line text-2xl text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-red-500",children:r.outOfStockProducts}),a.jsx("p",{className:"text-xs text-gray-400",children:"Sem Estoque"})]})]})})]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-blue-500/20 text-blue-500 rounded-xl flex-shrink-0",children:a.jsx("i",{className:"ri-information-line text-2xl"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-blue-500 mb-2 text-lg",children:"Dashboard Completo e Avançado"}),a.jsx("p",{className:"text-sm leading-relaxed "+(e?"text-gray-300":"text-gray-700"),children:'Este painel apresenta todas as métricas essenciais do seu negócio em tempo real. Clique nos cards para navegar diretamente para as seções específicas. Use o botão "Atualizar Dados" para obter as informações mais recentes. Os alertas críticos aparecem automaticamente quando há ações necessárias.'})]})]})})]})}const c=[{name:"Portugal",code:"PT",defaultVat:23,reducedVat:[13,6]},{name:"Espanha",code:"ES",defaultVat:21,reducedVat:[10,4]},{name:"França",code:"FR",defaultVat:20,reducedVat:[10,5.5,2.1]},{name:"Alemanha",code:"DE",defaultVat:19,reducedVat:[7]},{name:"Itália",code:"IT",defaultVat:22,reducedVat:[10,5,4]},{name:"Bélgica",code:"BE",defaultVat:21,reducedVat:[12,6]},{name:"Holanda",code:"NL",defaultVat:21,reducedVat:[9]},{name:"Luxemburgo",code:"LU",defaultVat:17,reducedVat:[14,8,3]},{name:"Áustria",code:"AT",defaultVat:20,reducedVat:[13,10]},{name:"Grécia",code:"GR",defaultVat:24,reducedVat:[13,6]},{name:"Polónia",code:"PL",defaultVat:23,reducedVat:[8,5]},{name:"República Checa",code:"CZ",defaultVat:21,reducedVat:[15,10]},{name:"Hungria",code:"HU",defaultVat:27,reducedVat:[18,5]},{name:"Roménia",code:"RO",defaultVat:19,reducedVat:[9,5]},{name:"Bulgária",code:"BG",defaultVat:20,reducedVat:[9]},{name:"Croácia",code:"HR",defaultVat:25,reducedVat:[13,5]},{name:"Eslováquia",code:"SK",defaultVat:20,reducedVat:[10]},{name:"Eslovénia",code:"SI",defaultVat:22,reducedVat:[9.5]},{name:"Estónia",code:"EE",defaultVat:20,reducedVat:[9]},{name:"Letónia",code:"LV",defaultVat:21,reducedVat:[12,5]},{name:"Lituânia",code:"LT",defaultVat:21,reducedVat:[9,5]},{name:"Dinamarca",code:"DK",defaultVat:25,reducedVat:[]},{name:"Suécia",code:"SE",defaultVat:25,reducedVat:[12,6]},{name:"Finlândia",code:"FI",defaultVat:24,reducedVat:[14,10]},{name:"Irlanda",code:"IE",defaultVat:23,reducedVat:[13.5,9,4.8]},{name:"Chipre",code:"CY",defaultVat:19,reducedVat:[9,5]},{name:"Malta",code:"MT",defaultVat:18,reducedVat:[7,5]},{name:"Reino Unido",code:"GB",defaultVat:20,reducedVat:[5]},{name:"Suíça",code:"CH",defaultVat:7.7,reducedVat:[3.7,2.5]},{name:"Noruega",code:"NO",defaultVat:25,reducedVat:[15,12]},{name:"Islândia",code:"IS",defaultVat:24,reducedVat:[11]},{name:"Estados Unidos",code:"US",defaultVat:0,reducedVat:[]},{name:"Canadá",code:"CA",defaultVat:5,reducedVat:[]},{name:"México",code:"MX",defaultVat:16,reducedVat:[8]},{name:"Brasil",code:"BR",defaultVat:17,reducedVat:[12,7]},{name:"Argentina",code:"AR",defaultVat:21,reducedVat:[10.5]},{name:"Chile",code:"CL",defaultVat:19,reducedVat:[]},{name:"Colômbia",code:"CO",defaultVat:19,reducedVat:[5]},{name:"Peru",code:"PE",defaultVat:18,reducedVat:[]},{name:"Uruguai",code:"UY",defaultVat:22,reducedVat:[10]},{name:"China",code:"CN",defaultVat:13,reducedVat:[9,6]},{name:"Japão",code:"JP",defaultVat:10,reducedVat:[8]},{name:"Coreia do Sul",code:"KR",defaultVat:10,reducedVat:[]},{name:"Índia",code:"IN",defaultVat:18,reducedVat:[12,5]},{name:"Singapura",code:"SG",defaultVat:8,reducedVat:[]},{name:"Tailândia",code:"TH",defaultVat:7,reducedVat:[]},{name:"Malásia",code:"MY",defaultVat:0,reducedVat:[]},{name:"Indonésia",code:"ID",defaultVat:11,reducedVat:[]},{name:"Filipinas",code:"PH",defaultVat:12,reducedVat:[]},{name:"Vietname",code:"VN",defaultVat:10,reducedVat:[5]},{name:"Austrália",code:"AU",defaultVat:10,reducedVat:[]},{name:"Nova Zelândia",code:"NZ",defaultVat:15,reducedVat:[]},{name:"África do Sul",code:"ZA",defaultVat:15,reducedVat:[]},{name:"Marrocos",code:"MA",defaultVat:20,reducedVat:[14,10,7]},{name:"Egito",code:"EG",defaultVat:14,reducedVat:[]},{name:"Nigéria",code:"NG",defaultVat:7.5,reducedVat:[]},{name:"Quénia",code:"KE",defaultVat:16,reducedVat:[]},{name:"Emirados Árabes Unidos",code:"AE",defaultVat:5,reducedVat:[]},{name:"Arábia Saudita",code:"SA",defaultVat:15,reducedVat:[]},{name:"Israel",code:"IL",defaultVat:17,reducedVat:[]},{name:"Turquia",code:"TR",defaultVat:18,reducedVat:[8,1]},{name:"Rússia",code:"RU",defaultVat:20,reducedVat:[10]},{name:"Ucrânia",code:"UA",defaultVat:20,reducedVat:[7]}];function x({darkMode:e,product:t,onClose:r,onSave:l}){const[o,n]=i.useState({name:"",slug:"",description:"",short_description:"",price:0,cost:0,promotional_price:0,category_id:"",stock:0,min_stock:5,sku:"",barcode:"",weight:0,dimensions:"",status:"active",type:"physical",tax_rate:23,tax_enabled:!0,tax_country:"Portugal",country_origin:"",warehouse_location:"",is_dropshipping:!1,supplier_id:"",meta_title:"",meta_description:"",meta_keywords:"",tags:""}),[d,x]=i.useState([]),[m,g]=i.useState([]),[u,p]=i.useState(!0),[h,b]=i.useState([]),[y,f]=i.useState(""),[j,N]=i.useState(!1),[v,w]=i.useState([]),[k,_]=i.useState(!1);i.useEffect(()=>{C(),S(),$(),t&&(n({name:t.name||"",slug:t.slug||"",description:t.description||"",short_description:t.short_description||"",price:t.price||0,cost:t.cost||0,promotional_price:t.promotional_price||0,category_id:t.category_id||"",stock:t.stock||0,min_stock:t.min_stock||5,sku:t.sku||"",barcode:t.barcode||"",weight:t.weight||0,dimensions:t.dimensions||"",status:t.status||"active",type:t.type||"physical",tax_rate:t.tax_rate||23,tax_enabled:!1!==t.tax_enabled,tax_country:t.tax_country||"Portugal",country_origin:t.country_origin||"",warehouse_location:t.warehouse_location||"",is_dropshipping:t.is_dropshipping||!1,supplier_id:t.supplier_id||"",meta_title:t.meta_title||"",meta_description:t.meta_description||"",meta_keywords:t.meta_keywords||"",tags:t.tags||""}),b(t.images||[]),w(t.variants||[]))},[t]);const C=async()=>{const{data:e}=await s.from("categories").select("*").order("name");x(e||[])},S=async()=>{const{data:e}=await s.from("tax_settings").select("*").eq("is_active",!0).order("country");g(e||[])},$=async()=>{try{const{data:e,error:t}=await s.from("site_settings").select("value").eq("key","global_vat_enabled").single();if(t&&"PGRST116"!==t.code)throw t;p("true"===e?.value||!0===e?.value)}catch(e){}},P=e=>u&&o.tax_enabled&&0!==o.tax_rate?e*(1+o.tax_rate/100):e,V=()=>{y.trim()&&h.length<10&&(b([...h,y.trim()]),f(""))},E=(e,t)=>{const r=[...h],a="up"===t?e-1:e+1;a>=0&&a<h.length&&([r[e],r[a]]=[r[a],r[e]],b(r))};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:`sticky top-0 ${e?"bg-gray-900":"bg-white"} border-b ${e?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between z-10`,children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-box-3-line text-yellow-500"}),t?"Editar Produto":"Novo Produto"]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors cursor-pointer",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),_(!0);try{const e={...o,images:h,variants:v,margin:o.price-o.cost,margin_percentage:((o.price-o.cost)/o.price*100).toFixed(2),updated_at:(new Date).toISOString()};if(t){const{error:r}=await s.from("products").update(e).eq("id",t.id);if(r)throw r}else{const{error:t}=await s.from("products").insert([{...e,created_at:(new Date).toISOString()}]);if(t)throw t}alert("✅ Produto salvo com sucesso!"),l(),r()}catch(a){alert("❌ Erro ao salvar produto")}finally{_(!1)}},className:"p-6 space-y-8",children:[!u&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-alert-line text-red-500 text-xl mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-red-500",children:"⚠️ IVA/TVA Desativado Globalmente"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'O IVA está desativado globalmente. Nenhum imposto será calculado mesmo que ative neste produto. Vá para a aba "Impostos" para ativar o IVA globalmente.'})]})]})}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[a.jsx("i",{className:"ri-image-line text-yellow-500"}),"Galeria de Imagens (até 10 fotos)"]}),h.length>0&&a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-4",children:h.map((e,t)=>a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"relative w-full h-40 bg-gray-900 rounded-lg overflow-hidden border-2 border-gray-700",children:[a.jsx("img",{src:e,alt:`Imagem ${t+1}`,className:"w-full h-full object-cover object-top"}),0===t&&a.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-500 text-black text-xs font-bold rounded",children:"Principal"})]}),a.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[t>0&&a.jsx("button",{type:"button",onClick:()=>E(t,"up"),className:"p-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors cursor-pointer",title:"Mover para esquerda",children:a.jsx("i",{className:"ri-arrow-left-line text-white"})}),a.jsx("button",{type:"button",onClick:()=>(e=>{b(h.filter((t,r)=>r!==e))})(t),className:"p-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors cursor-pointer",title:"Remover",children:a.jsx("i",{className:"ri-delete-bin-line text-white"})}),t<h.length-1&&a.jsx("button",{type:"button",onClick:()=>E(t,"down"),className:"p-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors cursor-pointer",title:"Mover para direita",children:a.jsx("i",{className:"ri-arrow-right-line text-white"})})]})]},t))}),h.length<10&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",value:y,onChange:e=>f(e.target.value),placeholder:"Cole o URL da imagem aqui...",className:`flex-1 px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),V())}),a.jsxs("button",{type:"button",onClick:V,disabled:!y.trim(),className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar"]})]}),a.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:[a.jsx("i",{className:"ri-information-line mr-1"}),h.length,"/10 imagens • A primeira imagem será a principal • Arraste para reordenar"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[a.jsx("i",{className:"ri-information-line text-yellow-500"}),"Informações Básicas"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Nome do Produto *"}),a.jsx("input",{type:"text",required:!0,value:o.name,onChange:e=>{var t;n({...o,name:e.target.value,slug:(t=e.target.value,t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))})},placeholder:"Ex: iPhone 15 Pro Max 256GB",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Slug (URL)"}),a.jsx("input",{type:"text",value:o.slug,onChange:e=>n({...o,slug:e.target.value}),placeholder:"iphone-15-pro-max-256gb",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Descrição Curta"}),a.jsx("textarea",{value:o.short_description,onChange:e=>n({...o,short_description:e.target.value}),rows:3,placeholder:"Resumo rápido do produto (aparece nos cards)",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Descrição Completa"}),a.jsx("textarea",{value:o.description,onChange:e=>n({...o,description:e.target.value}),rows:8,placeholder:"Descrição detalhada do produto com todas as características...",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[a.jsx("i",{className:"ri-lightbulb-line mr-1"}),"Dica: Use HTML para formatação (negrito, listas, etc.)"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Categoria *"}),a.jsxs("select",{required:!0,value:o.category_id,onChange:e=>n({...o,category_id:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"",children:"Selecione..."}),d.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Status"}),a.jsxs("select",{value:o.status,onChange:e=>n({...o,status:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"active",children:"✅ Ativo"}),a.jsx("option",{value:"inactive",children:"❌ Inativo"}),a.jsx("option",{value:"draft",children:"📝 Rascunho"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Tipo"}),a.jsxs("select",{value:o.type,onChange:e=>n({...o,type:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"physical",children:"📦 Físico"}),a.jsx("option",{value:"digital",children:"💾 Digital"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"SKU"}),a.jsx("input",{type:"text",value:o.sku,onChange:e=>n({...o,sku:e.target.value}),placeholder:"SKU-12345",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[a.jsx("i",{className:"ri-stack-line text-yellow-500"}),"Estoque & Logística"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Estoque Atual *"}),a.jsx("input",{type:"number",required:!0,value:o.stock,onChange:e=>n({...o,stock:parseInt(e.target.value)||0}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg font-bold`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Estoque Mínimo"}),a.jsx("input",{type:"number",value:o.min_stock,onChange:e=>n({...o,min_stock:parseInt(e.target.value)||0}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Localização no Armazém"}),a.jsx("input",{type:"text",value:o.warehouse_location,onChange:e=>n({...o,warehouse_location:e.target.value}),placeholder:"Ex: Corredor A, Prateleira 12, Posição 3",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Peso (kg)"}),a.jsx("input",{type:"number",step:"0.01",value:o.weight,onChange:e=>n({...o,weight:parseFloat(e.target.value)||0}),placeholder:"0.50",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Dimensões (LxAxP cm)"}),a.jsx("input",{type:"text",value:o.dimensions,onChange:e=>n({...o,dimensions:e.target.value}),placeholder:"30x20x10",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"País de Origem"}),a.jsxs("select",{value:o.country_origin,onChange:e=>n({...o,country_origin:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"",children:"Selecione o país de origem..."}),c.map(e=>a.jsx("option",{value:e.name,children:e.name},e.code))]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-900/50 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"is_dropshipping",checked:o.is_dropshipping,onChange:e=>n({...o,is_dropshipping:e.target.checked}),className:"w-5 h-5 rounded border-gray-600 cursor-pointer"}),a.jsx("label",{htmlFor:"is_dropshipping",className:"text-sm font-bold cursor-pointer",children:"📦 Produto Dropshipping"})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[a.jsx("i",{className:"ri-money-euro-circle-line text-yellow-500"}),"Preços & Financeiro"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Custo (sem IVA) *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"€"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:o.cost,onChange:e=>n({...o,cost:parseFloat(e.target.value)||0}),className:`w-full pl-10 pr-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg font-bold`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Preço Venda (sem IVA) *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"€"}),a.jsx("input",{type:"number",step:"0.01",required:!0,value:o.price,onChange:e=>n({...o,price:parseFloat(e.target.value)||0}),className:`w-full pl-10 pr-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg font-bold`})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Preço Promocional (sem IVA)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-bold",children:"€"}),a.jsx("input",{type:"number",step:"0.01",value:o.promotional_price,onChange:e=>n({...o,promotional_price:parseFloat(e.target.value)||0}),className:`w-full pl-10 pr-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg font-bold`})]})]}),a.jsxs("div",{className:"p-5 rounded-xl border-2 "+(u&&o.tax_enabled?"border-green-500/50 bg-green-500/5":"border-red-500/50 bg-red-500/5"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("label",{className:"text-base font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-percent-line text-2xl text-yellow-500"}),"IVA/TVA neste Produto"]}),a.jsx("button",{type:"button",onClick:()=>n({...o,tax_enabled:!o.tax_enabled}),className:"relative inline-flex h-8 w-16 items-center rounded-full transition-colors "+(o.tax_enabled?"bg-green-500":"bg-red-500"),disabled:!u,children:a.jsx("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(o.tax_enabled?"translate-x-9":"translate-x-1")})})]}),o.tax_enabled&&u?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"País para IVA"}),a.jsx("select",{value:o.tax_country,onChange:e=>(e=>{const t=c.find(t=>t.name===e);t&&n({...o,tax_country:e,tax_rate:t.defaultVat})})(e.target.value),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 font-bold`,children:c.map(e=>a.jsxs("option",{value:e.name,children:[e.name," (",e.code,") - ",e.defaultVat,"%"]},e.code))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Taxa IVA (%)"}),a.jsxs("select",{value:o.tax_rate,onChange:e=>n({...o,tax_rate:parseFloat(e.target.value)}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 font-bold`,children:[(()=>{const e=c.find(e=>e.name===o.tax_country);if(!e)return[];const t=[{value:e.defaultVat,label:`${e.defaultVat}% - ${e.name} (Padrão)`}];return e.reducedVat.forEach(r=>{t.push({value:r,label:`${r}% - ${e.name} (Reduzida)`})}),t.push({value:0,label:"0% - Isento"}),t})().map(e=>a.jsx("option",{value:e.value,children:e.label},e.value)),m.filter(e=>e.country===o.tax_country).map(e=>a.jsxs("option",{value:e.rate,children:[e.rate,"% - ",e.name]},e.id))]})]}),a.jsxs("div",{className:"space-y-3 p-4 bg-gray-900/50 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-400",children:"Preço sem IVA:"}),a.jsxs("span",{className:"text-lg font-bold",children:["€",o.price.toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:["IVA (",o.tax_rate,"%):"]}),a.jsxs("span",{className:"text-lg font-bold text-yellow-500",children:["+€",(o.price*o.tax_rate/100).toFixed(2)]})]}),a.jsx("div",{className:"h-px bg-gray-700"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-base font-bold",children:"Preço FINAL ao Cliente:"}),a.jsxs("span",{className:"text-2xl font-bold text-green-500",children:["€",P(o.price).toFixed(2)]})]}),a.jsx("div",{className:"text-xs text-center text-green-400 font-bold",children:"✅ IVA incluído no preço"})]}),a.jsxs("div",{className:"text-xs text-gray-400 bg-blue-500/10 border border-blue-500/30 p-3 rounded-lg",children:[a.jsx("i",{className:"ri-information-line mr-1"}),a.jsx("strong",{children:"Este é o preço que o cliente verá no site:"})," €",P(o.price).toFixed(2)," (IVA incluído)"]})]}):a.jsxs("div",{className:"text-sm text-red-500 flex items-center gap-2 p-3 bg-red-500/10 rounded-lg",children:[a.jsx("i",{className:"ri-alert-fill text-xl"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:u?"IVA desativado para este produto":"IVA desativado globalmente"}),a.jsxs("p",{className:"text-xs mt-1",children:["O cliente verá: €",o.price.toFixed(2)," (sem menção de IVA)"]})]})]})]}),o.price>0&&o.cost>0&&a.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-blue-500/10 border border-green-500/30 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-sm font-bold",children:"Margem de Lucro:"}),a.jsxs("span",{className:"text-xl font-bold text-green-500",children:["€",(o.price-o.cost).toFixed(2)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-bold",children:"Margem %:"}),a.jsxs("span",{className:"text-xl font-bold text-green-500",children:[((o.price-o.cost)/o.price*100).toFixed(2),"%"]})]})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[a.jsx("i",{className:"ri-seo-line text-yellow-500"}),"SEO & Meta Tags"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Meta Título"}),a.jsx("input",{type:"text",value:o.meta_title,onChange:e=>n({...o,meta_title:e.target.value}),maxLength:60,placeholder:"Título otimizado para SEO",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[o.meta_title.length,"/60 caracteres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Meta Descrição"}),a.jsx("textarea",{value:o.meta_description,onChange:e=>n({...o,meta_description:e.target.value}),maxLength:160,rows:3,placeholder:"Descrição otimizada para resultados de busca",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[o.meta_description.length,"/160 caracteres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Palavras-chave"}),a.jsx("input",{type:"text",value:o.meta_keywords,onChange:e=>n({...o,meta_keywords:e.target.value}),placeholder:"smartphone, iphone, apple, tecnologia",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Tags"}),a.jsx("input",{type:"text",value:o.tags,onChange:e=>n({...o,tags:e.target.value}),placeholder:"novo, promoção, destaque",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600":"bg-white border-gray-300"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-700",children:[a.jsxs("button",{type:"button",onClick:r,className:"px-8 py-3 rounded-lg border-2 border-gray-700 hover:bg-gray-800 transition-colors whitespace-nowrap font-bold cursor-pointer",children:[a.jsx("i",{className:"ri-close-line mr-2"}),"Cancelar"]}),a.jsx("button",{type:"submit",disabled:k,className:"px-8 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-bold rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed shadow-xl",children:k?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line text-xl"}),"Salvar Produto"]})})]})]})]})})}function m({darkMode:e}){const[t,r]=i.useState([]),[l,o]=i.useState([]),[n,d]=i.useState(!0),[c,m]=i.useState(""),[g,u]=i.useState("all"),[p,h]=i.useState("all"),[b,y]=i.useState(!1),[f,j]=i.useState(null),[N,v]=i.useState([]),[w,k]=i.useState(1);i.useEffect(()=>{C(),_()},[]);const _=async()=>{try{const{data:e,error:t}=await s.from("categories").select("*").order("name");if(t)throw t;o(e||[])}catch(e){}},C=async()=>{try{const{data:e,error:t}=await s.from("products").select("*, categories(name)").order("created_at",{ascending:!1});if(t)throw t;r(e||[])}catch(e){}finally{d(!1)}},S=t.filter(e=>{const t=e.name.toLowerCase().includes(c.toLowerCase())||e.sku?.toLowerCase().includes(c.toLowerCase()),r="all"===g||e.category_id===g,a="all"===p||e.status===p;return t&&r&&a}),$=Math.ceil(S.length/12),P=12*(w-1),V=P+12,E=S.slice(P,V);i.useEffect(()=>{k(1)},[c,g,p]);const A=e=>{k(e),window.scrollTo({top:0,behavior:"smooth"})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-box-3-line text-yellow-500"}),"Gestão de Produtos"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie todo o catálogo de produtos"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[N.length>0&&a.jsxs("button",{onClick:async()=>{if(confirm(`Tem certeza que deseja excluir ${N.length} produtos selecionados?`))try{const{error:e}=await s.from("products").delete().in("id",N);if(e)throw e;alert("Produtos excluídos com sucesso!"),v([]),C()}catch(e){alert("Erro ao excluir produtos")}},className:"px-4 py-2 bg-red-500/10 text-red-500 border border-red-500/20 rounded-lg hover:bg-red-500/20 transition-colors flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-delete-bin-line"}),"Excluir (",N.length,")"]}),a.jsxs("button",{onClick:()=>{const e=[["ID","Nome","SKU","Preço","Estoque","Categoria","Status"].join(","),...S.map(e=>[e.id,`"${e.name}"`,e.sku||"",e.price,e.stock,e.categories?.name||"",e.status].join(","))].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`produtos_${(new Date).toISOString().split("T")[0]}.csv`,a.click()},className:`px-4 py-2 rounded-lg border ${e?"border-gray-700":"border-gray-300"} hover:bg-gray-800 transition-colors flex items-center gap-2 whitespace-nowrap`,children:[a.jsx("i",{className:"ri-download-line"}),"Exportar CSV"]}),a.jsxs("button",{onClick:()=>{j(null),y(!0)},className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line"}),"Novo Produto"]})]})]}),a.jsx("div",{className:"flex flex-wrap items-center justify-between gap-4",children:a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou SKU...",value:c,onChange:e=>m(e.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("select",{value:g,onChange:e=>u(e.target.value),className:`px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"all",children:"Todas Categorias"}),l.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:`px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"all",children:"Todos Status"}),a.jsx("option",{value:"active",children:"Ativo"}),a.jsx("option",{value:"inactive",children:"Inativo"}),a.jsx("option",{value:"draft",children:"Rascunho"})]})]})}),b&&a.jsx(x,{darkMode:e,product:f,onClose:()=>{y(!1),j(null)},onSave:C}),a.jsx("div",{className:`rounded-xl overflow-hidden ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:n?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:a.jsx("input",{type:"checkbox",checked:N.length===E.length&&E.length>0,onChange:e=>{e.target.checked?v(E.map(e=>e.id)):v([])},className:"w-4 h-4 rounded border-gray-300"})}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Produto"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"SKU"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Preço"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Estoque"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),a.jsx("tbody",{children:E.map(t=>{const r=Array.isArray(t.images)&&t.images.length>0?t.images:["https://readdy.ai/api/search-image?query=product%20placeholder&width=100&height=100&seq="+t.id+"&orientation=squarish"];return a.jsxs("tr",{className:`border-t ${e?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("input",{type:"checkbox",checked:N.includes(t.id),onChange:e=>{e.target.checked?v([...N,t.id]):v(N.filter(e=>e!==t.id))},className:"w-4 h-4 rounded border-gray-300"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-lg overflow-hidden flex items-center justify-center flex-shrink-0",children:a.jsx("img",{src:r[0],alt:t.name,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t.name}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.categories?.name||"Sem categoria"}),r.length>1&&a.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1 mt-1",children:[a.jsx("i",{className:"ri-image-line"}),r.length," fotos"]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.sku||"-"})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("span",{className:"font-medium text-yellow-500",children:["€",t.price?.toFixed(2)]}),t.promotional_price&&a.jsxs("p",{className:"text-xs text-green-500",children:["Promo: €",t.promotional_price.toFixed(2)]})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("span",{className:"font-medium "+(t.stock<=t.min_stock?"text-red-500":"text-green-500"),children:t.stock||0}),t.stock<=t.min_stock&&a.jsx("p",{className:"text-xs text-red-500",children:"Estoque baixo!"})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("active"===t.status?"bg-green-500/20 text-green-500":"inactive"===t.status?"bg-gray-500/20 text-gray-500":"bg-yellow-500/20 text-yellow-500"),children:"active"===t.status?"Ativo":"inactive"===t.status?"Inativo":"Rascunho"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>(e=>{j(e),y(!0)})(t),className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Editar",children:a.jsx("i",{className:"ri-edit-line"})}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(t.id),alert("ID copiado!")},className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",title:"Copiar ID",children:a.jsx("i",{className:"ri-file-copy-line"})}),a.jsx("button",{onClick:()=>(async e=>{if(!confirm("Tem certeza que deseja excluir este produto?"))return;const{error:t}=await s.from("products").delete().eq("id",e);t||(alert("Produto excluído com sucesso!"),C())})(t.id),className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",title:"Excluir",children:a.jsx("i",{className:"ri-delete-bin-line"})})]})})]},t.id)})})]})}),$>1&&a.jsx("div",{className:"px-6 py-4 border-t "+(e?"border-gray-800 bg-gray-900":"border-gray-200 bg-gray-50"),children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Mostrando ",P+1,"-",Math.min(V,S.length)," de ",S.length," produtos"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>A(w-1),disabled:1===w,className:"px-3 py-2 rounded-lg transition-all flex items-center gap-1 "+(1===w?e?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed":e?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-arrow-left-s-line"}),a.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];if($<=5)for(let t=1;t<=$;t++)e.push(t);else if(w<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push($)}else if(w>=$-2){e.push(1),e.push("...");for(let t=$-3;t<=$;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=w-1;t<=w+1;t++)e.push(t);e.push("..."),e.push($)}return e})().map((t,r)=>"..."===t?a.jsx("span",{className:"px-3 py-2 "+(e?"text-gray-500":"text-gray-400"),children:"..."},`ellipsis-${r}`):a.jsx("button",{onClick:()=>A(t),className:"px-3 py-2 rounded-lg transition-all min-w-[40px] font-medium "+(w===t?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-black":e?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t},t))}),a.jsxs("button",{onClick:()=>A(w+1),disabled:w===$,className:"px-3 py-2 rounded-lg transition-all flex items-center gap-1 "+(w===$?e?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed":e?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[a.jsx("span",{className:"hidden sm:inline",children:"Próximo"}),a.jsx("i",{className:"ri-arrow-right-s-line"})]})]})]})})]})})]})}function g(){const{darkMode:e}=r(),[t,l]=i.useState([]),[o,n]=i.useState(!0),[d,c]=i.useState(!1),[x,m]=i.useState(null),[g,u]=i.useState([]),[p,h]=i.useState(1),[b,y]=i.useState(""),[f,j]=i.useState("all"),[N,v]=i.useState("all"),[w,k]=i.useState({name:"",slug:"",description:"",image:"",images:[],icon:"ri-folder-line",parent_id:null,display_order:0,is_active:!0,is_featured:!1,meta_title:"",meta_description:"",meta_keywords:""}),[_,C]=i.useState("");i.useEffect(()=>{S()},[]);const S=async()=>{try{n(!0);const{data:e,error:t}=await s.from("categories").select("*").order("display_order",{ascending:!0});if(t)throw t;const r=await Promise.all((e||[]).map(async e=>{const{count:t}=await s.from("products").select("*",{count:"exact",head:!0}).eq("category_id",e.id);return{...e,product_count:t||0}}));l(r)}catch(e){}finally{n(!1)}},$=t.filter(e=>{const t=e.name.toLowerCase().includes(b.toLowerCase())||e.description?.toLowerCase().includes(b.toLowerCase()),r="all"===f||"active"===f&&e.is_active||"inactive"===f&&!e.is_active,a="all"===N||"featured"===N&&e.is_featured||"normal"===N&&!e.is_featured;return t&&r&&a}),P=Math.ceil($.length/12),V=12*(p-1),E=V+12,A=$.slice(V,E);i.useEffect(()=>{h(1)},[b,f,N]);const T={total:t.length,active:t.filter(e=>e.is_active).length,featured:t.filter(e=>e.is_featured).length,withProducts:t.filter(e=>(e.product_count||0)>0).length},I=()=>{k({name:"",slug:"",description:"",image:"",images:[],icon:"ri-folder-line",parent_id:null,display_order:0,is_active:!0,is_featured:!1,meta_title:"",meta_description:"",meta_keywords:""}),C("")},D=()=>{_.trim()&&(w.images.length>=10?alert("Máximo de 10 imagens permitido!"):(k({...w,images:[...w.images,_.trim()],image:0===w.images.length?_.trim():w.image}),C("")))},O=(e,t)=>{const r=[...w.images],a="left"===t?e-1:e+1;a<0||a>=r.length||([r[e],r[a]]=[r[a],r[e]],k({...w,images:r,image:r[0]}))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-900"),children:"📁 Gestão de Categorias"}),a.jsx("p",{className:"mt-1 "+(e?"text-gray-400":"text-gray-600"),children:"Organize produtos e serviços em categorias"})]}),a.jsxs("div",{className:"flex gap-3",children:[g.length>0&&a.jsxs("button",{onClick:async()=>{if(0!==g.length&&confirm(`Tem certeza que deseja excluir ${g.length} categoria(s)?`))try{const{error:e}=await s.from("categories").delete().in("id",g);if(e)throw e;u([]),S()}catch(e){alert("Erro ao excluir categorias!")}},className:"px-6 py-2 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition-colors flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-delete-bin-line text-xl"}),"Excluir (",g.length,")"]}),a.jsxs("button",{onClick:()=>{I(),m(null),c(!0)},className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Categoria"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Total"}),a.jsx("p",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-900"),children:T.total})]}),a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-folder-line text-2xl text-blue-600"})})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Ativas"}),a.jsx("p",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-900"),children:T.active})]}),a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-600"})})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Em Destaque"}),a.jsx("p",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-900"),children:T.featured}),a.jsx("p",{className:"text-xs mt-1 "+(e?"text-gray-400":"text-gray-500"),children:"Exibidas na página inicial"})]}),a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-star-line text-2xl text-yellow-600"})})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Com Produtos"}),a.jsx("p",{className:"text-3xl font-bold "+(e?"text-white":"text-gray-900"),children:T.withProducts})]}),a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-shopping-bag-line text-2xl text-purple-600"})})]})})]}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg`,children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"🔍 Pesquisar"}),a.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Nome ou descrição...",className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"📊 Status"}),a.jsxs("select",{value:f,onChange:e=>j(e.target.value),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"active",children:"Ativas"}),a.jsx("option",{value:"inactive",children:"Inativas"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"⭐ Destaque"}),a.jsxs("select",{value:N,onChange:e=>v(e.target.value),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,children:[a.jsx("option",{value:"all",children:"Todas"}),a.jsx("option",{value:"featured",children:"Em Destaque"}),a.jsx("option",{value:"normal",children:"Normais"})]})]})]})}),a.jsxs("div",{className:`rounded-xl ${e?"bg-gray-800":"bg-white"} shadow-lg overflow-hidden`,children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-700":"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:a.jsx("input",{type:"checkbox",checked:g.length===A.length&&A.length>0,onChange:()=>{g.length===A.length?u([]):u(A.map(e=>e.id))},className:"w-5 h-5 rounded border-gray-300 text-yellow-500 focus:ring-yellow-500 cursor-pointer"})}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Categoria"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Produtos"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Destaque"}),a.jsx("th",{className:"px-6 py-4 text-right text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:"Ações"})]})}),a.jsx("tbody",{className:"divide-y "+(e?"divide-gray-700":"divide-gray-200"),children:o?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:a.jsx("div",{className:"flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})})})}):0===A.length?a.jsx("tr",{children:a.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center",children:[a.jsx("i",{className:"ri-folder-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Nenhuma categoria encontrada"})]})}):A.map(t=>a.jsxs("tr",{className:e?"hover:bg-gray-700":"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("input",{type:"checkbox",checked:g.includes(t.id),onChange:e=>{e.target.checked?u([...g,t.id]):u(g.filter(e=>e!==t.id))},className:"w-5 h-5 rounded border-gray-300 text-yellow-500 focus:ring-yellow-500 cursor-pointer"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("img",{src:(t.images&&t.images.length>0?t.images[0]:t.image)||`https://readdy.ai/api/search-image?query=professional%20$%7Bcategory.name%7D%20category%20products%20elegant%20arrangement%20vibrant%20colors%20high%20quality%20commercial%20photography%20clean%20background%20no%20people&width=400&height=400&seq=cat-${t.id}-admin&orientation=squarish`,alt:t.name,className:"w-16 h-16 object-cover rounded-lg shadow-md",onError:e=>{e.target.src=`https://readdy.ai/api/search-image?query=professional%20$%7Bcategory.name%7D%20category%20products%20elegant%20arrangement%20vibrant%20colors%20high%20quality%20commercial%20photography%20clean%20background%20no%20people&width=400&height=400&seq=cat-fallback-${t.id}&orientation=squarish`}}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold "+(e?"text-white":"text-gray-900"),children:t.name}),a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:[t.description?.substring(0,50),"..."]}),(t.images?.length||0)>1&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs font-medium rounded-full mt-1",children:[a.jsx("i",{className:"ri-image-line"}),t.images?.length," fotos"]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium "+((t.product_count||0)>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:[a.jsx("i",{className:"ri-shopping-bag-line"}),t.product_count||0]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium "+(t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[a.jsx("i",{className:t.is_active?"ri-checkbox-circle-line":"ri-close-circle-line"}),t.is_active?"Ativa":"Inativa"]})}),a.jsx("td",{className:"px-6 py-4",children:t.is_featured&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:[a.jsx("i",{className:"ri-star-fill"}),"Destaque"]})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>(e=>{m(e),k({name:e.name,slug:e.slug,description:e.description||"",image:e.image||"",images:e.images||[],icon:e.icon||"ri-folder-line",parent_id:e.parent_id,display_order:e.display_order,is_active:e.is_active,is_featured:e.is_featured,meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||""}),c(!0)})(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar",children:a.jsx("i",{className:"ri-edit-line text-xl"})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{const{error:t}=await s.from("categories").delete().eq("id",e);if(t)throw t;S()}catch(t){alert("Erro ao excluir categoria!")}})(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir",children:a.jsx("i",{className:"ri-delete-bin-line text-xl"})})]})})]},t.id))})]})}),P>1&&a.jsx("div",{className:"px-6 py-4 border-t "+(e?"border-gray-700":"border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Mostrando ",V+1,"-",Math.min(E,$.length)," de ",$.length," categorias"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===p,className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 "+(1===p?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx("i",{className:"ri-arrow-left-s-line"}),a.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];if(P<=5)for(let t=1;t<=P;t++)e.push(t);else if(p<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push(P)}else if(p>=P-2){e.push(1),e.push("...");for(let t=P-3;t<=P;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=p-1;t<=p+1;t++)e.push(t);e.push("..."),e.push(P)}return e})().map((t,r)=>"..."===t?a.jsx("span",{className:"px-3 py-2 text-gray-400",children:"..."},`ellipsis-${r}`):a.jsx("button",{onClick:()=>h(t),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(p===t?"bg-yellow-500 text-black":e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:t},t))}),a.jsxs("button",{onClick:()=>h(e=>Math.min(P,e+1)),disabled:p===P,className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 "+(p===P?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx("span",{className:"hidden sm:inline",children:"Próximo"}),a.jsx("i",{className:"ri-arrow-right-s-line"})]})]})]})})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-xl shadow-2xl w-full max-w-4xl my-8",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h3",{className:"text-2xl font-bold "+(e?"text-white":"text-gray-900"),children:x?"✏️ Editar Categoria":"➕ Nova Categoria"}),a.jsx("button",{onClick:()=>{c(!1),m(null),I()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={...w,slug:w.slug||w.name.toLowerCase().replace(/\s+/g,"-"),image:w.images.length>0?w.images[0]:w.image,updated_at:(new Date).toISOString()};if(x){const{error:t}=await s.from("categories").update(e).eq("id",x.id);if(t)throw t}else{const{error:t}=await s.from("categories").insert([{...e,created_at:(new Date).toISOString()}]);if(t)throw t}c(!1),m(null),I(),S()}catch(t){alert("Erro ao salvar categoria!")}},className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("label",{className:"block text-lg font-bold mb-4 "+(e?"text-white":"text-gray-900"),children:"🖼️ Galeria de Imagens (até 10 fotos)"}),w.images.length>0&&a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-4",children:w.images.map((e,t)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:e,alt:`Imagem ${t+1}`,className:"w-full h-32 object-cover rounded-lg"}),0===t&&a.jsx("div",{className:"absolute top-2 left-2 bg-yellow-500 text-black text-xs font-bold px-2 py-1 rounded",children:"Principal"}),a.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[t>0&&a.jsx("button",{type:"button",onClick:()=>O(t,"left"),className:"p-2 bg-white rounded-lg hover:bg-gray-100 transition-colors",title:"Mover para esquerda",children:a.jsx("i",{className:"ri-arrow-left-line text-gray-900"})}),a.jsx("button",{type:"button",onClick:()=>(e=>{const t=w.images.filter((t,r)=>r!==e);k({...w,images:t,image:0===e&&t.length>0?t[0]:w.image})})(t),className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remover",children:a.jsx("i",{className:"ri-delete-bin-line"})}),t<w.images.length-1&&a.jsx("button",{type:"button",onClick:()=>O(t,"right"),className:"p-2 bg-white rounded-lg hover:bg-gray-100 transition-colors",title:"Mover para direita",children:a.jsx("i",{className:"ri-arrow-right-line text-gray-900"})})]})]},t))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",value:_,onChange:e=>C(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),D()),placeholder:"Cole o URL da imagem aqui...",className:`flex-1 px-4 py-3 rounded-lg border ${e?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`}),a.jsxs("button",{type:"button",onClick:D,disabled:w.images.length>=10,className:"px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2 whitespace-nowrap "+(w.images.length>=10?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-black hover:bg-yellow-600"),children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Adicionar"]})]}),a.jsxs("p",{className:"text-sm mt-2 "+(e?"text-gray-400":"text-gray-600"),children:["ℹ️ ",w.images.length,"/10 imagens • A primeira será a principal"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-700":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-information-line text-2xl text-blue-500"}),"Informações Básicas"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Nome da Categoria *"}),a.jsx("input",{type:"text",required:!0,value:w.name,onChange:e=>k({...w,name:e.target.value}),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"Ex: Tecnologia"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Slug (URL)"}),a.jsx("input",{type:"text",value:w.slug,onChange:e=>k({...w,slug:e.target.value}),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"tecnologia (gerado automaticamente)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Descrição"}),a.jsx("textarea",{value:w.description,onChange:e=>k({...w,description:e.target.value}),rows:4,className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"Descrição da categoria..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Ícone"}),a.jsx("input",{type:"text",value:w.icon,onChange:e=>k({...w,icon:e.target.value}),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"ri-folder-line"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Ordem"}),a.jsx("input",{type:"number",value:w.display_order,onChange:e=>k({...w,display_order:parseInt(e.target.value)}),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`})]})]})]})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-700":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-settings-3-line text-2xl text-green-500"}),"Configurações"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:w.is_active,onChange:e=>k({...w,is_active:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-yellow-500 focus:ring-yellow-500"}),a.jsx("span",{className:"font-medium "+(e?"text-white":"text-gray-900"),children:"✅ Categoria Ativa"})]}),a.jsx("div",{className:"p-4 rounded-lg border-2 "+(w.is_featured?"border-yellow-500 bg-yellow-500/10":e?"border-gray-600 bg-gray-600/20":"border-gray-300 bg-gray-100"),children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:w.is_featured,onChange:e=>k({...w,is_featured:e.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-yellow-500 focus:ring-yellow-500 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"font-bold "+(e?"text-white":"text-gray-900"),children:"⭐ Exibir em Destaque"}),w.is_featured&&a.jsx("span",{className:"px-2 py-0.5 bg-yellow-500 text-black text-xs font-bold rounded-full",children:"ATIVO"})]}),a.jsx("p",{className:"text-sm "+(e?"text-gray-300":"text-gray-600"),children:'Categorias em destaque aparecem na seção "Encontre o Que Procura" da página inicial e nos filtros principais'}),T.featured>0&&a.jsxs("div",{className:"mt-2 text-xs "+(e?"text-gray-400":"text-gray-500"),children:["📊 Atualmente ",T.featured," categoria(s) em destaque"]})]})]})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-700":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-search-line text-2xl text-purple-500"}),"SEO & Meta Tags"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Meta Título"}),a.jsx("input",{type:"text",value:w.meta_title,onChange:e=>k({...w,meta_title:e.target.value}),maxLength:60,className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"Título otimizado para SEO"}),a.jsxs("p",{className:"text-xs mt-1 "+(e?"text-gray-400":"text-gray-500"),children:[w.meta_title.length,"/60 caracteres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Meta Descrição"}),a.jsx("textarea",{value:w.meta_description,onChange:e=>k({...w,meta_description:e.target.value}),maxLength:160,rows:3,className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"Descrição otimizada para motores de busca"}),a.jsxs("p",{className:"text-xs mt-1 "+(e?"text-gray-400":"text-gray-500"),children:[w.meta_description.length,"/160 caracteres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Palavras-chave"}),a.jsx("input",{type:"text",value:w.meta_keywords,onChange:e=>k({...w,meta_keywords:e.target.value}),className:`w-full px-4 py-3 rounded-lg border ${e?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300 text-gray-900"} focus:ring-2 focus:ring-yellow-500 focus:border-transparent`,placeholder:"tecnologia, eletrônicos, gadgets"}),a.jsx("p",{className:"text-xs mt-1 "+(e?"text-gray-400":"text-gray-500"),children:"Separe por vírgulas"})]})]})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-700":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-eye-line text-2xl text-yellow-500"}),"Preview"]}),a.jsxs("div",{className:"p-4 rounded-lg border-2 border-dashed "+(e?"border-gray-600":"border-gray-300"),children:[w.images.length>0?a.jsx("img",{src:w.images[0],alt:"Preview",className:"w-full h-48 object-cover rounded-lg mb-4"}):a.jsx("div",{className:"w-full h-48 bg-gray-200 rounded-lg mb-4 flex items-center justify-center",children:a.jsx("i",{className:"ri-image-line text-6xl text-gray-400"})}),a.jsx("h5",{className:"text-xl font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:w.name||"Nome da Categoria"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:w.description||"Descrição da categoria..."}),a.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[w.is_active&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[a.jsx("i",{className:"ri-checkbox-circle-line"}),"Ativa"]}),w.is_featured&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:[a.jsx("i",{className:"ri-star-fill"}),"Em Destaque"]})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),m(null),I()},className:"px-6 py-3 rounded-lg font-medium transition-colors "+(e?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"❌ Cancelar"}),a.jsxs("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2",children:[a.jsx("i",{className:"ri-save-line text-xl"}),"💾 Salvar Categoria"]})]})]})]})})]})}function u({darkMode:e}){const[t,r]=i.useState([]),[l,o]=i.useState(!0),[n,d]=i.useState("all"),[c,x]=i.useState(""),[m,g]=i.useState(!1),[u,p]=i.useState(!1),[h,b]=i.useState(null),[y,f]=i.useState(null),[j,N]=i.useState(""),[v,w]=i.useState(""),[k,_]=i.useState([]),[C,S]=i.useState([]),[$,P]=i.useState({user_id:"",items:[],shipping_address:{street:"",city:"",postal_code:"",country:"Portugal"},notes:""});i.useEffect(()=>{E(),A(),T(),V()},[]);const V=async()=>{try{const{data:e}=await s.from("orders").select("id").limit(1);if(e&&e.length>0)return;const{data:t}=await s.from("profiles").select("id").limit(1);if(!t||0===t.length)return;const r=t[0].id,a=[{user_id:r,order_number:`ORD-${Date.now()}-1`,total:299.99,status:"delivered",shipping_address:{street:"Rua das Flores, 123",city:"Lisboa",postal_code:"1000-100",country:"Portugal"},tracking_url:"https://www.ctt.pt/feapl_2/app/open/objectSearch/objectSearch.jspx?objects=RR123456789PT",notes:"Pedido entregue com sucesso",created_at:new Date(Date.now()-6048e5).toISOString()},{user_id:r,order_number:`ORD-${Date.now()}-2`,total:149.5,status:"processing",shipping_address:{street:"Avenida da Liberdade, 456",city:"Porto",postal_code:"4000-200",country:"Portugal"},notes:"Em processamento",created_at:new Date(Date.now()-1728e5).toISOString()},{user_id:r,order_number:`ORD-${Date.now()}-3`,total:89.9,status:"cancelled",shipping_address:{street:"Rua do Comércio, 789",city:"Braga",postal_code:"4700-300",country:"Portugal"},notes:"Cancelado a pedido do cliente",created_at:new Date(Date.now()-432e6).toISOString()},{user_id:r,order_number:`ORD-${Date.now()}-4`,total:199.99,status:"refunded",shipping_address:{street:"Praça da República, 321",city:"Coimbra",postal_code:"3000-400",country:"Portugal"},notes:"Reembolso processado",created_at:new Date(Date.now()-864e6).toISOString()},{user_id:r,order_number:`ORD-${Date.now()}-5`,total:449.99,status:"shipped",shipping_address:{street:"Rua Augusta, 555",city:"Faro",postal_code:"8000-500",country:"Portugal"},tracking_url:"https://www.ctt.pt/feapl_2/app/open/objectSearch/objectSearch.jspx?objects=RR987654321PT",notes:"Enviado via CTT Expresso",created_at:new Date(Date.now()-864e5).toISOString()}];await s.from("orders").insert(a)}catch(e){}},E=async()=>{try{o(!0);const{data:e,error:t}=await s.from("orders").select("*").order("created_at",{ascending:!1});if(t)throw t;const a=await Promise.all((e||[]).map(async e=>{const{data:t}=await s.from("profiles").select("id, email, full_name, phone").eq("id",e.user_id).single(),{data:r}=await s.from("order_items").select("id, quantity, price, product_id").eq("order_id",e.id),a=await Promise.all((r||[]).map(async e=>{const{data:t}=await s.from("products").select("id, title, images").eq("id",e.product_id).single();return{...e,products:t}}));return{...e,profiles:t,order_items:a}}));r(a)}catch(e){I("❌ Erro ao carregar pedidos. Verifique a consola.")}finally{o(!1)}},A=async()=>{try{const{data:e}=await s.from("profiles").select("id, email, full_name, phone").order("full_name");_(e||[])}catch(e){}},T=async()=>{try{const{data:e}=await s.from("products").select("id, title, price, images, stock").eq("active",!0).order("title");S(e||[])}catch(e){}},I=e=>{w(e),setTimeout(()=>w(""),3e3)},D=t.filter(e=>{const t=e.order_number?.toLowerCase().includes(c.toLowerCase())||e.profiles?.email?.toLowerCase().includes(c.toLowerCase())||e.profiles?.full_name?.toLowerCase().includes(c.toLowerCase()),r="all"===n||e.status===n;return t&&r}),O=[{value:"pending",label:"Pendente",color:"yellow",icon:"ri-time-line"},{value:"processing",label:"Em Processo",color:"blue",icon:"ri-loader-4-line"},{value:"shipped",label:"Enviado",color:"purple",icon:"ri-truck-line"},{value:"delivered",label:"Concluído",color:"green",icon:"ri-checkbox-circle-line"},{value:"cancelled",label:"Cancelado",color:"red",icon:"ri-close-circle-line"},{value:"refunded",label:"Reembolsado",color:"orange",icon:"ri-refund-2-line"}],R={total:t.length,pending:t.filter(e=>"pending"===e.status).length,processing:t.filter(e=>"processing"===e.status).length,shipped:t.filter(e=>"shipped"===e.status).length,delivered:t.filter(e=>"delivered"===e.status).length,cancelled:t.filter(e=>"cancelled"===e.status).length,refunded:t.filter(e=>"refunded"===e.status).length,totalRevenue:t.filter(e=>"delivered"===e.status).reduce((e,t)=>e+t.total,0)},M=e=>O.find(t=>t.value===e)||O[0];return a.jsxs("div",{className:"space-y-6",children:[v&&a.jsx("div",{className:"fixed top-20 right-6 z-50 animate-fade-in",children:a.jsxs("div",{className:"px-6 py-4 bg-green-500 text-white rounded-xl shadow-2xl flex items-center gap-3",children:[a.jsx("i",{className:"ri-checkbox-circle-line text-2xl"}),a.jsx("span",{className:"font-medium",children:v})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-bag-3-line text-yellow-500"}),"Gestão de Pedidos"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie todos os pedidos com dados detalhados"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Criar Pedido Manual"]}),a.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-download-line text-xl"}),"Exportar"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-blue-500/20 to-blue-500/5 border border-blue-500/30":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-shopping-bag-line text-blue-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-blue-500",children:R.total}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Total"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-yellow-500/20 to-yellow-500/5 border border-yellow-500/30":"bg-gradient-to-br from-yellow-50 to-yellow-100 border border-yellow-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-time-line text-yellow-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-yellow-500",children:R.pending}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Pendente"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-blue-400/20 to-blue-400/5 border border-blue-400/30":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-300"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-loader-4-line text-blue-400 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-blue-400",children:R.processing}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Em Processo"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-purple-500/20 to-purple-500/5 border border-purple-500/30":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-truck-line text-purple-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-purple-500",children:R.shipped}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Enviado"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-green-500/20 to-green-500/5 border border-green-500/30":"bg-gradient-to-br from-green-50 to-green-100 border border-green-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-checkbox-circle-line text-green-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-green-500",children:R.delivered}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Concluído"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-red-500/20 to-red-500/5 border border-red-500/30":"bg-gradient-to-br from-red-50 to-red-100 border border-red-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-close-circle-line text-red-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-red-500",children:R.cancelled}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Cancelado"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-orange-500/20 to-orange-500/5 border border-orange-500/30":"bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-refund-2-line text-orange-500 text-2xl"})}),a.jsx("p",{className:"text-3xl font-bold text-orange-500",children:R.refunded}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Reembolsado"})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gradient-to-br from-emerald-500/20 to-emerald-500/5 border border-emerald-500/30":"bg-gradient-to-br from-emerald-50 to-emerald-100 border border-emerald-200"} hover:shadow-xl transition-all`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("i",{className:"ri-money-euro-circle-line text-emerald-500 text-2xl"})}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:["€",R.totalRevenue.toFixed(2)]}),a.jsx("p",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:"Receita"})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por número, cliente...",value:c,onChange:e=>x(e.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("select",{value:n,onChange:e=>d(e.target.value),className:`px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"all",children:"Todos Status"}),O.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})]}),a.jsx("div",{className:`rounded-xl overflow-hidden ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):0===D.length?a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:[a.jsx("i",{className:"ri-inbox-line text-6xl text-gray-400 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nenhum Pedido Encontrado"}),a.jsx("p",{className:""+(e?"text-gray-400":"text-gray-600"),children:"Crie um pedido manual ou aguarde novos pedidos."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Pedido"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Rastreamento"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),a.jsx("tbody",{children:D.map(t=>{const r=M(t.status);return a.jsxs("tr",{className:`border-t ${e?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-mono text-sm font-bold",children:t.order_number})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:t.profiles?.full_name||"N/A"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.profiles?.email||"Sem email"}),t.profiles?.phone&&a.jsx("p",{className:"text-xs text-gray-500",children:t.profiles.phone})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:new Date(t.created_at).toLocaleDateString("pt-PT")})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"font-bold text-yellow-500 text-lg",children:["€",t.total?.toFixed(2)||"0.00"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("select",{value:t.status,onChange:e=>(async(e,t)=>{try{const{error:r}=await s.from("orders").update({status:t}).eq("id",e);if(r)throw r;await E(),I("Status atualizado com sucesso!")}catch(r){alert("Erro ao atualizar status")}})(t.id,e.target.value),className:`px-3 py-1 rounded-full text-xs font-medium ${"green"===r.color?"bg-green-500/20 text-green-500":"yellow"===r.color?"bg-yellow-500/20 text-yellow-500":"red"===r.color?"bg-red-500/20 text-red-500":"orange"===r.color?"bg-orange-500/20 text-orange-500":"purple"===r.color?"bg-purple-500/20 text-purple-500":"bg-blue-500/20 text-blue-500"} border-none cursor-pointer`,children:O.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})}),a.jsx("td",{className:"px-6 py-4",children:y===t.id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"https://...",className:`px-2 py-1 text-sm rounded ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-300"} border`}),a.jsx("button",{onClick:()=>(async e=>{try{const{error:t}=await s.from("orders").update({tracking_url:j}).eq("id",e);if(t)throw t;await E(),f(null),N(""),I("Link de rastreamento salvo!")}catch(t){alert("Erro ao salvar link de rastreamento")}})(t.id),className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",children:a.jsx("i",{className:"ri-check-line"})}),a.jsx("button",{onClick:()=>{f(null),N("")},className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",children:a.jsx("i",{className:"ri-close-line"})})]}):t.tracking_url?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("a",{href:t.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 text-sm flex items-center gap-1",children:[a.jsx("i",{className:"ri-external-link-line"}),"Rastrear"]}),a.jsx("button",{onClick:()=>{f(t.id),N(t.tracking_url||"")},className:"p-1 text-gray-400 hover:text-gray-600",children:a.jsx("i",{className:"ri-edit-line"})})]}):a.jsxs("button",{onClick:()=>{f(t.id),N("")},className:"text-sm text-gray-400 hover:text-gray-600 flex items-center gap-1",children:[a.jsx("i",{className:"ri-add-line"}),"Adicionar"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>{b(t),g(!0)},className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",title:"Ver Detalhes",children:a.jsx("i",{className:"ri-eye-line"})})})]},t.id)})})]})})}),m&&h&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:`sticky top-0 ${e?"bg-gray-900":"bg-white"} border-b ${e?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[a.jsx("h3",{className:"text-2xl font-bold",children:"Detalhes do Pedido"}),a.jsx("button",{onClick:()=>g(!1),className:"w-10 h-10 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors flex items-center justify-center",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Número do Pedido"}),a.jsx("p",{className:"text-xl font-bold",children:h.order_number})]}),a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Data"}),a.jsx("p",{className:"text-xl font-bold",children:new Date(h.created_at).toLocaleDateString("pt-PT")})]}),a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Status"}),a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium "+("green"===M(h.status).color?"bg-green-500/20 text-green-500":"yellow"===M(h.status).color?"bg-yellow-500/20 text-yellow-500":"red"===M(h.status).color?"bg-red-500/20 text-red-500":"orange"===M(h.status).color?"bg-orange-500/20 text-orange-500":"purple"===M(h.status).color?"bg-purple-500/20 text-purple-500":"bg-blue-500/20 text-blue-500"),children:[a.jsx("i",{className:M(h.status).icon}),M(h.status).label]})]}),a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:["€",h.total.toFixed(2)]})]})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-line text-blue-500"}),"Informações do Cliente"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Nome"}),a.jsx("p",{className:"font-semibold",children:h.profiles?.full_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Email"}),a.jsx("p",{className:"font-semibold",children:h.profiles?.email||"N/A"})]}),h.profiles?.phone&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Telefone"}),a.jsx("p",{className:"font-semibold",children:h.profiles.phone})]})]})]}),h.shipping_address&&a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-map-pin-line text-green-500"}),"Endereço de Envio"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"font-semibold",children:h.shipping_address.street}),a.jsxs("p",{children:[h.shipping_address.city,", ",h.shipping_address.postal_code]}),a.jsx("p",{children:h.shipping_address.country})]})]}),h.tracking_url&&a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-purple-500/10 border border-purple-500/30":"bg-purple-50 border border-purple-200"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-truck-line text-purple-500"}),"Rastreamento"]}),a.jsxs("a",{href:h.tracking_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium",children:[a.jsx("i",{className:"ri-external-link-line"}),"Rastrear Encomenda"]})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-cart-line text-yellow-500"}),"Produtos (",h.order_items?.length||0,")"]}),a.jsx("div",{className:"space-y-4",children:h.order_items?.map(t=>a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg "+(e?"bg-gray-900":"bg-white"),children:[a.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0",children:t.products?.images?.[0]&&a.jsx("img",{src:t.products.images[0],alt:t.products.title,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:t.products?.title||"Produto"}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Quantidade: ",t.quantity]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Preço Unit."}),a.jsxs("p",{className:"font-bold text-yellow-500",children:["€",t.price.toFixed(2)]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Subtotal"}),a.jsxs("p",{className:"font-bold text-lg",children:["€",(t.price*t.quantity).toFixed(2)]})]})]},t.id))})]}),h.notes&&a.jsxs("div",{className:"p-6 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-file-text-line text-orange-500"}),"Notas"]}),a.jsx("p",{className:"text-gray-400",children:h.notes})]})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:`sticky top-0 ${e?"bg-gray-900":"bg-white"} border-b ${e?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[a.jsx("h3",{className:"text-2xl font-bold",children:"Criar Pedido Manual"}),a.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors flex items-center justify-center",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cliente *"}),a.jsxs("select",{value:$.user_id,onChange:e=>P({...$,user_id:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border`,children:[a.jsx("option",{value:"",children:"Selecione um cliente"}),k.map(e=>a.jsxs("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Produtos *"}),a.jsxs("select",{onChange:e=>{e.target.value&&((e=>{const t=C.find(t=>t.id===e);if(!t)return;const r=$.items.find(t=>t.product_id===e);P(r?{...$,items:$.items.map(t=>t.product_id===e?{...t,quantity:t.quantity+1}:t)}:{...$,items:[...$.items,{product_id:e,quantity:1,price:t.price}]})})(e.target.value),e.target.value="")},className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border mb-4`,children:[a.jsx("option",{value:"",children:"Adicionar produto..."}),C.map(e=>a.jsxs("option",{value:e.id,children:[e.title," - €",e.price.toFixed(2)," (Stock: ",e.stock,")"]},e.id))]}),$.items.length>0&&a.jsxs("div",{className:"space-y-2",children:[$.items.map(t=>{const r=C.find(e=>e.id===t.product_id);return a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold",children:r?.title}),a.jsxs("p",{className:"text-sm text-gray-400",children:["€",t.price.toFixed(2)," x ",t.quantity]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{P({...$,items:$.items.map(e=>e.product_id===t.product_id?{...e,quantity:Math.max(1,e.quantity-1)}:e)})},className:"w-8 h-8 rounded bg-gray-700 hover:bg-gray-600",children:a.jsx("i",{className:"ri-subtract-line"})}),a.jsx("span",{className:"w-12 text-center font-bold",children:t.quantity}),a.jsx("button",{onClick:()=>{P({...$,items:$.items.map(e=>e.product_id===t.product_id?{...e,quantity:e.quantity+1}:e)})},className:"w-8 h-8 rounded bg-gray-700 hover:bg-gray-600",children:a.jsx("i",{className:"ri-add-line"})})]}),a.jsxs("p",{className:"font-bold text-yellow-500 w-24 text-right",children:["€",(t.price*t.quantity).toFixed(2)]}),a.jsx("button",{onClick:()=>{return e=t.product_id,void P({...$,items:$.items.filter(t=>t.product_id!==e)});var e},className:"w-8 h-8 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20",children:a.jsx("i",{className:"ri-delete-bin-line"})})]},t.product_id)}),a.jsx("div",{className:"p-4 rounded-lg "+(e?"bg-yellow-500/10 border border-yellow-500/30":"bg-yellow-50 border border-yellow-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-bold",children:"Total:"}),a.jsxs("span",{className:"text-2xl font-bold text-yellow-500",children:["€",$.items.reduce((e,t)=>e+t.price*t.quantity,0).toFixed(2)]})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rua *"}),a.jsx("input",{type:"text",value:$.shipping_address.street,onChange:e=>P({...$,shipping_address:{...$.shipping_address,street:e.target.value}}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cidade *"}),a.jsx("input",{type:"text",value:$.shipping_address.city,onChange:e=>P({...$,shipping_address:{...$.shipping_address,city:e.target.value}}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Código Postal *"}),a.jsx("input",{type:"text",value:$.shipping_address.postal_code,onChange:e=>P({...$,shipping_address:{...$.shipping_address,postal_code:e.target.value}}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border`})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notas"}),a.jsx("textarea",{rows:3,value:$.notes,onChange:e=>P({...$,notes:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-300"} border resize-none`,placeholder:"Observações sobre o pedido..."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium",children:"Cancelar"}),a.jsx("button",{onClick:async()=>{try{if(!$.user_id||0===$.items.length)return void alert("Selecione um cliente e adicione produtos");const e=$.items.reduce((e,t)=>e+t.price*t.quantity,0),{data:t,error:r}=await s.from("orders").insert({user_id:$.user_id,order_number:`ORD-${Date.now()}`,total:e,status:"pending",shipping_address:$.shipping_address,notes:$.notes}).select().single();if(r)throw r;const a=$.items.map(e=>({order_id:t.id,product_id:e.product_id,quantity:e.quantity,price:e.price})),{error:l}=await s.from("order_items").insert(a);if(l)throw l;await E(),p(!1),P({user_id:"",items:[],shipping_address:{street:"",city:"",postal_code:"",country:"Portugal"},notes:""}),I("Pedido criado com sucesso!")}catch(e){alert("Erro ao criar pedido")}},className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-medium hover:opacity-90",children:"Criar Pedido"})]})]})]})})]})}function p({darkMode:e}){const[t,r]=i.useState([]),[l,o]=i.useState(!0),[n,d]=i.useState(""),[c,x]=i.useState(null),[m,g]=i.useState("all"),[u,p]=i.useState(!1),[h,b]=i.useState(!1),[y,f]=i.useState([]),[j,N]=i.useState([]),[v,w]=i.useState([]),[k,_]=i.useState(!1),[C,S]=i.useState(1),[$,P]=i.useState({email:"",full_name:"",phone:"",address:"",city:"",postal_code:"",country:"Portugal",password:""});i.useEffect(()=>{V()},[]);const V=async()=>{try{o(!0);const{data:e,error:t}=await s.from("profiles").select("*").order("created_at",{ascending:!1});if(t)throw t;const a=await Promise.all((e||[]).map(async e=>{const{data:t}=await s.from("orders").select("total, status").eq("user_id",e.id),r=t?.length||0,a=t?.reduce((e,t)=>e+(t.total||0),0)||0;return{...e,order_count:r,total_spent:a}}));r(a)}catch(e){}finally{o(!1)}},E=async e=>{x(e),b(!0),await(async e=>{try{_(!0);const{data:t}=await s.from("orders").select("id, order_number, total, status, created_at").eq("user_id",e).order("created_at",{ascending:!1});f(t||[]);const{data:r}=await s.from("wishlist").select("\n          id,\n          product_id,\n          products (\n            title,\n            price,\n            images\n          )\n        ").eq("user_id",e);N(r||[]);const{data:a}=await s.from("cart").select("\n          id,\n          product_id,\n          quantity,\n          products (\n            title,\n            price,\n            images\n          )\n        ").eq("user_id",e);w(a||[])}catch(t){}finally{_(!1)}})(e.id)},A=t.filter(e=>{if(!(e.email?.toLowerCase().includes(n.toLowerCase())||e.full_name?.toLowerCase().includes(n.toLowerCase())))return!1;const t=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5);switch(m){case"new":return t<=30;case"vip":return(e.total_spent||0)>=500;case"inactive":return t>90&&0===(e.order_count||0);default:return!0}}),T=Math.ceil(A.length/12),I=12*(C-1),D=I+12,O=A.slice(I,D),R=e=>{S(e),window.scrollTo({top:0,behavior:"smooth"})},M={total:t.length,new:t.filter(e=>Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5)<=30).length,vip:t.filter(e=>(e.total_spent||0)>=500).length,inactive:t.filter(e=>Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5)>90&&0===(e.order_count||0)).length},q=e=>"admin"===e?a.jsx("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs font-medium rounded",children:"Admin"}):a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs font-medium rounded",children:"Cliente"}),F=e=>{const t=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5);return t<=30?a.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs font-medium rounded",children:"Novo"}):(e.total_spent||0)>=500?a.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded",children:"VIP"}):t>90&&0===(e.order_count||0)?a.jsx("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-400 text-xs font-medium rounded",children:"Inativo"}):null},L=e=>{const t={pending:{color:"yellow",icon:"ri-time-line",label:"Pendente"},processing:{color:"blue",icon:"ri-loader-4-line",label:"Em Processo"},shipped:{color:"purple",icon:"ri-truck-line",label:"Enviado"},completed:{color:"green",icon:"ri-checkbox-circle-line",label:"Concluído"},cancelled:{color:"red",icon:"ri-close-circle-line",label:"Cancelado"},refunded:{color:"orange",icon:"ri-refund-2-line",label:"Reembolsado"}},r=t[e]||t.pending;return a.jsxs("span",{className:`px-2 py-1 bg-${r.color}-500/20 text-${r.color}-400 text-xs font-medium rounded flex items-center gap-1 w-fit`,children:[a.jsx("i",{className:r.icon}),r.label]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-line text-yellow-500"}),"Gestão de Clientes"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie clientes com dados detalhados"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-2 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-user-add-line text-xl"}),"Criar Cliente"]}),a.jsxs("button",{className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-download-line text-xl"}),"Exportar"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-shadow`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-500/10 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-user-line text-3xl text-blue-500"})}),a.jsx("span",{className:"text-3xl font-bold",children:M.total})]}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} font-medium`,children:"Total de Clientes"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Todos os registrados"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-shadow`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"w-14 h-14 bg-green-500/10 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-user-add-line text-3xl text-green-500"})}),a.jsx("span",{className:"text-3xl font-bold",children:M.new})]}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} font-medium`,children:"Novos (30 dias)"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Registrados recentemente"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-shadow`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"w-14 h-14 bg-yellow-500/10 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-vip-crown-line text-3xl text-yellow-500"})}),a.jsx("span",{className:"text-3xl font-bold",children:M.vip})]}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} font-medium`,children:"Clientes VIP"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Gastaram €500+"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-shadow`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"w-14 h-14 bg-red-500/10 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-user-unfollow-line text-3xl text-red-500"})}),a.jsx("span",{className:"text-3xl font-bold",children:M.inactive})]}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} font-medium`,children:"Inativos"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sem pedidos há 90+ dias"})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{g("all"),S(1)},className:"px-4 py-2 rounded-lg font-medium transition-all "+("all"===m?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white":e?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"),children:["Todos (",M.total,")"]}),a.jsxs("button",{onClick:()=>{g("new"),S(1)},className:"px-4 py-2 rounded-lg font-medium transition-all "+("new"===m?"bg-green-500 text-white":e?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"),children:["Novos (",M.new,")"]}),a.jsxs("button",{onClick:()=>{g("vip"),S(1)},className:"px-4 py-2 rounded-lg font-medium transition-all "+("vip"===m?"bg-yellow-500 text-black":e?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"),children:["VIP (",M.vip,")"]}),a.jsxs("button",{onClick:()=>{g("inactive"),S(1)},className:"px-4 py-2 rounded-lg font-medium transition-all "+("inactive"===m?"bg-red-500 text-white":e?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-700"),children:["Inativos (",M.inactive,")"]})]}),a.jsxs("div",{className:"relative flex-1 max-w-md",children:[a.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:n,onChange:e=>{d(e.target.value),S(1)},className:`w-full pl-10 pr-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`})]})]}),a.jsx("div",{className:`rounded-xl overflow-hidden ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Tipo"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Contacto"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Localização"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Pedidos"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Total Gasto"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cadastro"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),a.jsx("tbody",{children:O.map(t=>a.jsxs("tr",{className:`border-t ${e?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-full flex items-center justify-center text-white font-bold text-lg",children:t.full_name?.charAt(0)||t.email?.charAt(0)||"?"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium",children:t.full_name||"Sem nome"}),q(t.role)]}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.email})]})]})}),a.jsx("td",{className:"px-6 py-4",children:F(t)}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[t.phone&&a.jsxs("span",{className:"text-sm flex items-center gap-1 "+(e?"text-gray-400":"text-gray-600"),children:[a.jsx("i",{className:"ri-phone-line text-green-500"}),t.phone]}),!t.phone&&a.jsx("span",{className:"text-xs text-gray-500",children:"Sem telefone"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[t.city&&a.jsxs("span",{className:"text-sm flex items-center gap-1 "+(e?"text-gray-400":"text-gray-600"),children:[a.jsx("i",{className:"ri-map-pin-line text-blue-500"}),t.city]}),t.country&&a.jsx("span",{className:"text-xs text-gray-500",children:t.country}),!t.city&&!t.country&&a.jsx("span",{className:"text-xs text-gray-500",children:"Sem localização"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-bold text-lg text-blue-500",children:t.order_count||0})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"font-bold text-lg text-yellow-500",children:["€",(t.total_spent||0).toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:new Date(t.created_at).toLocaleDateString("pt-PT")})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("button",{onClick:()=>E(t),className:"px-4 py-2 rounded-lg bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-eye-line"}),"Ver Detalhes"]})})]},t.id))})]})})}),(()=>{if(T<=1)return null;const t=[];if(T<=5)for(let e=1;e<=T;e++)t.push(e);else C<=3?t.push(1,2,3,4,"...",T):C>=T-2?t.push(1,"...",T-3,T-2,T-1,T):t.push(1,"...",C-1,C,C+1,"...",T);return a.jsxs("div",{className:"flex flex-col items-center gap-4 mt-6",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Mostrando ",I+1,"-",Math.min(D,A.length)," de ",A.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>R(C-1),disabled:1===C,className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+(1===C?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white hover:opacity-90"),children:[a.jsx("i",{className:"ri-arrow-left-s-line"}),"Anterior"]}),t.map((t,r)=>"..."===t?a.jsx("span",{className:"px-3 py-2 text-gray-400",children:"..."},`ellipsis-${r}`):a.jsx("button",{onClick:()=>R(t),className:"w-10 h-10 rounded-lg font-medium transition-all "+(C===t?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white scale-110 shadow-lg":e?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t},t)),a.jsxs("button",{onClick:()=>R(C+1),disabled:C===T,className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+(C===T?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white hover:opacity-90"),children:["Próximo",a.jsx("i",{className:"ri-arrow-right-s-line"})]})]})]})})(),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-user-add-line text-3xl text-white"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Criar Novo Cliente"}),a.jsx("p",{className:"text-white/80 text-sm",children:"Preencha os dados do cliente"})]})]}),a.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center text-white transition-colors",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-line text-blue-500"}),"Informações Básicas"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nome Completo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:$.full_name,onChange:e=>P({...$,full_name:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"João Silva"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:$.email,onChange:e=>P({...$,email:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"joao@email.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Senha ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"password",value:$.password,onChange:e=>P({...$,password:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Mínimo 6 caracteres"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Telefone"}),a.jsx("input",{type:"tel",value:$.phone,onChange:e=>P({...$,phone:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"+351 912345678"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-map-pin-line text-green-500"}),"Endereço"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Morada"}),a.jsx("input",{type:"text",value:$.address,onChange:e=>P({...$,address:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Rua das Flores, 123"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Cidade"}),a.jsx("input",{type:"text",value:$.city,onChange:e=>P({...$,city:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Lisboa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Código Postal"}),a.jsx("input",{type:"text",value:$.postal_code,onChange:e=>P({...$,postal_code:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"1000-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"País"}),a.jsx("input",{type:"text",value:$.country,onChange:e=>P({...$,country:e.target.value}),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Portugal"})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-700",children:[a.jsx("button",{onClick:()=>p(!1),className:`px-6 py-2 rounded-lg font-medium ${e?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} transition-colors`,children:"Cancelar"}),a.jsxs("button",{onClick:async()=>{try{if(!$.email||!$.full_name||!$.password)return void alert("❌ Preencha os campos obrigatórios: Email, Nome e Senha");const{data:e,error:t}=await s.auth.signUp({email:$.email,password:$.password,options:{data:{full_name:$.full_name}}});if(t)throw t;if(e.user){const{error:t}=await s.from("profiles").update({full_name:$.full_name,phone:$.phone,address:$.address,city:$.city,postal_code:$.postal_code,country:$.country}).eq("id",e.user.id);if(t)throw t;alert("✅ Cliente criado com sucesso!"),p(!1),P({email:"",full_name:"",phone:"",address:"",city:"",postal_code:"",country:"Portugal",password:""}),V()}}catch(e){alert(`❌ Erro ao criar cliente: ${e.message}`)}},className:"px-6 py-2 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-save-line"}),"Criar Cliente"]})]})]})]})}),h&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] p-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-2xl",children:c.full_name?.charAt(0)||c.email?.charAt(0)||"?"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-white",children:c.full_name||"Sem nome"}),a.jsx("p",{className:"text-white/80",children:c.email})]})]}),a.jsx("button",{onClick:()=>b(!1),className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center text-white transition-colors",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:`p-4 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-shopping-bag-line text-2xl text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:c.order_count||0}),a.jsx("p",{className:"text-xs text-gray-500",children:"Pedidos"})]})]})}),a.jsx("div",{className:`p-4 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-money-euro-circle-line text-2xl text-yellow-500"}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold",children:["€",(c.total_spent||0).toFixed(2)]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Total Gasto"})]})]})}),a.jsx("div",{className:`p-4 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-heart-line text-2xl text-red-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:j.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Favoritos"})]})]})}),a.jsx("div",{className:`p-4 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-shopping-cart-line text-2xl text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold",children:v.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"No Carrinho"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-line text-blue-500"}),"Dados Pessoais"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-mail-line text-gray-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium",children:c.email})]})]}),c.phone&&a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-phone-line text-gray-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Telefone"}),a.jsx("p",{className:"font-medium",children:c.phone})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-calendar-line text-gray-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Cadastro"}),a.jsx("p",{className:"font-medium",children:new Date(c.created_at).toLocaleDateString("pt-PT")})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-shield-user-line text-gray-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),a.jsx("div",{className:"mt-1",children:q(c.role)})]})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-map-pin-line text-green-500"}),"Endereço"]}),c.address||c.city?a.jsxs("div",{className:"space-y-2",children:[c.address&&a.jsx("p",{className:"font-medium",children:c.address}),c.city&&a.jsx("p",{className:"text-gray-400",children:c.city}),c.postal_code&&a.jsx("p",{className:"text-gray-400",children:c.postal_code}),c.country&&a.jsx("p",{className:"text-gray-400",children:c.country})]}):a.jsx("p",{className:"text-gray-500 italic",children:"Sem endereço cadastrado"})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-bag-line text-purple-500"}),"Pedidos (",y.length,")"]}),k?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):y.length>0?a.jsx("div",{className:"space-y-3",children:y.slice(0,5).map(t=>a.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-700":"border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-mono font-bold",children:t.order_number}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-PT")})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-yellow-500",children:["€",t.total.toFixed(2)]}),L(t.status)]})]})},t.id))}):a.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"Nenhum pedido realizado"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-heart-line text-red-500"}),"Favoritos (",j.length,")"]}),k?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):j.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:j.slice(0,6).map(t=>a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsx("img",{src:t.products.images?.[0]||"https://via.placeholder.com/150",alt:t.products.title,className:"w-full h-32 object-cover rounded-lg mb-3"}),a.jsx("p",{className:"font-medium text-sm line-clamp-2",children:t.products.title}),a.jsxs("p",{className:"text-yellow-500 font-bold mt-2",children:["€",t.products.price.toFixed(2)]})]},t.id))}):a.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"Nenhum produto nos favoritos"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-800":"bg-gray-50"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h4",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-cart-line text-green-500"}),"Carrinho (",v.length,")"]}),k?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"w-8 h-8 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):v.length>0?a.jsxs("div",{className:"space-y-3",children:[v.map(t=>a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-700":"border-gray-200"} flex items-center gap-4`,children:[a.jsx("img",{src:t.products.images?.[0]||"https://via.placeholder.com/80",alt:t.products.title,className:"w-20 h-20 object-cover rounded-lg"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:t.products.title}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Quantidade: ",t.quantity]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-yellow-500 font-bold",children:["€",(t.products.price*t.quantity).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["€",t.products.price.toFixed(2)," cada"]})]})]},t.id)),a.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-900":"bg-white"} border-2 ${e?"border-yellow-500/50":"border-yellow-500/30"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"font-bold text-lg",children:"Total do Carrinho:"}),a.jsxs("p",{className:"font-bold text-2xl text-yellow-500",children:["€",v.reduce((e,t)=>e+t.products.price*t.quantity,0).toFixed(2)]})]})})]}):a.jsx("p",{className:"text-gray-500 italic text-center py-8",children:"Carrinho vazio"})]})]})]})})]})}function h({darkMode:e}){const{toggleTheme:t}=r(),[l,o]=i.useState([]),[n,d]=i.useState([]),[c,x]=i.useState(!0),[m,g]=i.useState(!1),[u,p]=i.useState("theme"),[h,b]=i.useState("light"),[y,f]=i.useState({light_bg:"#ffffff",light_surface:"#f7f6fb",light_primary:"#6e4cff",light_accent:"#ff5263",light_text:"#1f1530",light_border:"#e5e7eb",light_hover:"#f3f4f6",light_success:"#10b981",light_warning:"#f59e0b",light_danger:"#ef4444",dark_bg:"#0b0011",dark_surface:"#170018",dark_primary:"#b62bff",dark_accent:"#ff6a00",dark_text:"#ffdfe8",dark_border:"#374151",dark_hover:"#1f2937",dark_success:"#10b981",dark_warning:"#f59e0b",dark_danger:"#ff2d55",font_family:"Inter"});i.useEffect(()=>{j()},[]);const j=async()=>{try{const[e,t,r]=await Promise.all([s.from("cms_pages").select("*").order("created_at",{ascending:!1}),s.from("banners").select("*").order("display_order",{ascending:!0}),s.from("site_settings").select("*")]);o(e.data||[]),d(t.data||[]);const a={};r.data?.forEach(e=>{a[e.key]=e.value}),f(e=>({...e,...a}))}catch(e){}finally{x(!1)}},N=(e,t)=>{f(r=>({...r,[e]:t}))},v=()=>{const t=document.documentElement;e?(t.style.setProperty("--bg",y.dark_bg),t.style.setProperty("--surface",y.dark_surface),t.style.setProperty("--primary",y.dark_primary),t.style.setProperty("--accent",y.dark_accent),t.style.setProperty("--text",y.dark_text),t.style.setProperty("--border",y.dark_border),t.style.setProperty("--hover",y.dark_hover),t.style.setProperty("--success",y.dark_success),t.style.setProperty("--warning",y.dark_warning),t.style.setProperty("--danger",y.dark_danger)):(t.style.setProperty("--bg",y.light_bg),t.style.setProperty("--surface",y.light_surface),t.style.setProperty("--primary",y.light_primary),t.style.setProperty("--accent",y.light_accent),t.style.setProperty("--text",y.light_text),t.style.setProperty("--border",y.light_border),t.style.setProperty("--hover",y.light_hover),t.style.setProperty("--success",y.light_success),t.style.setProperty("--warning",y.light_warning),t.style.setProperty("--danger",y.light_danger)),y.font_family&&t.style.setProperty("--font-family",y.font_family)},w=({label:t,colorKey:r,description:s})=>{const l=y[r];return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium "+(e?"text-gray-300":"text-gray-700"),children:[t,s&&a.jsx("span",{className:"block text-xs font-normal text-gray-500 mt-0.5",children:s})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"color",value:l,onChange:e=>N(r,e.target.value),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-700"}),a.jsx("input",{type:"text",value:l,onChange:e=>N(r,e.target.value),className:`flex-1 px-4 py-2.5 rounded-lg font-mono text-sm ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"#000000"}),a.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-300 dark:border-gray-700 shadow-inner",style:{backgroundColor:l}})]})]})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-palette-line text-purple-500"}),"Gestão de Conteúdo & Tema"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Controle completo sobre cores, páginas e banners do site"})]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+(e?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-gray-900 text-white hover:bg-gray-800"),children:[a.jsx("i",{className:"text-xl "+(e?"ri-sun-line":"ri-moon-line")}),e?"Light Mode":"Dark Mode"]})]}),a.jsxs("div",{className:`flex items-center gap-2 p-1 rounded-xl ${e?"bg-gray-900":"bg-gray-100"} w-fit`,children:[a.jsxs("button",{onClick:()=>p("theme"),className:"px-6 py-2.5 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap "+("theme"===u?"bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-lg":e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-palette-line text-xl"}),"Tema & Cores"]}),a.jsxs("button",{onClick:()=>p("pages"),className:"px-6 py-2.5 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap "+("pages"===u?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg":e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-file-list-3-line text-xl"}),"Páginas CMS"]}),a.jsxs("button",{onClick:()=>p("banners"),className:"px-6 py-2.5 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap "+("banners"===u?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-image-2-line text-xl"}),"Banners & Sliders"]})]}),"theme"===u&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 p-1 rounded-lg "+(e?"bg-gray-900":"bg-gray-100"),children:[a.jsxs("button",{onClick:()=>b("light"),className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+("light"===h?"bg-white text-gray-900 shadow":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-sun-line"}),"Light"]}),a.jsxs("button",{onClick:()=>b("dark"),className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+("dark"===h?"bg-gray-900 text-white shadow":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-moon-line"}),"Dark"]})]}),a.jsxs("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Editando: ",a.jsx("strong",{children:"light"===h?"Modo Claro":"Modo Escuro"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{confirm("⚠️ Tem certeza que deseja restaurar as cores padrão? Esta ação não pode ser desfeita.")&&f({light_bg:"#ffffff",light_surface:"#f7f6fb",light_primary:"#6e4cff",light_accent:"#ff5263",light_text:"#1f1530",light_border:"#e5e7eb",light_hover:"#f3f4f6",light_success:"#10b981",light_warning:"#f59e0b",light_danger:"#ef4444",dark_bg:"#0b0011",dark_surface:"#170018",dark_primary:"#b62bff",dark_accent:"#ff6a00",dark_text:"#ffdfe8",dark_border:"#374151",dark_hover:"#1f2937",dark_success:"#10b981",dark_warning:"#f59e0b",dark_danger:"#ff2d55",font_family:"Inter"})},className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 "+(e?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx("i",{className:"ri-restart-line text-xl"}),"Restaurar Padrão"]}),a.jsxs("button",{onClick:async()=>{g(!0);try{const e=Object.entries(y).map(([e,t])=>({key:e,value:t||"",category:"theme"}));for(const t of e)await s.from("site_settings").upsert(t,{onConflict:"key"});v(),alert("✅ Tema salvo com sucesso! As cores foram aplicadas ao site.")}catch(e){alert("❌ Erro ao salvar tema. Tente novamente.")}finally{g(!1)}},disabled:m,className:"px-6 py-2 rounded-lg bg-gradient-to-r from-green-500 to-emerald-500 text-white font-medium hover:opacity-90 transition-opacity flex items-center gap-2 disabled:opacity-50 whitespace-nowrap",children:[a.jsx("i",{className:"text-xl "+(m?"ri-loader-4-line animate-spin":"ri-save-line")}),m?"Salvando...":"Salvar Tema"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:["light"===h&&a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center",children:a.jsx("i",{className:"ri-sun-line text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Modo Claro (Light Mode)"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Cores exibidas quando o usuário usa tema claro"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(w,{label:"🎨 Fundo Principal",colorKey:"light_bg",description:"Background do site"}),a.jsx(w,{label:"📄 Fundo de Superfície",colorKey:"light_surface",description:"Cards, modais, painéis"}),a.jsx(w,{label:"💜 Cor Primária",colorKey:"light_primary",description:"Botões, links, destaque"}),a.jsx(w,{label:"🔥 Cor de Acento",colorKey:"light_accent",description:"Call-to-actions, badges"}),a.jsx(w,{label:"📝 Cor do Texto",colorKey:"light_text",description:"Texto principal"}),a.jsx(w,{label:"📏 Cor da Borda",colorKey:"light_border",description:"Divisores, contornos"}),a.jsx(w,{label:"✨ Cor de Hover",colorKey:"light_hover",description:"Background ao passar mouse"}),a.jsx(w,{label:"✅ Sucesso",colorKey:"light_success",description:"Confirmações, aprovado"}),a.jsx(w,{label:"⚠️ Aviso",colorKey:"light_warning",description:"Alertas, atenção"}),a.jsx(w,{label:"❌ Perigo",colorKey:"light_danger",description:"Erros, cancelamentos"})]})]}),"dark"===h&&a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center",children:a.jsx("i",{className:"ri-moon-line text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Modo Escuro (Dark Mode)"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Cores exibidas quando o usuário usa tema escuro"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(w,{label:"🎨 Fundo Principal",colorKey:"dark_bg",description:"Background do site"}),a.jsx(w,{label:"📄 Fundo de Superfície",colorKey:"dark_surface",description:"Cards, modais, painéis"}),a.jsx(w,{label:"💜 Cor Primária",colorKey:"dark_primary",description:"Botões, links, destaque"}),a.jsx(w,{label:"🔥 Cor de Acento",colorKey:"dark_accent",description:"Call-to-actions, badges"}),a.jsx(w,{label:"📝 Cor do Texto",colorKey:"dark_text",description:"Texto principal"}),a.jsx(w,{label:"📏 Cor da Borda",colorKey:"dark_border",description:"Divisores, contornos"}),a.jsx(w,{label:"✨ Cor de Hover",colorKey:"dark_hover",description:"Background ao passar mouse"}),a.jsx(w,{label:"✅ Sucesso",colorKey:"dark_success",description:"Confirmações, aprovado"}),a.jsx(w,{label:"⚠️ Aviso",colorKey:"dark_warning",description:"Alertas, atenção"}),a.jsx(w,{label:"❌ Perigo",colorKey:"dark_danger",description:"Erros, cancelamentos"})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:a.jsx("i",{className:"ri-text text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Tipografia"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Fonte principal do site"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-300":"text-gray-700"),children:"Fonte Principal"}),a.jsxs("select",{value:y.font_family,onChange:e=>N("font_family",e.target.value),className:`w-full px-4 py-2.5 rounded-lg ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-purple-500`,children:[a.jsx("option",{value:"Inter",children:"Inter (Recomendado)"}),a.jsx("option",{value:"Roboto",children:"Roboto"}),a.jsx("option",{value:"Poppins",children:"Poppins"}),a.jsx("option",{value:"Montserrat",children:"Montserrat"}),a.jsx("option",{value:"Open Sans",children:"Open Sans"}),a.jsx("option",{value:"Lato",children:"Lato"}),a.jsx("option",{value:"Raleway",children:"Raleway"}),a.jsx("option",{value:"Nunito",children:"Nunito"})]})]})]})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl sticky top-6`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:a.jsx("i",{className:"ri-eye-line text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"Preview ao Vivo"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Visualização em tempo real"})]})]}),a.jsxs("div",{className:"rounded-lg p-6 space-y-4 border-2",style:{backgroundColor:"light"===h?y.light_bg:y.dark_bg,color:"light"===h?y.light_text:y.dark_text,borderColor:"light"===h?y.light_border:y.dark_border,fontFamily:y.font_family},children:[a.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"light"===h?y.light_surface:y.dark_surface,borderColor:"light"===h?y.light_border:y.dark_border,borderWidth:"1px"},children:[a.jsx("h4",{className:"font-bold mb-2",children:"Card de Exemplo"}),a.jsx("p",{className:"text-sm opacity-70",children:"Este é um exemplo de como os cards vão aparecer"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{className:"w-full px-4 py-2 rounded-lg font-medium",style:{backgroundColor:"light"===h?y.light_primary:y.dark_primary,color:"#ffffff"},children:"Botão Primário"}),a.jsx("button",{className:"w-full px-4 py-2 rounded-lg font-medium",style:{backgroundColor:"light"===h?y.light_accent:y.dark_accent,color:"#ffffff"},children:"Botão de Acento"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${"light"===h?y.light_success:y.dark_success}20`,color:"light"===h?y.light_success:y.dark_success},children:"Sucesso"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${"light"===h?y.light_warning:y.dark_warning}20`,color:"light"===h?y.light_warning:y.dark_warning},children:"Aviso"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${"light"===h?y.light_danger:y.dark_danger}20`,color:"light"===h?y.light_danger:y.dark_danger},children:"Perigo"})]}),a.jsx("div",{className:"p-4 rounded-lg border",style:{borderColor:"light"===h?y.light_border:y.dark_border},children:a.jsx("p",{className:"text-sm",children:"Exemplo de borda"})}),a.jsx("div",{className:"p-4 rounded-lg transition-colors cursor-pointer",style:{backgroundColor:"light"===h?y.light_hover:y.dark_hover},children:a.jsx("p",{className:"text-sm",children:"Exemplo de hover"})})]}),a.jsx("div",{className:"mt-4 p-3 rounded-lg "+(e?"bg-blue-500/10 border border-blue-500/20":"bg-blue-50 border border-blue-200"),children:a.jsxs("p",{className:`text-xs ${e?"text-blue-400":"text-blue-700"} flex items-start gap-2`,children:[a.jsx("i",{className:"ri-information-line text-base mt-0.5"}),a.jsx("span",{children:"As cores serão aplicadas em tempo real no site após salvar. Os usuários verão as cores do modo que escolheram (claro/escuro)."})]})})]})})]})]}),"pages"===u&&a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Páginas CMS"}),a.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Página"]})]}),a.jsx("div",{className:"space-y-3",children:0===l.length?a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Nenhuma página criada"}):l.map(t=>a.jsxs("div",{className:"p-4 rounded-lg "+(e?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-200"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:t.title}),a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["/",t.slug]})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(t.is_published?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:t.is_published?"Publicada":"Rascunho"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:a.jsx("i",{className:"ri-edit-line"})}),a.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:a.jsx("i",{className:"ri-eye-line"})}),a.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:a.jsx("i",{className:"ri-delete-bin-line"})})]})]},t.id))})]}),"banners"===u&&a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"} shadow-xl`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Banners & Sliders"}),a.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Novo Banner"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===n.length?a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Nenhum banner criado"}):n.map(t=>a.jsxs("div",{className:"rounded-lg overflow-hidden "+(e?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-200"),children:[a.jsx("div",{className:"aspect-video bg-gray-700 flex items-center justify-center",children:t.image_url?a.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover"}):a.jsx("i",{className:"ri-image-line text-4xl text-gray-500"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:t.title}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(t.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:t.is_active?"Ativo":"Inativo"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{className:"p-1 rounded bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:a.jsx("i",{className:"ri-edit-line text-sm"})}),a.jsx("button",{className:"p-1 rounded bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:a.jsx("i",{className:"ri-delete-bin-line text-sm"})})]})]})]})]},t.id))})]})]})}const b=[{id:"1",title:"🎉 Promoção Especial",message:"Olá {nome}! 🎉\n\nTemos uma promoção ESPECIAL só para você!\n\n✨ 20% de desconto em TODOS os produtos\n🎁 Frete GRÁTIS acima de €50\n⏰ Válido até domingo!\n\nUse o cupom: ESPECIAL20\n\nAproveite: {link}",category:"promocao"},{id:"2",title:"🔥 Flash Sale",message:"Oi {nome}! 🔥\n\nFLASH SALE começou AGORA!\n\n⚡ Até 50% OFF\n⏰ Apenas 24 horas\n🚀 Corre que acaba rápido!\n\nVeja as ofertas: {link}",category:"promocao"},{id:"3",title:"💎 Cliente VIP",message:"Olá {nome}! 💎\n\nVocê é um cliente ESPECIAL!\n\n👑 Desconto VIP de 30%\n🎁 Brinde exclusivo\n📦 Frete grátis sempre\n\nSeu cupom VIP: VIP30\n\nCompre agora: {link}",category:"promocao"},{id:"4",title:"🎁 Oferta Relâmpago",message:"Ei {nome}! ⚡\n\nOFERTA RELÂMPAGO!\n\n🔥 Produtos selecionados com 40% OFF\n⏰ Só nas próximas 6 horas\n🎯 Estoque limitado!\n\nCorra: {link}",category:"promocao"},{id:"5",title:"🌟 Semana do Cliente",message:"Olá {nome}! 🌟\n\nSEMANA DO CLIENTE!\n\n🎉 Descontos progressivos\n📅 Segunda a Domingo\n🎁 Surpresas todos os dias\n\nConfira: {link}",category:"promocao"},{id:"6",title:"🛒 Carrinho Esquecido",message:"Oi {nome}! 🛒\n\nVocê deixou {cart_count} produtos no carrinho!\n\n😢 Não perca suas escolhas\n⏰ Reservamos por 24h\n🎁 Ganhe 10% OFF agora: CARRINHO10\n\nFinalize: {link}",category:"carrinho"},{id:"7",title:"⏰ Última Chance",message:"Olá {nome}! ⏰\n\nSeu carrinho expira em 2 horas!\n\n🛒 {cart_count} produtos esperando\n💰 Total: €{cart_total}\n🎁 Desconto especial: 15% OFF\n\nCupom: URGENTE15\n\nCompre agora: {link}",category:"carrinho"},{id:"8",title:"💔 Sentimos Sua Falta",message:"Ei {nome}! 💔\n\nVimos que você não finalizou sua compra...\n\n🛒 Seus produtos ainda estão lá\n🎁 Preparamos um desconto de 20%\n📦 Frete grátis incluso!\n\nCupom: VOLTE20\n\nFinalize: {link}",category:"carrinho"},{id:"9",title:"🎯 Oferta Exclusiva",message:"Oi {nome}! 🎯\n\nOFERTA EXCLUSIVA para seu carrinho!\n\n✨ 25% de desconto\n🚚 Entrega expressa grátis\n⏰ Válido por 12h\n\nCupom: EXCLUSIVO25\n\nAproveite: {link}",category:"carrinho"},{id:"10",title:"🔔 Lembrete Amigável",message:"Olá {nome}! 🔔\n\nLembrete: você tem {cart_count} itens no carrinho!\n\n🛒 Produtos incríveis esperando\n💳 Checkout rápido e seguro\n🎁 Ganhe 10% OFF: LEMBRETE10\n\nFinalize: {link}",category:"carrinho"},{id:"11",title:"❤️ Favoritos em Promoção",message:"Oi {nome}! ❤️\n\nSeus favoritos estão em PROMOÇÃO!\n\n✨ {wishlist_count} produtos com desconto\n🎁 Até 30% OFF\n⏰ Só hoje!\n\nVeja agora: {link}",category:"favoritos"},{id:"12",title:"📉 Preço Baixou",message:"Olá {nome}! 📉\n\nBOA NOTÍCIA!\n\nO preço dos seus favoritos BAIXOU!\n\n💰 Economia de até 40%\n❤️ {wishlist_count} produtos\n🏃 Corre antes que acabe!\n\nConfira: {link}",category:"favoritos"},{id:"13",title:"⚠️ Estoque Baixo",message:"Ei {nome}! ⚠️\n\nALERTA DE ESTOQUE!\n\nProdutos dos seus favoritos acabando:\n\n📦 Últimas unidades\n❤️ Não perca!\n🎁 Desconto de 15%: FAVORITO15\n\nCompre: {link}",category:"favoritos"},{id:"14",title:"🎁 Presente Especial",message:"Oi {nome}! 🎁\n\nQue tal realizar um desejo?\n\n❤️ Seus {wishlist_count} favoritos\n✨ Com 20% de desconto\n📦 Frete grátis\n\nCupom: DESEJO20\n\nRealize: {link}",category:"favoritos"},{id:"15",title:"🌟 Novidade nos Favoritos",message:"Olá {nome}! 🌟\n\nNOVIDADE!\n\nProdutos similares aos seus favoritos:\n\n✨ Você vai amar\n❤️ Baseado no seu gosto\n🎁 10% OFF: NOVO10\n\nDescubra: {link}",category:"favoritos"},{id:"16",title:"💔 Sentimos Saudades",message:"Oi {nome}! 💔\n\nFaz tempo que não te vemos...\n\n😢 Sentimos sua falta\n🎁 Preparamos 30% OFF para você\n✨ Novidades incríveis esperando\n\nCupom: VOLTEI30\n\nVolte: {link}",category:"reengajamento"},{id:"17",title:"🎉 Bem-Vindo de Volta",message:"Olá {nome}! 🎉\n\nQue bom ter você de volta!\n\n🎁 Presente especial: 25% OFF\n✨ Muitas novidades\n📦 Frete grátis na primeira compra\n\nCupom: BEMVINDO25\n\nConfira: {link}",category:"reengajamento"},{id:"18",title:"⭐ Oferta Exclusiva",message:"Ei {nome}! ⭐\n\nOFERTA EXCLUSIVA para você!\n\n👑 Cliente especial\n🎁 40% de desconto\n⏰ Válido por 48h\n\nCupom: ESPECIAL40\n\nAproveite: {link}",category:"reengajamento"},{id:"19",title:"🙏 Obrigado pela Compra",message:"Olá {nome}! 🙏\n\nMUITO OBRIGADO pela sua compra!\n\n✅ Pedido #{order_number} confirmado\n📦 Enviamos em breve\n🎁 Cupom de 15% para próxima: OBRIGADO15\n\nAcompanhe: {link}",category:"agradecimento"},{id:"20",title:"⭐ Avalie sua Compra",message:"Oi {nome}! ⭐\n\nGostou da sua compra?\n\n📦 Pedido #{order_number} entregue\n💬 Sua opinião é importante\n🎁 Ganhe 10% OFF na avaliação\n\nAvalie: {link}",category:"agradecimento"}];function y({darkMode:e}){const[t,r]=i.useState("mensagens"),[l,o]=i.useState([]),[n,d]=i.useState([]),[c,x]=i.useState(null),[m,g]=i.useState(!0),[u,p]=i.useState("whatsapp"),[h,y]=i.useState("all"),[f,j]=i.useState(""),[N,v]=i.useState(!1);i.useEffect(()=>{w()},[]);const w=async()=>{try{g(!0);const{data:e}=await s.from("profiles").select("*").eq("role","customer");if(!e)return void o([]);const t=await Promise.all(e.map(async e=>{const[t,r,a]=await Promise.all([s.from("orders").select("total, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}),s.from("wishlist").select("id").eq("user_id",e.id),s.from("cart").select("id").eq("user_id",e.id)]),l=t.data||[],i=l.reduce((e,t)=>e+(t.total||0),0),o=l[0];return{id:e.id,full_name:e.full_name||"Cliente",email:e.email||"",phone:e.phone||"",total_spent:i,orders_count:l.length,wishlist_count:r.data?.length||0,cart_count:a.data?.length||0,last_order_date:o?.created_at}}));o(t)}catch(e){}finally{g(!1)}},k=()=>{n.length===l.length?d([]):d(l.map(e=>e.id))},_=(e,t)=>{const r=e.message.replace("{nome}",t.full_name).replace("{cart_count}",t.cart_count.toString()).replace("{wishlist_count}",t.wishlist_count.toString()).replace("{cart_total}",t.total_spent.toFixed(2)).replace("{order_number}","ORD-"+Math.random().toString(36).substr(2,9).toUpperCase()).replace("{link}",window.location.origin);navigator.clipboard.writeText(r),alert("✅ Mensagem copiada para a área de transferência!")},C=(e,t)=>{if(!e.phone)return void alert("❌ Cliente não possui telefone cadastrado!");const r=t.message.replace("{nome}",e.full_name).replace("{cart_count}",e.cart_count.toString()).replace("{wishlist_count}",e.wishlist_count.toString()).replace("{cart_total}",e.total_spent.toFixed(2)).replace("{order_number}","ORD-"+Math.random().toString(36).substr(2,9).toUpperCase()).replace("{link}",window.location.origin),a=`https://wa.me/${e.phone.replace(/\D/g,"")}?text=${encodeURIComponent(r)}`;window.open(a,"_blank")},S=(e,t)=>{const r=t.message.replace("{nome}",e.full_name).replace("{cart_count}",e.cart_count.toString()).replace("{wishlist_count}",e.wishlist_count.toString()).replace("{cart_total}",e.total_spent.toFixed(2)).replace("{order_number}","ORD-"+Math.random().toString(36).substr(2,9).toUpperCase()).replace("{link}",window.location.origin),a=t.title,s=`mailto:${e.email}?subject=${encodeURIComponent(a)}&body=${encodeURIComponent(r)}`;window.location.href=s},$=()=>{if(0===n.length)return void alert("❌ Selecione pelo menos um cliente!");if(!c)return void alert("❌ Selecione uma mensagem!");confirm(`📤 Enviar mensagem para ${n.length} cliente(s) via ${"whatsapp"===u?"WhatsApp":"Email"}?`)&&(n.forEach(e=>{const t=l.find(t=>t.id===e);t&&("whatsapp"===u?C(t,c):S(t,c))}),alert(`✅ Enviando mensagens para ${n.length} cliente(s)!`),d([]))},P=b.filter(e=>("all"===h||e.category===h)&&(e.title.toLowerCase().includes(f.toLowerCase())||e.message.toLowerCase().includes(f.toLowerCase()))),V=e=>{switch(e){case"promocao":return"ri-price-tag-3-line";case"carrinho":return"ri-shopping-cart-line";case"favoritos":return"ri-heart-line";case"reengajamento":return"ri-user-heart-line";case"agradecimento":return"ri-hand-heart-line";default:return"ri-message-line"}},E=e=>{switch(e){case"promocao":return"Promoção";case"carrinho":return"Carrinho";case"favoritos":return"Favoritos";case"reengajamento":return"Reengajamento";case"agradecimento":return"Agradecimento";default:return e}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-megaphone-line text-yellow-500"}),"Marketing Avançado"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Mensagens prontas, análise de comportamento e automação"})]})}),a.jsxs("div",{className:"flex items-center gap-2 border-b border-gray-700",children:[a.jsxs("button",{onClick:()=>r("mensagens"),className:"px-6 py-3 font-medium transition-all relative "+("mensagens"===t?"text-yellow-500":e?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"),children:[a.jsx("i",{className:"ri-message-3-line mr-2"}),"Mensagens Prontas","mensagens"===t&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-yellow-500 to-orange-500"})]}),a.jsxs("button",{onClick:()=>r("analise"),className:"px-6 py-3 font-medium transition-all relative "+("analise"===t?"text-purple-500":e?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"),children:[a.jsx("i",{className:"ri-bar-chart-box-line mr-2"}),"Análise de Clientes","analise"===t&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-purple-500 to-pink-500"})]}),a.jsxs("button",{onClick:()=>r("campanhas"),className:"px-6 py-3 font-medium transition-all relative "+("campanhas"===t?"text-blue-500":e?"text-gray-400 hover:text-gray-300":"text-gray-600 hover:text-gray-800"),children:[a.jsx("i",{className:"ri-rocket-line mr-2"}),"Campanhas","campanhas"===t&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-cyan-500"})]})]}),"mensagens"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx("i",{className:"ri-search-line mr-2"}),"Buscar Mensagem"]}),a.jsx("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"Digite para buscar...",className:`w-full px-4 py-2 rounded-lg border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-yellow-500`})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx("i",{className:"ri-filter-line mr-2"}),"Categoria"]}),a.jsxs("select",{value:h,onChange:e=>y(e.target.value),className:`w-full px-4 py-2 rounded-lg border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-yellow-500`,children:[a.jsx("option",{value:"all",children:"Todas as Categorias"}),a.jsx("option",{value:"promocao",children:"🎉 Promoção"}),a.jsx("option",{value:"carrinho",children:"🛒 Carrinho Abandonado"}),a.jsx("option",{value:"favoritos",children:"❤️ Favoritos"}),a.jsx("option",{value:"reengajamento",children:"💔 Reengajamento"}),a.jsx("option",{value:"agradecimento",children:"🙏 Agradecimento"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-2",children:[a.jsx("i",{className:"ri-send-plane-line mr-2"}),"Método de Envio"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>p("whatsapp"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all "+("whatsapp"===u?"bg-green-500 text-white":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:[a.jsx("i",{className:"ri-whatsapp-line mr-2"}),"WhatsApp"]}),a.jsxs("button",{onClick:()=>p("email"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all "+("email"===u?"bg-blue-500 text-white":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:[a.jsx("i",{className:"ri-mail-line mr-2"}),"Email"]})]})]})]}),n.length>0&&c&&a.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-lg border border-yellow-500/30",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[a.jsx("i",{className:"ri-checkbox-multiple-line mr-2"}),n.length," cliente(s) selecionado(s)"]}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Mensagem: ",c.title]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-500 text-white font-medium rounded-lg hover:bg-blue-600 transition-colors whitespace-nowrap",children:[a.jsx("i",{className:"ri-eye-line mr-2"}),"Preview"]}),a.jsxs("button",{onClick:$,className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:[a.jsx("i",{className:"ri-send-plane-fill mr-2"}),"Enviar para Todos"]})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:P.map(t=>{const r=(e=>{switch(e){case"promocao":return"yellow";case"carrinho":return"blue";case"favoritos":return"pink";case"reengajamento":return"purple";case"agradecimento":return"green";default:return"gray"}})(t.category);return a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${c?.id===t.id?`border-${r}-500 ring-2 ring-${r}-500/50`:e?"border-gray-800":"border-gray-200"} cursor-pointer transition-all hover:scale-[1.02]`,onClick:()=>x(t),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg bg-${r}-500/20 flex items-center justify-center`,children:a.jsx("i",{className:`${V(t.category)} text-xl text-${r}-500`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold",children:t.title}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-${r}-500/20 text-${r}-500`,children:E(t.category)})]})]}),c?.id===t.id&&a.jsx("i",{className:`ri-checkbox-circle-fill text-2xl text-${r}-500`})]}),a.jsx("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-white"} mb-4`,children:a.jsx("p",{className:"text-sm whitespace-pre-line",children:t.message})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:e=>{e.stopPropagation();const r=l[0];r&&_(t,r)},className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+(e?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"),children:[a.jsx("i",{className:"ri-file-copy-line mr-2"}),"Copiar"]}),a.jsxs("button",{onClick:e=>{e.stopPropagation(),x(t)},className:`flex-1 px-4 py-2 rounded-lg bg-gradient-to-r from-${r}-500 to-${r}-600 text-white font-medium hover:opacity-90 transition-opacity`,children:[a.jsx("i",{className:"ri-send-plane-line mr-2"}),"Usar"]})]})]},t.id)})}),0===P.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"ri-message-3-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg text-gray-400",children:"Nenhuma mensagem encontrada"})]})]}),"analise"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{title:"Total de Clientes",value:l.length,icon:"ri-user-line",color:"blue",bg:"bg-blue-500/20",text:"text-blue-500"},{title:"Com Carrinho",value:l.filter(e=>e.cart_count>0).length,icon:"ri-shopping-cart-line",color:"yellow",bg:"bg-yellow-500/20",text:"text-yellow-500"},{title:"Com Favoritos",value:l.filter(e=>e.wishlist_count>0).length,icon:"ri-heart-line",color:"pink",bg:"bg-pink-500/20",text:"text-pink-500"},{title:"Inativos (90d)",value:l.filter(e=>{if(!e.last_order_date)return!0;return Math.floor((Date.now()-new Date(e.last_order_date).getTime())/864e5)>90}).length,icon:"ri-user-unfollow-line",color:"red",bg:"bg-red-500/20",text:"text-red-500"}].map((t,r)=>a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:`w-12 h-12 rounded-lg ${t.bg} flex items-center justify-center mb-4`,children:a.jsx("i",{className:`${t.icon} text-2xl ${t.text}`})}),a.jsx("h3",{className:"text-sm text-gray-400 mb-1",children:t.title}),a.jsx("p",{className:"text-3xl font-bold",children:t.value})]},r))}),a.jsxs("div",{className:`rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"} overflow-hidden`,children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-bold",children:[a.jsx("i",{className:"ri-user-search-line mr-2"}),"Análise Detalhada de Clientes"]}),a.jsxs("button",{onClick:k,className:"px-4 py-2 bg-purple-500 text-white font-medium rounded-lg hover:bg-purple-600 transition-colors whitespace-nowrap",children:[a.jsx("i",{className:"ri-checkbox-multiple-line mr-2"}),n.length===l.length?"Desmarcar Todos":"Selecionar Todos"]})]})}),m?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left",children:a.jsx("input",{type:"checkbox",checked:n.length===l.length,onChange:k,className:"w-5 h-5 rounded border-gray-600 text-purple-500 focus:ring-purple-500"})}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Cliente"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Pedidos"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Total Gasto"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Carrinho"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Favoritos"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Último Pedido"}),a.jsx("th",{className:"px-6 py-4 text-left font-medium",children:"Ações"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:l.map(t=>a.jsxs("tr",{className:(n.includes(t.id)?e?"bg-purple-500/10":"bg-purple-50":e?"hover:bg-gray-800":"hover:bg-gray-50")+" transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("input",{type:"checkbox",checked:n.includes(t.id),onChange:()=>{return e=t.id,void d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:"w-5 h-5 rounded border-gray-600 text-purple-500 focus:ring-purple-500"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:t.full_name}),a.jsx("p",{className:"text-sm text-gray-400",children:t.email}),t.phone&&a.jsxs("p",{className:"text-xs text-gray-500",children:[a.jsx("i",{className:"ri-phone-line mr-1"}),t.phone]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-lg font-bold text-blue-500",children:t.orders_count})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"text-lg font-bold text-yellow-500",children:["€",t.total_spent.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4",children:t.cart_count>0?a.jsxs("span",{className:"px-3 py-1 rounded-full bg-yellow-500/20 text-yellow-500 font-medium",children:[a.jsx("i",{className:"ri-shopping-cart-line mr-1"}),t.cart_count]}):a.jsx("span",{className:"text-gray-500",children:"-"})}),a.jsx("td",{className:"px-6 py-4",children:t.wishlist_count>0?a.jsxs("span",{className:"px-3 py-1 rounded-full bg-pink-500/20 text-pink-500 font-medium",children:[a.jsx("i",{className:"ri-heart-line mr-1"}),t.wishlist_count]}):a.jsx("span",{className:"text-gray-500",children:"-"})}),a.jsx("td",{className:"px-6 py-4",children:t.last_order_date?a.jsx("span",{className:"text-sm",children:new Date(t.last_order_date).toLocaleDateString("pt-PT")}):a.jsx("span",{className:"text-gray-500",children:"Nunca"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center gap-2",children:c&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>"whatsapp"===u?C(t,c):S(t,c),className:`p-2 rounded-lg ${"whatsapp"===u?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-blue-500/20 text-blue-500 hover:bg-blue-500/30"} transition-colors`,title:"whatsapp"===u?"Enviar WhatsApp":"Enviar Email",children:a.jsx("i",{className:"whatsapp"===u?"ri-whatsapp-line":"ri-mail-line"})}),a.jsx("button",{onClick:()=>_(c,t),className:"p-2 rounded-lg bg-gray-500/20 text-gray-400 hover:bg-gray-500/30 transition-colors",title:"Copiar Mensagem",children:a.jsx("i",{className:"ri-file-copy-line"})})]})})})]},t.id))})]})})]})]}),"campanhas"===t&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"ri-rocket-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg text-gray-400",children:"Funcionalidade de campanhas em desenvolvimento"})]}),N&&c&&n.length>0&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`max-w-2xl w-full rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} max-h-[90vh] overflow-y-auto`,children:[a.jsx("div",{className:"p-6 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xl font-bold",children:[a.jsx("i",{className:"ri-eye-line mr-2"}),"Preview da Mensagem"]}),a.jsx("button",{onClick:()=>v(!1),className:"p-2 rounded-lg hover:bg-gray-800 transition-colors",children:a.jsx("i",{className:"ri-close-line text-xl"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"p-4 rounded-lg "+(e?"bg-gray-800":"bg-gray-100"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Mensagem Selecionada:"}),a.jsx("p",{className:"font-bold",children:c.title})]}),a.jsxs("div",{className:"p-4 rounded-lg "+(e?"bg-gray-800":"bg-gray-100"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Será enviado para:"}),a.jsxs("p",{className:"font-bold",children:[n.length," cliente(s)"]})]}),a.jsxs("div",{className:"p-4 rounded-lg "+(e?"bg-gray-800":"bg-gray-100"),children:[a.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Exemplo de mensagem:"}),a.jsx("div",{className:"p-4 bg-white text-gray-900 rounded-lg whitespace-pre-line",children:c.message.replace("{nome}",l.find(e=>e.id===n[0])?.full_name||"Cliente").replace("{cart_count}","3").replace("{wishlist_count}","5").replace("{cart_total}","149.99").replace("{order_number}","ORD-12345").replace("{link}",window.location.origin)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>v(!1),className:"flex-1 px-6 py-3 bg-gray-700 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:()=>{v(!1),$()},className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity",children:[a.jsx("i",{className:"ri-send-plane-fill mr-2"}),"Confirmar Envio"]})]})]})]})})]})}function f(){const[e,t]=i.useState({totalRevenue:0,netRevenue:0,grossRevenue:0,totalCosts:0,shippingCosts:0,taxCosts:0,refundCosts:0,grossProfit:0,netProfit:0,profitMargin:0,totalOrders:0,completedOrders:0,canceledOrders:0,refundedOrders:0,averageOrderValue:0,averageProfit:0,paymentMethods:[],revenueGrowth:0,profitGrowth:0,ordersGrowth:0}),[r,l]=i.useState([]),[o,n]=i.useState([]),[d,c]=i.useState("month"),[x,m]=i.useState(!0),[g,u]=i.useState(!0);i.useEffect(()=>{let e;return p(),g&&(e=setInterval(()=>{p()},3e4)),()=>{e&&clearInterval(e)}},[d,g]);const p=async()=>{try{m(!0);const e=new Date;let r=new Date;switch(d){case"today":r.setHours(0,0,0,0);break;case"week":r.setDate(e.getDate()-7);break;case"month":r.setMonth(e.getMonth()-1);break;case"year":r.setFullYear(e.getFullYear()-1)}const{data:a,error:i}=await s.from("orders").select("*, order_items(*)").gte("created_at",r.toISOString());if(i)throw i;const{data:o,error:c}=await s.from("financial_transactions").select("*").gte("created_at",r.toISOString()).order("created_at",{ascending:!1});if(c)throw c;const{data:x,error:g}=await s.from("refunds").select("*").gte("created_at",r.toISOString());if(g)throw g;const u=h(a||[],o||[],x||[]);t(u),l(o||[]);const p=b(a||[]);n(p)}catch(e){}finally{m(!1)}},h=(e,t,r)=>{const a=e.filter(e=>"completed"===e.status),s=e.filter(e=>"canceled"===e.status),l=r.length,i=a.reduce((e,t)=>e+(t.total||0),0),o=r.reduce((e,t)=>e+(t.amount||0),0),n=a.reduce((e,t)=>e+(t.shipping_cost||0),0),c=a.reduce((e,t)=>e+(t.tax_amount||0),0),x=n+c+o,m=i-o,g=i-n,u=m-x,p=i>0?u/i*100:0,h=a.length>0?i/a.length:0,b=a.length>0?u/a.length:0,y=new Map;a.forEach(e=>{const t=e.payment_method||"Não especificado",r=y.get(t)||{amount:0,count:0};y.set(t,{amount:r.amount+(e.total||0),count:r.count+1})});const f=Array.from(y.entries()).map(([e,t])=>({method:e,amount:t.amount,count:t.count,percentage:i>0?t.amount/i*100:0})).sort((e,t)=>t.amount-e.amount),j=e.filter(e=>{const t=new Date(e.created_at),r=new Date,a="today"===d?1:"week"===d?7:"month"===d?30:365,s=new Date(r.getTime()-2*a*24*60*60*1e3),l=new Date(r.getTime()-24*a*60*60*1e3);return t>=s&&t<l&&"completed"===e.status}),N=j.reduce((e,t)=>e+(t.total||0),0),v=N>0?(i-N)/N*100:0,w=N-j.reduce((e,t)=>e+(t.shipping_cost||0)+(t.tax_amount||0),0),k=w>0?(u-w)/w*100:0,_=j.length>0?(a.length-j.length)/j.length*100:0;return{totalRevenue:i,netRevenue:m,grossRevenue:i,totalCosts:x,shippingCosts:n,taxCosts:c,refundCosts:o,grossProfit:g,netProfit:u,profitMargin:p,totalOrders:e.length,completedOrders:a.length,canceledOrders:s.length,refundedOrders:l,averageOrderValue:h,averageProfit:b,paymentMethods:f,revenueGrowth:v,profitGrowth:k,ordersGrowth:_}},b=e=>{const t=new Map;return e.filter(e=>"completed"===e.status).forEach(e=>{const r=new Date(e.created_at).toLocaleDateString("pt-PT"),a=t.get(r)||{revenue:0,profit:0,orders:0},s=(e.total||0)-(e.shipping_cost||0)-(e.tax_amount||0);t.set(r,{revenue:a.revenue+(e.total||0),profit:a.profit+s,orders:a.orders+1})}),Array.from(t.entries()).map(([e,t])=>({date:e,...t})).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).slice(-30)},y=e=>new Intl.NumberFormat("pt-PT",{style:"currency",currency:"EUR"}).format(e),f=e=>`${e>=0?"+":""}${e.toFixed(1)}%`,j=e=>e>0?"text-green-500":e<0?"text-red-500":"text-gray-500";return x?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-gray-400",children:"Carregando dados financeiros..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-line-chart-line text-yellow-500"}),"Gestão Financeira"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Relatórios e análises financeiras em tempo real"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>u(!g),className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap "+(g?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"),children:[a.jsx("i",{className:(g?"ri-refresh-line animate-spin":"ri-pause-line")+" text-xl"}),g?"Auto-Refresh ON":"Auto-Refresh OFF"]}),a.jsxs("button",{onClick:()=>{const t={periodo:d,data_geracao:(new Date).toLocaleString("pt-PT"),estatisticas:e,transacoes:r,receita_diaria:o},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=`relatorio-financeiro-${d}-${Date.now()}.json`,l.click()},className:"px-6 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-file-excel-line text-xl"}),"Exportar Relatório"]})]})]}),a.jsx("div",{className:"flex gap-2",children:[{value:"today",label:"Hoje",icon:"ri-calendar-today-line"},{value:"week",label:"Semana",icon:"ri-calendar-week-line"},{value:"month",label:"Mês",icon:"ri-calendar-month-line"},{value:"year",label:"Ano",icon:"ri-calendar-line"}].map(e=>a.jsxs("button",{onClick:()=>c(e.value),className:"px-6 py-2 rounded-lg font-medium transition-all flex items-center gap-2 whitespace-nowrap "+(d===e.value?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg scale-105":"bg-white/5 text-gray-400 hover:bg-white/10"),children:[a.jsx("i",{className:`${e.icon} text-lg`}),e.label]},e.value))}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-money-dollar-circle-line text-green-500"}),"Receitas"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Receita Bruta",value:y(e.grossRevenue),icon:"ri-money-dollar-circle-line",color:"from-green-500 to-green-600",change:f(e.revenueGrowth),changeColor:j(e.revenueGrowth)},{label:"Receita Líquida",value:y(e.netRevenue),icon:"ri-wallet-3-line",color:"from-blue-500 to-blue-600",change:f(e.revenueGrowth),changeColor:j(e.revenueGrowth)},{label:"Ticket Médio (AOV)",value:y(e.averageOrderValue),icon:"ri-shopping-cart-line",color:"from-purple-500 to-purple-600",change:f(e.ordersGrowth),changeColor:j(e.ordersGrowth)},{label:"Pedidos Concluídos",value:e.completedOrders.toString(),icon:"ri-checkbox-circle-line",color:"from-teal-500 to-teal-600",change:f(e.ordersGrowth),changeColor:j(e.ordersGrowth)}].map((e,t)=>a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all hover:scale-105",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${e.color} flex items-center justify-center`,children:a.jsx("i",{className:`${e.icon} text-2xl text-white`})}),a.jsx("span",{className:`text-sm font-semibold ${e.changeColor}`,children:e.change})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e.label}),a.jsx("p",{className:"text-2xl font-bold",children:e.value})]},t))})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-funds-line text-yellow-500"}),"Custos e Lucros"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Lucro Bruto",value:y(e.grossProfit),icon:"ri-line-chart-line",color:"from-yellow-500 to-yellow-600",change:f(e.profitGrowth),changeColor:j(e.profitGrowth)},{label:"Lucro Líquido",value:y(e.netProfit),icon:"ri-funds-line",color:"from-orange-500 to-orange-600",change:f(e.profitGrowth),changeColor:j(e.profitGrowth)},{label:"Margem de Lucro",value:`${e.profitMargin.toFixed(1)}%`,icon:"ri-percent-line",color:"from-pink-500 to-pink-600",change:f(e.profitGrowth),changeColor:j(e.profitGrowth)},{label:"Lucro Médio/Pedido",value:y(e.averageProfit),icon:"ri-calculator-line",color:"from-indigo-500 to-indigo-600",change:f(e.profitGrowth),changeColor:j(e.profitGrowth)}].map((e,t)=>a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all hover:scale-105",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${e.color} flex items-center justify-center`,children:a.jsx("i",{className:`${e.icon} text-2xl text-white`})}),a.jsx("span",{className:`text-sm font-semibold ${e.changeColor}`,children:e.change})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e.label}),a.jsx("p",{className:"text-2xl font-bold",children:e.value})]},t))})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-file-list-3-line text-red-500"}),"Custos Detalhados"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Custos Totais",value:y(e.totalCosts),icon:"ri-file-list-3-line",color:"from-red-500 to-red-600",percentage:e.grossRevenue>0?e.totalCosts/e.grossRevenue*100:0},{label:"Custos de Envio",value:y(e.shippingCosts),icon:"ri-truck-line",color:"from-orange-500 to-red-500",percentage:e.grossRevenue>0?e.shippingCosts/e.grossRevenue*100:0},{label:"Impostos",value:y(e.taxCosts),icon:"ri-government-line",color:"from-purple-500 to-red-500",percentage:e.grossRevenue>0?e.taxCosts/e.grossRevenue*100:0},{label:"Reembolsos",value:y(e.refundCosts),icon:"ri-refund-line",color:"from-pink-500 to-red-500",percentage:e.grossRevenue>0?e.refundCosts/e.grossRevenue*100:0}].map((e,t)=>a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all hover:scale-105",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${e.color} flex items-center justify-center`,children:a.jsx("i",{className:`${e.icon} text-2xl text-white`})}),a.jsxs("span",{className:"text-sm font-semibold text-red-400",children:[e.percentage.toFixed(1),"%"]})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e.label}),a.jsx("p",{className:"text-2xl font-bold",children:e.value})]},t))})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-shopping-bag-3-line text-blue-500"}),"Análise de Pedidos"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total de Pedidos",value:e.totalOrders.toString(),icon:"ri-shopping-bag-3-line",color:"from-blue-500 to-blue-600",percentage:100},{label:"Concluídos",value:e.completedOrders.toString(),icon:"ri-checkbox-circle-line",color:"from-green-500 to-green-600",percentage:e.totalOrders>0?e.completedOrders/e.totalOrders*100:0},{label:"Cancelados",value:e.canceledOrders.toString(),icon:"ri-close-circle-line",color:"from-red-500 to-red-600",percentage:e.totalOrders>0?e.canceledOrders/e.totalOrders*100:0},{label:"Reembolsados",value:e.refundedOrders.toString(),icon:"ri-refund-line",color:"from-orange-500 to-red-600",percentage:e.totalOrders>0?e.refundedOrders/e.totalOrders*100:0}].map((e,t)=>a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10 hover:border-white/20 transition-all hover:scale-105",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${e.color} flex items-center justify-center`,children:a.jsx("i",{className:`${e.icon} text-2xl text-white`})}),a.jsxs("span",{className:"text-sm font-semibold text-gray-400",children:[e.percentage.toFixed(1),"%"]})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-1",children:e.label}),a.jsx("p",{className:"text-2xl font-bold",children:e.value})]},t))})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[a.jsx("i",{className:"ri-bank-card-line text-purple-500"}),"Receita por Método de Pagamento"]}),a.jsx("div",{className:"space-y-4",children:e.paymentMethods.length>0?e.paymentMethods.map((e,t)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:a.jsx("i",{className:"ri-bank-card-line text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.method}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.count," pedidos"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-lg",children:y(e.amount)}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.percentage.toFixed(1),"% do total"]})]})]}),a.jsx("div",{className:"w-full bg-white/5 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500",style:{width:`${e.percentage}%`}})})]},t)):a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Nenhum método de pagamento registrado"})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[a.jsx("i",{className:"ri-bar-chart-line text-blue-500"}),"Receita Diária (Últimos 30 Dias)"]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.length>0?o.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:a.jsx("i",{className:"ri-calendar-line text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.date}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.orders," pedidos"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold text-lg text-green-500",children:y(e.revenue)}),a.jsxs("p",{className:"text-sm text-yellow-500",children:["Lucro: ",y(e.profit)]})]})]},t)):a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Nenhuma receita registrada"})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[a.jsx("i",{className:"ri-exchange-line text-green-500"}),"Últimas Transações"]}),a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:r.length>0?r.slice(0,20).map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center "+("revenue"===e.type?"bg-gradient-to-br from-green-500 to-green-600":"refund"===e.type?"bg-gradient-to-br from-red-500 to-red-600":"bg-gradient-to-br from-orange-500 to-orange-600"),children:a.jsx("i",{className:("revenue"===e.type?"ri-arrow-down-line":"refund"===e.type?"ri-arrow-up-line":"ri-exchange-line")+" text-xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:e.description}),a.jsx("p",{className:"text-sm text-gray-400",children:new Date(e.created_at).toLocaleString("pt-PT")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-lg "+("revenue"===e.type?"text-green-500":"refund"===e.type?"text-red-500":"text-orange-500"),children:["revenue"===e.type?"+":"-",y(Math.abs(e.amount))]}),e.payment_method&&a.jsx("p",{className:"text-sm text-gray-400",children:e.payment_method})]})]},t)):a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Nenhuma transação registrada"})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 backdrop-blur-sm rounded-xl p-6 border border-yellow-500/30",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[a.jsx("i",{className:"ri-file-chart-line text-yellow-500"}),"Resumo Financeiro do Período"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Receita Bruta:"}),a.jsx("span",{className:"font-bold text-green-500",children:y(e.grossRevenue)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"(-) Reembolsos:"}),a.jsxs("span",{className:"font-bold text-red-500",children:["-",y(e.refundCosts)]})]}),a.jsx("div",{className:"w-full h-px bg-white/10"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Receita Líquida:"}),a.jsx("span",{className:"font-bold text-blue-500",children:y(e.netRevenue)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"(-) Custos de Envio:"}),a.jsxs("span",{className:"font-bold text-orange-500",children:["-",y(e.shippingCosts)]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"(-) Impostos:"}),a.jsxs("span",{className:"font-bold text-purple-500",children:["-",y(e.taxCosts)]})]}),a.jsx("div",{className:"w-full h-px bg-white/10"}),a.jsxs("div",{className:"flex justify-between items-center text-lg",children:[a.jsx("span",{className:"font-semibold",children:"Lucro Líquido:"}),a.jsx("span",{className:"font-bold "+(e.netProfit>=0?"text-green-500":"text-red-500"),children:y(e.netProfit)})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Total de Pedidos:"}),a.jsx("span",{className:"font-bold",children:e.totalOrders})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Pedidos Concluídos:"}),a.jsx("span",{className:"font-bold text-green-500",children:e.completedOrders})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Pedidos Cancelados:"}),a.jsx("span",{className:"font-bold text-red-500",children:e.canceledOrders})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Pedidos Reembolsados:"}),a.jsx("span",{className:"font-bold text-orange-500",children:e.refundedOrders})]}),a.jsx("div",{className:"w-full h-px bg-white/10"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Ticket Médio:"}),a.jsx("span",{className:"font-bold text-purple-500",children:y(e.averageOrderValue)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-400",children:"Lucro Médio/Pedido:"}),a.jsx("span",{className:"font-bold text-yellow-500",children:y(e.averageProfit)})]}),a.jsx("div",{className:"w-full h-px bg-white/10"}),a.jsxs("div",{className:"flex justify-between items-center text-lg",children:[a.jsx("span",{className:"font-semibold",children:"Margem de Lucro:"}),a.jsxs("span",{className:"font-bold "+(e.profitMargin>=0?"text-green-500":"text-red-500"),children:[e.profitMargin.toFixed(1),"%"]})]})]})]})]})]})}function j(){const[e,t]=i.useState("api-keys"),[r,l]=i.useState([]),[o,n]=i.useState([]),[d,c]=i.useState([]),[x,m]=i.useState([]),[g,u]=i.useState(!1),[p,h]=i.useState(!1),[b,y]=i.useState(""),[f,j]=i.useState([]),[N,v]=i.useState(""),[w,k]=i.useState(""),[_,C]=i.useState(!1),[S,$]=i.useState(""),[P,V]=i.useState(""),[E,A]=i.useState([]),[T,I]=i.useState(!1),[D,O]=i.useState(""),[R,M]=i.useState([]),[q,F]=i.useState(!0),[L,z]=i.useState("daily"),[B,G]=i.useState(!1),[U,K]=i.useState("30"),[W,H]=i.useState(""),[Q,J]=i.useState("5"),[Y,Z]=i.useState("8"),X=["products","orders","order_items","profiles","cart","wishlist","reviews","categories","services","site_settings","contact_messages","newsletter_subscribers"];i.useEffect(()=>{ee()},[]);const ee=async()=>{u(!0);try{const{data:e}=await s.from("api_keys").select("*").order("created_at",{ascending:!1});e&&l(e);const{data:t}=await s.from("webhooks").select("*").order("created_at",{ascending:!1});t&&n(t);const{data:r}=await s.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(50);r&&m(r.map(e=>({id:e.id,event_type:e.action,user_email:e.user_email||"Sistema",ip_address:e.ip_address||"N/A",description:e.details||e.action,severity:e.severity||"low",created_at:e.created_at}))),c([{id:"1",name:"Backup Automático Diário",type:"automatic",size:"45.2 MB",tables:["products","orders","profiles"],created_at:(new Date).toISOString(),status:"completed"},{id:"2",name:"Backup Manual - Antes da Atualização",type:"manual",size:"42.8 MB",tables:X,created_at:new Date(Date.now()-864e5).toISOString(),status:"completed"}])}catch(e){}finally{u(!1)}},te=e=>{switch(e){case"critical":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";default:return"text-blue-600 bg-blue-50"}},re=e=>{switch(e){case"critical":return"🚨";case"high":return"⚠️";case"medium":return"⚡";default:return"ℹ️"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 rounded-xl p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🔒 Segurança & Infraestrutura"}),a.jsx("p",{className:"text-red-50",children:"Gestão completa de API Keys, Webhooks, Backups e Logs de Segurança"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl font-bold",children:r.filter(e=>e.is_active).length}),a.jsx("div",{className:"text-sm text-red-50",children:"API Keys Ativas"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-blue-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"🔑 API Keys"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.length}),a.jsxs("p",{className:"text-xs text-gray-500",children:[r.filter(e=>e.is_active).length," ativas"]})]}),a.jsx("div",{className:"text-4xl",children:"🔑"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"🔗 Webhooks"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o.length}),a.jsxs("p",{className:"text-xs text-gray-500",children:[o.filter(e=>e.is_active).length," ativos"]})]}),a.jsx("div",{className:"text-4xl",children:"🔗"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"💾 Backups"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Último hoje"})]}),a.jsx("div",{className:"text-4xl",children:"💾"})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border-2 border-orange-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"📋 Logs"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Últimas 50"})]}),a.jsx("div",{className:"text-4xl",children:"📋"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border-2 border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"flex overflow-x-auto",children:[a.jsx("button",{onClick:()=>t("api-keys"),className:"flex-1 min-w-max px-6 py-4 font-medium transition-all whitespace-nowrap "+("api-keys"===e?"bg-blue-500 text-white border-b-4 border-blue-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:"🔑 API Keys"}),a.jsx("button",{onClick:()=>t("webhooks"),className:"flex-1 min-w-max px-6 py-4 font-medium transition-all whitespace-nowrap "+("webhooks"===e?"bg-purple-500 text-white border-b-4 border-purple-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:"🔗 Webhooks"}),a.jsx("button",{onClick:()=>t("backups"),className:"flex-1 min-w-max px-6 py-4 font-medium transition-all whitespace-nowrap "+("backups"===e?"bg-green-500 text-white border-b-4 border-green-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:"💾 Backups"}),a.jsx("button",{onClick:()=>t("logs"),className:"flex-1 min-w-max px-6 py-4 font-medium transition-all whitespace-nowrap "+("logs"===e?"bg-orange-500 text-white border-b-4 border-orange-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:"📋 Logs"}),a.jsx("button",{onClick:()=>t("settings"),className:"flex-1 min-w-max px-6 py-4 font-medium transition-all whitespace-nowrap "+("settings"===e?"bg-red-500 text-white border-b-4 border-red-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:"⚙️ Configurações"})]}),a.jsxs("div",{className:"p-6",children:["api-keys"===e&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"🔑 Gestão de API Keys"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Crie e gerencie chaves de API para integrações externas"})]}),a.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors whitespace-nowrap",children:"➕ Nova API Key"})]}),0===r.length?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔑"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhuma API Key criada"}),a.jsx("button",{onClick:()=>h(!0),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Criar Primeira API Key"})]}):a.jsx("div",{className:"space-y-3",children:r.map(e=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-gray-200",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.is_active?"✅ Ativa":"⏸️ Inativa"})]}),a.jsx("div",{className:"bg-white rounded p-2 mb-2 font-mono text-sm border border-gray-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[e.key.substring(0,20),"...",e.key.substring(e.key.length-8)]}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e.key),alert("✅ API Key copiada!")},className:"text-blue-600 hover:text-blue-700 text-xs",children:"📋 Copiar"})]})}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.permissions.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:e},t))}),a.jsxs("div",{className:"flex gap-4 text-xs text-gray-600",children:[a.jsxs("span",{children:["📅 Criada: ",new Date(e.created_at).toLocaleDateString("pt-PT")]}),e.last_used&&a.jsxs("span",{children:["🕐 Último uso: ",new Date(e.last_used).toLocaleDateString("pt-PT")]}),e.expires_at&&a.jsxs("span",{children:["⏰ Expira: ",new Date(e.expires_at).toLocaleDateString("pt-PT")]})]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>(async(e,t)=>{const{error:r}=await s.from("api_keys").update({is_active:!t}).eq("id",e);r||ee()})(e.id,e.is_active),className:"px-3 py-1 rounded text-sm "+(e.is_active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.is_active?"⏸️ Desativar":"▶️ Ativar"}),a.jsx("button",{onClick:()=>(async e=>{if(!confirm("⚠️ Tem certeza que deseja deletar esta API Key? Esta ação não pode ser desfeita."))return;const{error:t}=await s.from("api_keys").delete().eq("id",e);t||ee()})(e.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200",children:"🗑️ Deletar"})]})]})},e.id))})]}),"webhooks"===e&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"🔗 Gestão de Webhooks"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure webhooks para receber notificações de eventos"})]}),a.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors whitespace-nowrap",children:"➕ Novo Webhook"})]}),0===o.length?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔗"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Nenhum webhook configurado"}),a.jsx("button",{onClick:()=>C(!0),className:"px-6 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"Criar Primeiro Webhook"})]}):a.jsx("div",{className:"space-y-3",children:o.map(e=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-gray-200",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.is_active?"✅ Ativo":"⏸️ Inativo"})]}),a.jsx("div",{className:"bg-white rounded p-2 mb-2 text-sm border border-gray-300",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"🔗 URL:"}),a.jsx("span",{className:"text-gray-900 font-mono",children:e.url})]})}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.events.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs",children:e},t))}),a.jsxs("div",{className:"flex gap-4 text-xs text-gray-600",children:[a.jsxs("span",{children:["📅 Criado: ",new Date(e.created_at).toLocaleDateString("pt-PT")]}),e.last_triggered&&a.jsxs("span",{children:["🕐 Último disparo: ",new Date(e.last_triggered).toLocaleDateString("pt-PT")]})]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>(async(e,t)=>{const{error:r}=await s.from("webhooks").update({is_active:!t}).eq("id",e);r||ee()})(e.id,e.is_active),className:"px-3 py-1 rounded text-sm "+(e.is_active?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:e.is_active?"⏸️ Desativar":"▶️ Ativar"}),a.jsx("button",{onClick:()=>(async e=>{if(!confirm("⚠️ Tem certeza que deseja deletar este webhook?"))return;const{error:t}=await s.from("webhooks").delete().eq("id",e);t||ee()})(e.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-sm hover:bg-red-200",children:"🗑️ Deletar"})]})]})},e.id))})]}),"backups"===e&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"💾 Gestão de Backups"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Crie e restaure backups do banco de dados"})]}),a.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors whitespace-nowrap",children:"➕ Criar Backup"})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-blue-900",children:"🤖 Backup Automático"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Configure backups automáticos periódicos"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:q,onChange:e=>F(e.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),q&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"⏰ Frequência"}),a.jsxs("select",{value:L,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"hourly",children:"A cada hora"}),a.jsx("option",{value:"daily",children:"Diariamente"}),a.jsx("option",{value:"weekly",children:"Semanalmente"}),a.jsx("option",{value:"monthly",children:"Mensalmente"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"📊 Próximo Backup"}),a.jsx("div",{className:"px-3 py-2 bg-white border-2 border-blue-300 rounded-lg text-blue-900",children:"Hoje às 23:00"})]})]})]}),a.jsx("div",{className:"space-y-3",children:d.map(e=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-gray-200",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("automatic"===e.type?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"),children:"automatic"===e.type?"🤖 Automático":"👤 Manual"}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("completed"===e.status?"bg-green-100 text-green-700":"in_progress"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:"completed"===e.status?"✅ Completo":"in_progress"===e.status?"⏳ Em Progresso":"❌ Falhou"})]}),a.jsxs("div",{className:"flex gap-4 text-sm text-gray-600 mb-2",children:[a.jsxs("span",{children:["💾 Tamanho: ",e.size]}),a.jsxs("span",{children:["📅 Criado: ",new Date(e.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"📋 Tabelas:"}),e.tables.slice(0,3).map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs",children:e},t)),e.tables.length>3&&a.jsxs("span",{className:"px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs",children:["+",e.tables.length-3," mais"]})]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>(e=>{alert(`📥 Iniciando download do backup: ${e.name}\n\nTamanho: ${e.size}`)})(e),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 whitespace-nowrap",children:"📥 Download"}),a.jsx("button",{onClick:()=>(e=>{confirm(`⚠️ ATENÇÃO!\n\nVocê está prestes a restaurar o backup:\n"${e.name}"\n\nIsso irá SUBSTITUIR todos os dados atuais das tabelas selecionadas.\n\nTem certeza que deseja continuar?`)&&(u(!0),setTimeout(()=>{u(!1),alert("✅ Backup restaurado com sucesso!\n\nO site será recarregado."),window.location.reload()},3e3))})(e),className:"px-3 py-1 bg-green-100 text-green-700 rounded text-sm hover:bg-green-200 whitespace-nowrap",children:"♻️ Restaurar"})]})]})},e.id))})]}),"logs"===e&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"📋 Logs de Segurança"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Últimas 50 atividades de segurança do sistema"})]}),a.jsx("div",{className:"space-y-2",children:x.map(e=>a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-gray-300",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsxs("span",{className:`px-2 py-1 rounded text-xs font-medium ${te(e.severity)}`,children:[re(e.severity)," ",e.severity.toUpperCase()]}),a.jsx("span",{className:"font-medium text-gray-900",children:e.event_type})]}),a.jsx("p",{className:"text-sm text-gray-700 mb-1",children:e.description}),a.jsxs("div",{className:"flex gap-4 text-xs text-gray-600",children:[a.jsxs("span",{children:["👤 ",e.user_email]}),a.jsxs("span",{children:["🌐 ",e.ip_address]}),a.jsxs("span",{children:["🕐 ",new Date(e.created_at).toLocaleString("pt-PT")]})]})]})})},e.id))})]}),"settings"===e&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"⚙️ Configurações de Segurança"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Configure políticas de segurança do sistema"})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-blue-900",children:"🔐 Autenticação de Dois Fatores (2FA)"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Adicione uma camada extra de segurança"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:B,onChange:e=>G(e.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),B&&a.jsx("div",{className:"bg-white rounded p-3 text-sm text-blue-900",children:"✅ 2FA ativado. Os usuários precisarão de um código adicional para fazer login."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-200",children:[a.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"⏱️ Configurações de Sessão"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⏰ Timeout de Sessão (minutos)"}),a.jsx("input",{type:"number",value:U,onChange:e=>K(e.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"5",max:"1440"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tempo até logout automático por inatividade"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔒 Máximo de Tentativas de Login"}),a.jsx("input",{type:"number",value:Q,onChange:e=>J(e.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bloqueio temporário após X tentativas falhas"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-200",children:[a.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"🔑 Política de Senhas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📏 Comprimento Mínimo"}),a.jsx("input",{type:"number",value:Y,onChange:e=>Z(e.target.value),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"6",max:"32"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔄 Expiração (dias)"}),a.jsx("input",{type:"number",placeholder:"90",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"30",max:"365"})]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Exigir letras maiúsculas e minúsculas"})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Exigir números"})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Exigir caracteres especiais"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-200",children:[a.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"🌐 Lista Branca de IPs"}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Restrinja o acesso ao painel admin apenas para IPs específicos (um por linha)"}),a.jsx("textarea",{value:W,onChange:e=>H(e.target.value),placeholder:"192.168.1.1\n10.0.0.1\n172.16.0.1",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",rows:5}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"⚠️ Cuidado: Você pode se bloquear se adicionar IPs incorretos"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{alert("✅ Configurações de segurança salvas com sucesso!")},className:"px-6 py-3 bg-gradient-to-r from-red-500 to-pink-600 text-white rounded-lg hover:from-red-600 hover:to-pink-700 transition-all font-medium",children:"💾 Salvar Configurações de Segurança"})})]})]})]}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"🔑 Criar Nova API Key"}),a.jsx("button",{onClick:()=>{h(!1),k("")},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),w?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-green-900 font-bold mb-2",children:"✅ API Key criada com sucesso!"}),a.jsx("p",{className:"text-sm text-green-700 mb-4",children:"⚠️ Copie esta chave agora. Por segurança, ela não será mostrada novamente."}),a.jsx("div",{className:"bg-white rounded p-3 border-2 border-green-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("code",{className:"text-sm font-mono text-gray-900 break-all",children:w}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(w),alert("✅ API Key copiada!")},className:"ml-4 px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 whitespace-nowrap",children:"📋 Copiar"})]})})]}),a.jsx("button",{onClick:()=>{h(!1),k("")},className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Fechar"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📝 Nome da API Key *"}),a.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),placeholder:"Ex: Integração Mobile App",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔐 Permissões * (selecione pelo menos uma)"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border-2 border-gray-300 rounded-lg p-3",children:["read:products","write:products","read:orders","write:orders","read:customers","write:customers","read:analytics","admin:all"].map(e=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:f.includes(e),onChange:t=>{t.target.checked?j([...f,e]):j(f.filter(t=>t!==e))},className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⏰ Data de Expiração (opcional)"}),a.jsx("input",{type:"date",value:N,onChange:e=>v(e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para chave sem expiração"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:async()=>{if(!b.trim()||0===f.length)return void alert("❌ Preencha o nome e selecione pelo menos uma permissão");const e=(()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="sk_live_";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(62*Math.random()));return t})(),{error:t}=await s.from("api_keys").insert({name:b,key:e,permissions:f,expires_at:N||null,is_active:!0});t?alert("❌ Erro ao criar API Key: "+t.message):(k(e),y(""),j([]),v(""),ee())},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"✅ Criar API Key"}),a.jsx("button",{onClick:()=>{h(!1),y(""),j([]),v("")},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})]})})}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"🔗 Criar Novo Webhook"}),a.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📝 Nome do Webhook *"}),a.jsx("input",{type:"text",value:S,onChange:e=>$(e.target.value),placeholder:"Ex: Notificações de Pedidos",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔗 URL do Webhook *"}),a.jsx("input",{type:"url",value:P,onChange:e=>V(e.target.value),placeholder:"https://seu-site.com/webhook",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📡 Eventos * (selecione pelo menos um)"}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto border-2 border-gray-300 rounded-lg p-3",children:["order.created","order.updated","order.cancelled","product.created","product.updated","product.deleted","customer.created","payment.completed","payment.failed"].map(e=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:E.includes(e),onChange:t=>{t.target.checked?A([...E,e]):A(E.filter(t=>t!==e))},className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:async()=>{if(!S.trim()||!P.trim()||0===E.length)return void alert("❌ Preencha todos os campos obrigatórios");const e="whsec_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),{error:t}=await s.from("webhooks").insert({name:S,url:P,events:E,secret:e,is_active:!0});t?alert("❌ Erro ao criar webhook: "+t.message):(alert(`✅ Webhook criado!\n\n🔑 Secret: ${e}\n\nGuarde este secret em local seguro.`),C(!1),$(""),V(""),A([]),ee())},className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"✅ Criar Webhook"}),a.jsx("button",{onClick:()=>{C(!1),$(""),V(""),A([])},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancelar"})]})]})]})})}),T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"💾 Criar Novo Backup"}),a.jsx("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📝 Nome do Backup *"}),a.jsx("input",{type:"text",value:D,onChange:e=>O(e.target.value),placeholder:"Ex: Backup antes da atualização",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"📋 Tabelas * (selecione pelo menos uma)"}),a.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border-2 border-gray-300 rounded-lg p-3",children:[a.jsxs("label",{className:"flex items-center gap-2 font-medium",children:[a.jsx("input",{type:"checkbox",checked:R.length===X.length,onChange:e=>{e.target.checked?M(X):M([])},className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-900",children:"✅ Selecionar Todas"})]}),a.jsx("hr",{className:"my-2"}),X.map(e=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:R.includes(e),onChange:t=>{t.target.checked?M([...R,e]):M(R.filter(t=>t!==e))},className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e})]},e))]})]}),a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:["⚠️ ",a.jsx("strong",{children:"Atenção:"})," O backup pode levar alguns minutos dependendo do tamanho dos dados."]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:async()=>{D.trim()&&0!==R.length?(u(!0),setTimeout(()=>{const e={id:Date.now().toString(),name:D,type:"manual",size:(50*Math.random()+10).toFixed(1)+" MB",tables:R,created_at:(new Date).toISOString(),status:"completed"};c([e,...d]),I(!1),O(""),M([]),u(!1),alert("✅ Backup criado com sucesso!")},2e3)):alert("❌ Preencha o nome e selecione pelo menos uma tabela")},disabled:g,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"⏳ Criando...":"✅ Criar Backup"}),a.jsx("button",{onClick:()=>{I(!1),O(""),M([])},disabled:g,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",children:"Cancelar"})]})]})]})})})]})}function N({darkMode:e}){const[t,r]=i.useState([]),[l,o]=i.useState([]),[n,d]=i.useState([]),[c,x]=i.useState(!0);i.useEffect(()=>{m()},[]);const m=async()=>{try{const[e,t,a]=await Promise.all([s.from("automation_rules").select("*").order("created_at",{ascending:!1}),s.from("email_templates").select("*").order("created_at",{ascending:!1}),s.from("scheduled_tasks").select("*").order("created_at",{ascending:!1})]);r(e.data||[]),o(t.data||[]),d(a.data||[])}catch(e){}finally{x(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-flashlight-line text-yellow-500"}),"Gestão de Automação"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Automatize processos e regras de negócio"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Regras de Automação"}),a.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Regra"]})]}),a.jsx("div",{className:"space-y-3",children:0===t.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"ri-robot-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:(e?"text-gray-400":"text-gray-600")+" mb-4",children:"Nenhuma regra de automação criada"}),a.jsx("button",{className:"px-6 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:"Criar Primeira Regra"})]}):t.map(t=>a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-white"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium",children:t.name}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.description})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs ml-2 whitespace-nowrap "+(t.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:t.is_active?"Ativa":"Inativa"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:["Executada ",t.execution_count||0," vezes"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:a.jsx("i",{className:"ri-edit-line"})}),a.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:a.jsx("i",{className:"ri-delete-bin-line"})})]})]})]},t.id))})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Templates de E-mail"}),a.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Novo Template"]})]}),a.jsx("div",{className:"space-y-3",children:0===l.length?a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Nenhum template criado"}):l.map(t=>a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-white"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:t.name}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.subject})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(t.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:t.is_active?"Ativo":"Inativo"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors",children:a.jsx("i",{className:"ri-edit-line"})}),a.jsx("button",{className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",children:a.jsx("i",{className:"ri-eye-line"})}),a.jsx("button",{className:"p-2 rounded-lg bg-red-500/10 text-red-500 hover:bg-red-500/20 transition-colors",children:a.jsx("i",{className:"ri-delete-bin-line"})})]})]},t.id))})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold",children:"Tarefas Agendadas"}),a.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Tarefa"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:0===n.length?a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Nenhuma tarefa agendada"}):n.map(t=>a.jsxs("div",{className:`p-4 rounded-lg ${e?"bg-gray-800":"bg-white"} border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-medium",children:t.name}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+(t.is_active?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:t.is_active?"Ativa":"Inativa"})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"ri-time-line text-gray-400"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:t.schedule_cron})]}),t.last_run&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"ri-check-line text-green-500"}),a.jsxs("span",{className:e?"text-gray-400":"text-gray-600",children:["Última execução: ",new Date(t.last_run).toLocaleString("pt-BR")]})]})]})]},t.id))})]})]})}function v({darkMode:e}){const[t,r]=i.useState("messages"),[l,o]=i.useState([]),[n,d]=i.useState([]),[c,x]=i.useState(!0),[m,g]=i.useState(1),[u,p]=i.useState(1),[h,b]=i.useState("all"),[y,f]=i.useState("all"),[j,N]=i.useState(""),[v,w]=i.useState(null),[k,_]=i.useState(!1),[C,S]=i.useState(!1),[$,P]=i.useState([]),[V,E]=i.useState(!1),[A,T]=i.useState(!1),I=12;i.useEffect(()=>{"messages"===t?D():"newsletter"===t?O():"maintenance"===t?R():"tasks"===t&&M()},[t,m,h,y,j]);const D=async()=>{try{x(!0);let e=s.from("contact_messages").select("*",{count:"exact"});"all"!==h&&(e=e.eq("status",h)),"all"!==y&&(e=e.eq("priority",y)),j&&(e=e.or(`name.ilike.%${j}%,email.ilike.%${j}%,subject.ilike.%${j}%,message.ilike.%${j}%`));const{data:t,error:r,count:a}=await e.order("created_at",{ascending:!1}).range((m-1)*I,m*I-1);if(r)throw r;o(t||[]),p(Math.ceil((a||0)/I))}catch(e){}finally{x(!1)}},O=async()=>{try{x(!0);const{data:e,error:t,count:r}=await s.from("newsletter_subscribers").select("*",{count:"exact"}).order("subscribed_at",{ascending:!1}).range((m-1)*I,m*I-1);if(t)throw t;d(e||[]),p(Math.ceil((r||0)/I))}catch(e){}finally{x(!1)}},R=async()=>{try{const{data:e,error:t}=await s.from("maintenance_mode").select("*").single();if(t)throw t;S(e?.enabled||!1)}catch(e){}},M=async()=>{try{x(!0);const{data:e,error:t}=await s.from("admin_tasks").select("*").order("created_at",{ascending:!1}).range((m-1)*I,m*I-1);if(t)throw t;P(e||[])}catch(e){}finally{x(!1)}},q={total:l.length,newMessages:l.filter(e=>"new"===e.status).length,inProgress:l.filter(e=>"in_progress"===e.status).length,resolved:l.filter(e=>"resolved"===e.status).length,urgent:l.filter(e=>"urgent"===e.priority).length,unread:l.filter(e=>!e.read_at).length,withNewsletter:l.filter(e=>e.newsletter_subscribed).length},F=[{value:"new",label:"Nova",color:"yellow",icon:"ri-mail-line"},{value:"in_progress",label:"Em Progresso",color:"blue",icon:"ri-time-line"},{value:"waiting",label:"Aguardando",color:"purple",icon:"ri-hourglass-line"},{value:"resolved",label:"Resolvida",color:"green",icon:"ri-check-line"},{value:"closed",label:"Fechada",color:"gray",icon:"ri-close-line"}],L=[{value:"low",label:"Baixa",color:"gray",icon:"ri-arrow-down-line"},{value:"medium",label:"Média",color:"blue",icon:"ri-subtract-line"},{value:"high",label:"Alta",color:"yellow",icon:"ri-arrow-up-line"},{value:"urgent",label:"Urgente",color:"red",icon:"ri-alarm-warning-line"}],z={any:"Qualquer",email:"E-mail",phone:"Telefone",whatsapp:"WhatsApp"};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-customer-service-line text-yellow-500"}),"Gestão de Suporte Avançada"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Sistema completo de gestão de mensagens, newsletter e operações"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>{const e="messages"===t?l:n,r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download=`${t}-${Date.now()}.json`,s.click()},className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap cursor-pointer",children:[a.jsx("i",{className:"ri-download-line text-xl"}),"Exportar Dados"]})})]}),a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:[a.jsxs("button",{onClick:()=>{r("messages"),g(1)},className:"px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-all cursor-pointer "+("messages"===t?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-mail-line mr-2"}),"Mensagens de Contato"]}),a.jsxs("button",{onClick:()=>{r("newsletter"),g(1)},className:"px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-all cursor-pointer "+("newsletter"===t?"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-lg":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-mail-send-line mr-2"}),"Newsletter"]}),a.jsxs("button",{onClick:()=>{r("maintenance"),g(1)},className:"px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-all cursor-pointer "+("maintenance"===t?"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-lg":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-tools-line mr-2"}),"Modo Manutenção"]}),a.jsxs("button",{onClick:()=>{r("tasks"),g(1)},className:"px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-all cursor-pointer "+("tasks"===t?"bg-gradient-to-r from-purple-500 to-indigo-500 text-white shadow-lg":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-task-line mr-2"}),"Painel de Tarefas"]}),a.jsxs("button",{onClick:()=>{r("simulate"),g(1)},className:"px-6 py-3 rounded-lg font-medium whitespace-nowrap transition-all cursor-pointer "+("simulate"===t?"bg-gradient-to-r from-cyan-500 to-blue-500 text-white shadow-lg":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[a.jsx("i",{className:"ri-shopping-cart-2-line mr-2"}),"Simular Pedido"]})]}),"messages"===t&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-mail-line text-xl text-blue-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Total"}),a.jsx("p",{className:"text-2xl font-bold",children:q.total})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-mail-add-line text-xl text-yellow-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Novas"}),a.jsx("p",{className:"text-2xl font-bold",children:q.newMessages})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-mail-open-line text-xl text-purple-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Não Lidas"}),a.jsx("p",{className:"text-2xl font-bold",children:q.unread})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-cyan-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-time-line text-xl text-cyan-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Em Progresso"}),a.jsx("p",{className:"text-2xl font-bold",children:q.inProgress})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-check-line text-xl text-green-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Resolvidas"}),a.jsx("p",{className:"text-2xl font-bold",children:q.resolved})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-alarm-warning-line text-xl text-red-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Urgentes"}),a.jsx("p",{className:"text-2xl font-bold",children:q.urgent})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-mail-send-line text-xl text-orange-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Newsletter"}),a.jsx("p",{className:"text-2xl font-bold",children:q.withNewsletter})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("div",{className:"flex-1 min-w-[200px]",children:a.jsx("input",{type:"text",placeholder:"Buscar por nome, email, assunto ou mensagem...",value:j,onChange:e=>N(e.target.value),className:`w-full px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-200 text-gray-900"} border focus:outline-none focus:ring-2 focus:ring-yellow-500`})}),a.jsxs("select",{value:h,onChange:e=>b(e.target.value),className:`px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 cursor-pointer`,children:[a.jsx("option",{value:"all",children:"Todos Status"}),F.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),a.jsxs("select",{value:y,onChange:e=>f(e.target.value),className:`px-4 py-2 rounded-lg ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border focus:outline-none focus:ring-2 focus:ring-yellow-500 cursor-pointer`,children:[a.jsx("option",{value:"all",children:"Todas Prioridades"}),L.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]})]}),a.jsx("div",{className:`rounded-xl overflow-hidden ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin"})}):0===l.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"ri-mail-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Nenhuma mensagem encontrada"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliente"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Contato"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Assunto"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Método"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Prioridade"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Ações"})]})}),a.jsx("tbody",{children:l.map(t=>a.jsxs("tr",{className:`border-t ${e?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors ${t.read_at?"":"font-semibold"}`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("select",{value:t.status,onChange:e=>(async(e,t)=>{try{const{error:r}=await s.from("contact_messages").update({status:t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;await D()}catch(r){}})(t.id,e.target.value),className:"px-3 py-1 rounded-full text-xs font-medium border-none cursor-pointer "+("resolved"===t.status?"bg-green-500/20 text-green-500":"new"===t.status?"bg-yellow-500/20 text-yellow-500":"closed"===t.status?"bg-gray-500/20 text-gray-500":"waiting"===t.status?"bg-purple-500/20 text-purple-500":"bg-blue-500/20 text-blue-500"),children:F.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[!t.read_at&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:t.name}),t.newsletter_subscribed&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-orange-500",children:[a.jsx("i",{className:"ri-mail-send-line"}),"Newsletter"]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} flex items-center gap-1`,children:[a.jsx("i",{className:"ri-mail-line"}),t.email]}),t.phone&&a.jsxs("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} flex items-center gap-1`,children:[a.jsx("i",{className:"ri-phone-line"}),t.phone]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"font-medium",children:t.subject}),a.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:t.message})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+(e?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"),children:z[t.contact_method]||t.contact_method})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("select",{value:t.priority,onChange:e=>(async(e,t)=>{try{const{error:r}=await s.from("contact_messages").update({priority:t,updated_at:(new Date).toISOString()}).eq("id",e);if(r)throw r;await D()}catch(r){}})(t.id,e.target.value),className:"px-3 py-1 rounded-full text-xs font-medium border-none cursor-pointer "+("urgent"===t.priority?"bg-red-500/20 text-red-500":"high"===t.priority?"bg-yellow-500/20 text-yellow-500":"medium"===t.priority?"bg-blue-500/20 text-blue-500":"bg-gray-500/20 text-gray-500"),children:L.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:new Date(t.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{w(t),_(!0),t.read_at||(async e=>{try{const{error:t}=await s.from("contact_messages").update({read_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",e);if(t)throw t;await D()}catch(t){}})(t.id)},className:"p-2 rounded-lg bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 transition-colors cursor-pointer",title:"Ver detalhes",children:a.jsx("i",{className:"ri-eye-line"})}),a.jsx("a",{href:`mailto:${t.email}`,className:"p-2 rounded-lg bg-green-500/10 text-green-500 hover:bg-green-500/20 transition-colors",title:"Responder por e-mail",children:a.jsx("i",{className:"ri-reply-line"})}),t.phone&&a.jsx("a",{href:`tel:${t.phone}`,className:"p-2 rounded-lg bg-purple-500/10 text-purple-500 hover:bg-purple-500/20 transition-colors",title:"Ligar",children:a.jsx("i",{className:"ri-phone-line"})})]})})]},t.id))})]})})}),u>1&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Página ",m," de ",u," (",l.length," mensagens)"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>g(Math.max(1,m-1)),disabled:1===m,className:`px-4 py-2 rounded-lg ${1===m?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-white hover:bg-yellow-600 cursor-pointer"} transition-colors`,children:a.jsx("i",{className:"ri-arrow-left-line"})}),Array.from({length:Math.min(5,u)},(t,r)=>{const s=r+1;return a.jsx("button",{onClick:()=>g(s),className:`px-4 py-2 rounded-lg ${m===s?"bg-yellow-500 text-white":e?"bg-gray-800 text-gray-400 hover:bg-gray-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"} transition-colors cursor-pointer`,children:s},s)}),a.jsx("button",{onClick:()=>g(Math.min(u,m+1)),disabled:m===u,className:`px-4 py-2 rounded-lg ${m===u?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-white hover:bg-yellow-600 cursor-pointer"} transition-colors`,children:a.jsx("i",{className:"ri-arrow-right-line"})})]})]})]}),"newsletter"===t&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-user-add-line text-xl text-green-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Total Assinantes"}),a.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-check-line text-xl text-blue-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Ativos"}),a.jsx("p",{className:"text-2xl font-bold",children:n.filter(e=>"active"===e.status).length})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-mail-open-line text-xl text-yellow-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Taxa de Abertura"}),a.jsxs("p",{className:"text-2xl font-bold",children:[n.length>0?Math.round(n.reduce((e,t)=>e+t.email_opens,0)/n.length*100)/100:0,"%"]})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-cursor-line text-xl text-purple-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Taxa de Cliques"}),a.jsxs("p",{className:"text-2xl font-bold",children:[n.length>0?Math.round(n.reduce((e,t)=>e+t.email_clicks,0)/n.length*100)/100:0,"%"]})]})]}),a.jsx("div",{className:`rounded-xl overflow-hidden ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):0===n.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("i",{className:"ri-mail-send-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Nenhum assinante encontrado"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-800":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"E-mail"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Nome"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Origem"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Aberturas"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Cliques"}),a.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:"Data"})]})}),a.jsx("tbody",{children:n.map(t=>a.jsxs("tr",{className:`border-t ${e?"border-gray-800 hover:bg-gray-800":"border-gray-200 hover:bg-gray-50"} transition-colors`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("p",{className:"font-medium",children:t.email})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("p",{children:t.name||"-"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium "+("active"===t.status?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:"active"===t.status?"Ativo":"Inativo"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.source})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-medium",children:t.email_opens})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"font-medium",children:t.email_clicks})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:new Date(t.subscribed_at).toLocaleDateString("pt-BR")})})]},t.id))})]})})}),u>1&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Página ",m," de ",u]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>g(Math.max(1,m-1)),disabled:1===m,className:`px-4 py-2 rounded-lg ${1===m?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600 cursor-pointer"} transition-colors`,children:a.jsx("i",{className:"ri-arrow-left-line"})}),a.jsx("button",{onClick:()=>g(Math.min(u,m+1)),disabled:m===u,className:`px-4 py-2 rounded-lg ${m===u?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600 cursor-pointer"} transition-colors`,children:a.jsx("i",{className:"ri-arrow-right-line"})})]})]})]}),"maintenance"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-8 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Modo de Manutenção"}),a.jsx("p",{className:""+(e?"text-gray-400":"text-gray-600"),children:"Ative para exibir uma página de manutenção aos visitantes"})]}),a.jsx("button",{onClick:async()=>{try{const{error:e}=await s.from("maintenance_mode").update({enabled:!C,updated_at:(new Date).toISOString()}).eq("id",(await s.from("maintenance_mode").select("id").single()).data?.id);if(e)throw e;S(!C)}catch(e){}},className:"px-8 py-4 rounded-lg font-bold text-lg transition-all cursor-pointer "+(C?"bg-gradient-to-r from-red-500 to-pink-500 text-white hover:opacity-90":"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:opacity-90"),children:C?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"ri-close-circle-line text-2xl"}),"Desativar Manutenção"]}):a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"ri-tools-line text-2xl"}),"Ativar Manutenção"]})})]}),a.jsx("div",{className:"p-6 rounded-lg "+(C?"bg-red-500/10 border-2 border-red-500":"bg-green-500/10 border-2 border-green-500"),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"text-3xl "+(C?"ri-error-warning-line text-red-500":"ri-check-line text-green-500")}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-lg",children:C?"Site em Modo de Manutenção":"Site Operacional"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:C?"Os visitantes verão uma página de manutenção. Apenas administradores podem acessar.":"O site está funcionando normalmente para todos os visitantes."})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("h4",{className:"font-bold text-lg mb-4",children:"Quando Usar?"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Atualizações importantes do sistema"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Manutenção de servidor ou banco de dados"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Implementação de novas funcionalidades"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Correção de problemas críticos"})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("h4",{className:"font-bold text-lg mb-4",children:"Dicas Importantes"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-lightbulb-line text-yellow-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Avise os clientes com antecedência"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-lightbulb-line text-yellow-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Escolha horários de menor tráfego"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-lightbulb-line text-yellow-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Mantenha a manutenção o mais breve possível"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-lightbulb-line text-yellow-500 text-xl mt-0.5"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Teste tudo antes de desativar o modo"})]})]})]})]})]}),"tasks"===t&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Painel de Tarefas da Equipe"}),a.jsxs("button",{onClick:()=>E(!0),className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-medium rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap cursor-pointer",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Tarefa"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-yellow-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-time-line text-xl text-yellow-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Pendentes"}),a.jsx("p",{className:"text-2xl font-bold",children:$.filter(e=>"pending"===e.status).length})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-play-line text-xl text-blue-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Em Progresso"}),a.jsx("p",{className:"text-2xl font-bold",children:$.filter(e=>"in_progress"===e.status).length})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-check-line text-xl text-green-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Concluídas"}),a.jsx("p",{className:"text-2xl font-bold",children:$.filter(e=>"completed"===e.status).length})]}),a.jsxs("div",{className:`p-4 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center mb-3",children:a.jsx("i",{className:"ri-list-check text-xl text-purple-500"})}),a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Total"}),a.jsx("p",{className:"text-2xl font-bold",children:$.length})]})]}),a.jsxs("div",{className:`p-8 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"} text-center`,children:[a.jsx("i",{className:"ri-task-line text-6xl text-gray-600 mb-4"}),a.jsx("p",{className:"text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Sistema de tarefas em desenvolvimento"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Em breve você poderá gerenciar todas as tarefas da equipe aqui"})]})]}),"simulate"===t&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:`p-8 rounded-xl ${e?"bg-gray-900":"bg-gray-50"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("i",{className:"ri-shopping-cart-2-line text-6xl text-cyan-500 mb-4"}),a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Simulador de Pedidos"}),a.jsx("p",{className:""+(e?"text-gray-400":"text-gray-600"),children:"Teste o fluxo completo de compra do seu e-commerce"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("button",{onClick:()=>T(!0),className:"p-6 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 text-white hover:opacity-90 transition-opacity cursor-pointer",children:[a.jsx("i",{className:"ri-shopping-bag-line text-4xl mb-3"}),a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Pedido Simples"}),a.jsx("p",{className:"text-sm opacity-90",children:"1 produto, pagamento único"})]}),a.jsxs("button",{onClick:()=>T(!0),className:"p-6 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 text-white hover:opacity-90 transition-opacity cursor-pointer",children:[a.jsx("i",{className:"ri-shopping-cart-line text-4xl mb-3"}),a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Pedido Múltiplo"}),a.jsx("p",{className:"text-sm opacity-90",children:"Vários produtos, envio calculado"})]}),a.jsxs("button",{onClick:()=>T(!0),className:"p-6 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 text-white hover:opacity-90 transition-opacity cursor-pointer",children:[a.jsx("i",{className:"ri-gift-line text-4xl mb-3"}),a.jsx("h4",{className:"font-bold text-lg mb-2",children:"Com Cupom"}),a.jsx("p",{className:"text-sm opacity-90",children:"Teste descontos e promoções"})]})]}),a.jsxs("div",{className:"mt-8 p-6 rounded-lg "+(e?"bg-gray-800":"bg-white"),children:[a.jsx("h4",{className:"font-bold mb-4",children:"O que será testado:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Cálculo de envio"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Processamento de pagamento"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Aplicação de cupons"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Envio de e-mails"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Atualização de stock"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-check-line text-green-500 text-xl"}),a.jsx("span",{className:e?"text-gray-400":"text-gray-600",children:"Geração de fatura"})]})]})]})]})}),k&&v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:`sticky top-0 ${e?"bg-gray-900":"bg-white"} border-b ${e?"border-gray-800":"border-gray-200"} p-6 flex items-center justify-between`,children:[a.jsx("h3",{className:"text-2xl font-bold",children:"Detalhes da Mensagem"}),a.jsx("button",{onClick:()=>_(!1),className:"p-2 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx("i",{className:"ri-user-line text-blue-500"}),"Informações do Cliente"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Nome"}),a.jsx("p",{className:"font-medium",children:v.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"E-mail"}),a.jsx("p",{className:"font-medium",children:v.email})]}),v.phone&&a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Telefone"}),a.jsx("p",{className:"font-medium",children:v.phone})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Método de Contato Preferido"}),a.jsx("p",{className:"font-medium",children:z[v.contact_method]})]})]})]}),a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx("i",{className:"ri-message-3-line text-yellow-500"}),"Mensagem"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Assunto"}),a.jsx("p",{className:"font-medium text-lg",children:v.subject})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Conteúdo"}),a.jsx("p",{className:(e?"text-gray-300":"text-gray-700")+" whitespace-pre-wrap",children:v.message})]})]})]}),a.jsxs("div",{className:"p-4 rounded-xl "+(e?"bg-gray-800":"bg-gray-50"),children:[a.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",children:[a.jsx("i",{className:"ri-information-line text-purple-500"}),"Informações Adicionais"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Data de Envio"}),a.jsx("p",{className:"font-medium",children:new Date(v.created_at).toLocaleString("pt-BR")})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Origem"}),a.jsx("p",{className:"font-medium",children:v.source})]}),v.ip_address&&a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"IP"}),a.jsx("p",{className:"font-medium font-mono text-sm",children:v.ip_address})]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Newsletter"}),a.jsx("p",{className:"font-medium",children:v.newsletter_subscribed?a.jsx("span",{className:"text-green-500",children:"✓ Inscrito"}):a.jsx("span",{className:"text-gray-500",children:"✗ Não inscrito"})})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("a",{href:`mailto:${v.email}`,className:"flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-medium rounded-lg hover:opacity-90 transition-opacity text-center",children:[a.jsx("i",{className:"ri-reply-line mr-2"}),"Responder por E-mail"]}),v.phone&&a.jsxs("a",{href:`tel:${v.phone}`,className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-medium rounded-lg hover:opacity-90 transition-opacity text-center",children:[a.jsx("i",{className:"ri-phone-line mr-2"}),"Ligar"]})]})]})]})})]})}const w=[{code:"PT",name:"Portugal",flag:"🇵🇹"},{code:"ES",name:"Espanha",flag:"🇪🇸"},{code:"FR",name:"França",flag:"🇫🇷"},{code:"DE",name:"Alemanha",flag:"🇩🇪"},{code:"IT",name:"Itália",flag:"🇮🇹"},{code:"UK",name:"Reino Unido",flag:"🇬🇧"},{code:"NL",name:"Holanda",flag:"🇳🇱"},{code:"BE",name:"Bélgica",flag:"🇧🇪"},{code:"AT",name:"Áustria",flag:"🇦🇹"},{code:"CH",name:"Suíça",flag:"🇨🇭"},{code:"IE",name:"Irlanda",flag:"🇮🇪"},{code:"DK",name:"Dinamarca",flag:"🇩🇰"},{code:"SE",name:"Suécia",flag:"🇸🇪"},{code:"NO",name:"Noruega",flag:"🇳🇴"},{code:"FI",name:"Finlândia",flag:"🇫🇮"},{code:"PL",name:"Polónia",flag:"🇵🇱"},{code:"CZ",name:"República Checa",flag:"🇨🇿"},{code:"GR",name:"Grécia",flag:"🇬🇷"},{code:"HU",name:"Hungria",flag:"🇭🇺"},{code:"RO",name:"Roménia",flag:"🇷🇴"}],k=[{value:"standard",label:"📦 Standard",description:"Entrega normal"},{value:"express",label:"⚡ Express",description:"Entrega rápida"},{value:"priority",label:"🚀 Priority",description:"Entrega prioritária"},{value:"economy",label:"💰 Economy",description:"Entrega económica"}];function _(){const[e,t]=i.useState([]),[r,l]=i.useState(!0),[o,n]=i.useState(!1),[d,c]=i.useState(null),[x,m]=i.useState(""),[g,u]=i.useState("all"),[p,h]=i.useState("all"),[b,y]=i.useState("all"),[f,j]=i.useState({name:"",country:"",country_code:"",method:"standard",base_cost:0,cost_per_kg:0,free_shipping_threshold:null,min_delivery_days:3,max_delivery_days:7,active:!0,priority:1,weight_based:!0});i.useEffect(()=>{N()},[]);const N=async()=>{try{l(!0);const{data:e,error:r}=await s.from("shipping_rules").select("*").order("priority",{ascending:!0});if(r)throw r;t(e||[])}catch(e){}finally{l(!1)}},v=()=>{j({name:"",country:"",country_code:"",method:"standard",base_cost:0,cost_per_kg:0,free_shipping_threshold:null,min_delivery_days:3,max_delivery_days:7,active:!0,priority:1,weight_based:!0})},_=e.filter(e=>{const t=e.name.toLowerCase().includes(x.toLowerCase())||e.country.toLowerCase().includes(x.toLowerCase()),r="all"===g||e.country_code===g,a="all"===p||e.method===p,s="all"===b||"active"===b&&e.active||"inactive"===b&&!e.active;return t&&r&&a&&s}),C={total:e.length,active:e.filter(e=>e.active).length,countries:new Set(e.map(e=>e.country_code)).size,freeShipping:e.filter(e=>null!==e.free_shipping_threshold).length};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Carregando regras de envio..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-truck-line text-blue-600"}),"Gestão de Envios Inteligente"]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure taxas de envio por país da Europa com cálculo automático"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("i",{className:"ri-file-list-3-line text-3xl opacity-80"}),a.jsx("span",{className:"text-2xl font-bold",children:C.total})]}),a.jsx("h3",{className:"font-semibold",children:"Total de Regras"}),a.jsx("p",{className:"text-sm opacity-90",children:"Todas cadastradas"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("i",{className:"ri-checkbox-circle-line text-3xl opacity-80"}),a.jsx("span",{className:"text-2xl font-bold",children:C.active})]}),a.jsx("h3",{className:"font-semibold",children:"Regras Ativas"}),a.jsx("p",{className:"text-sm opacity-90",children:"Em funcionamento"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("i",{className:"ri-map-2-line text-3xl opacity-80"}),a.jsx("span",{className:"text-2xl font-bold",children:C.countries})]}),a.jsx("h3",{className:"font-semibold",children:"Países Cobertos"}),a.jsx("p",{className:"text-sm opacity-90",children:"Europa disponível"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl p-6 text-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("i",{className:"ri-gift-line text-3xl opacity-80"}),a.jsx("span",{className:"text-2xl font-bold",children:C.freeShipping})]}),a.jsx("h3",{className:"font-semibold",children:"Envio Grátis"}),a.jsx("p",{className:"text-sm opacity-90",children:"Regras configuradas"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou país...",value:x,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs("select",{value:g,onChange:e=>u(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 whitespace-nowrap",children:[a.jsx("option",{value:"all",children:"🌍 Todos os Países"}),w.map(e=>a.jsxs("option",{value:e.code,children:[e.flag," ",e.name]},e.code))]}),a.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 whitespace-nowrap",children:[a.jsx("option",{value:"all",children:"📦 Todos os Métodos"}),k.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),a.jsxs("select",{value:b,onChange:e=>y(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 whitespace-nowrap",children:[a.jsx("option",{value:"all",children:"📊 Todos os Status"}),a.jsx("option",{value:"active",children:"✅ Ativos"}),a.jsx("option",{value:"inactive",children:"❌ Inativos"})]}),a.jsxs("button",{onClick:()=>{v(),c(null),n(!0)},className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg font-semibold transition-all duration-200 flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line text-xl"}),"Nova Regra"]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"País"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Método"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Custo Base"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Por Kg"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Envio Grátis"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Prazo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Prioridade"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",children:"Ações"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===_.length?a.jsx("tr",{children:a.jsxs("td",{colSpan:9,className:"px-6 py-12 text-center",children:[a.jsx("i",{className:"ri-inbox-line text-6xl text-gray-300 dark:text-gray-600 mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:x||"all"!==g||"all"!==p||"all"!==b?"Nenhuma regra encontrada com os filtros aplicados":"Nenhuma regra de envio cadastrada"}),a.jsx("button",{onClick:()=>{v(),c(null),n(!0)},className:"mt-4 px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg font-semibold transition-all duration-200 whitespace-nowrap",children:"Criar Primeira Regra"})]})}):_.map(e=>{const t=w.find(t=>t.code===e.country_code),r=k.find(t=>t.value===e.method);return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:t?.flag}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e.country}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.country_code})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:r?.label.split(" ")[0]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r?.label.split(" ")[1]}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.description})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["€",e.base_cost.toFixed(2)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.weight_based?a.jsxs("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["€",e.cost_per_kg.toFixed(2),"/kg"]}):a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.free_shipping_threshold?a.jsxs("div",{className:"flex items-center gap-1 text-yellow-600 dark:text-yellow-400",children:[a.jsx("i",{className:"ri-gift-line"}),a.jsxs("span",{className:"font-semibold",children:["€",e.free_shipping_threshold.toFixed(2)]})]}):a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-1 text-gray-700 dark:text-gray-300",children:[a.jsx("i",{className:"ri-time-line"}),a.jsxs("span",{className:"font-medium",children:[e.min_delivery_days,"-",e.max_delivery_days," dias"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-semibold bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300",children:["#",e.priority]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("button",{onClick:()=>(async e=>{try{const{error:t}=await s.from("shipping_rules").update({active:!e.active}).eq("id",e.id);if(t)throw t;N()}catch(t){alert("❌ Erro ao alternar status")}})(e),className:"px-3 py-1 rounded-full text-sm font-semibold transition-all duration-200 "+(e.active?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800"),children:e.active?"✅ Ativo":"❌ Inativo"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>(e=>{c(e),j({name:e.name,country:e.country,country_code:e.country_code,method:e.method,base_cost:e.base_cost,cost_per_kg:e.cost_per_kg,free_shipping_threshold:e.free_shipping_threshold,min_delivery_days:e.min_delivery_days,max_delivery_days:e.max_delivery_days,active:e.active,priority:e.priority,weight_based:e.weight_based}),n(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Editar",children:a.jsx("i",{className:"ri-edit-line text-xl"})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("⚠️ Tem certeza que deseja deletar esta regra?"))try{const{error:t}=await s.from("shipping_rules").delete().eq("id",e);if(t)throw t;alert("✅ Regra deletada com sucesso!"),N()}catch(t){alert("❌ Erro ao deletar regra")}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Deletar",children:a.jsx("i",{className:"ri-delete-bin-line text-xl"})})]})})]},e.id)})})]})})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:d?"✏️ Editar Regra de Envio":"➕ Nova Regra de Envio"}),a.jsx("button",{onClick:()=>{n(!1),c(null),v()},className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(d){const{error:e}=await s.from("shipping_rules").update(f).eq("id",d.id);if(e)throw e;alert("✅ Regra atualizada com sucesso!")}else{const{error:e}=await s.from("shipping_rules").insert([f]);if(e)throw e;alert("✅ Regra criada com sucesso!")}n(!1),c(null),v(),N()}catch(t){alert("❌ Erro ao salvar regra")}},className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"🌍 País *"}),a.jsxs("select",{value:f.country_code,onChange:e=>(e=>{const t=w.find(t=>t.code===e);t&&j({...f,country:t.name,country_code:e,name:`${t.name} - ${k.find(e=>e.value===f.method)?.label||"Standard"}`})})(e.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Selecione um país"}),w.map(e=>a.jsxs("option",{value:e.code,children:[e.flag," ",e.name]},e.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"📦 Método de Envio *"}),a.jsx("select",{value:f.method,onChange:e=>(e=>{const t=w.find(e=>e.code===f.country_code);j({...f,method:e,name:t?`${t.name} - ${k.find(t=>t.value===e)?.label||"Standard"}`:""})})(e.target.value),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:k.map(e=>a.jsxs("option",{value:e.value,children:[e.label," - ",e.description]},e.value))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"📝 Nome da Regra *"}),a.jsx("input",{type:"text",value:f.name,onChange:e=>j({...f,name:e.target.value}),required:!0,placeholder:"Ex: Portugal - Express",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"💰 Custo Base (€) *"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:f.base_cost,onChange:e=>j({...f,base_cost:parseFloat(e.target.value)||0}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Custo fixo de envio"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"⚖️ Custo por Kg (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:f.cost_per_kg,onChange:e=>j({...f,cost_per_kg:parseFloat(e.target.value)||0}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Custo adicional por kg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"🎁 Envio Grátis Acima (€)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:f.free_shipping_threshold||"",onChange:e=>j({...f,free_shipping_threshold:e.target.value?parseFloat(e.target.value):null}),placeholder:"Opcional",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Valor mínimo para envio grátis"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"📅 Prazo Mínimo (dias) *"}),a.jsx("input",{type:"number",min:"1",value:f.min_delivery_days,onChange:e=>j({...f,min_delivery_days:parseInt(e.target.value)||1}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"📅 Prazo Máximo (dias) *"}),a.jsx("input",{type:"number",min:"1",value:f.max_delivery_days,onChange:e=>j({...f,max_delivery_days:parseInt(e.target.value)||1}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"🎯 Prioridade *"}),a.jsx("input",{type:"number",min:"1",value:f.priority,onChange:e=>j({...f,priority:parseInt(e.target.value)||1}),required:!0,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Ordem de exibição (menor = primeiro)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"⚙️ Configurações"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:f.weight_based,onChange:e=>j({...f,weight_based:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Baseado em peso"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:f.active,onChange:e=>j({...f,active:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Ativar regra"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[a.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-eye-line"}),"Preview da Regra"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"País:"}),a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[w.find(e=>e.code===f.country_code)?.flag," ",f.country||"-"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Método:"}),a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:k.find(e=>e.value===f.method)?.label||"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo Base:"}),a.jsxs("p",{className:"font-semibold text-green-600 dark:text-green-400",children:["€",f.base_cost.toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Custo por Kg:"}),a.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-400",children:f.weight_based?`€${f.cost_per_kg.toFixed(2)}/kg`:"Não aplicável"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Envio Grátis:"}),a.jsx("p",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:f.free_shipping_threshold?`Acima de €${f.free_shipping_threshold.toFixed(2)}`:"Não configurado"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Prazo:"}),a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[f.min_delivery_days,"-",f.max_delivery_days," dias úteis"]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:()=>{n(!1),c(null),v()},className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors whitespace-nowrap",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg font-semibold transition-all duration-200 whitespace-nowrap",children:d?"💾 Salvar Alterações":"✅ Criar Regra"})]})]})]})})]})}const C=[{name:"Portugal",code:"PT",defaultVat:23,reducedVat:[13,6]},{name:"Espanha",code:"ES",defaultVat:21,reducedVat:[10,4]},{name:"França",code:"FR",defaultVat:20,reducedVat:[10,5.5,2.1]},{name:"Alemanha",code:"DE",defaultVat:19,reducedVat:[7]},{name:"Itália",code:"IT",defaultVat:22,reducedVat:[10,5,4]},{name:"Bélgica",code:"BE",defaultVat:21,reducedVat:[12,6]},{name:"Holanda",code:"NL",defaultVat:21,reducedVat:[9]},{name:"Luxemburgo",code:"LU",defaultVat:17,reducedVat:[14,8,3]},{name:"Áustria",code:"AT",defaultVat:20,reducedVat:[13,10]},{name:"Grécia",code:"GR",defaultVat:24,reducedVat:[13,6]},{name:"Polónia",code:"PL",defaultVat:23,reducedVat:[8,5]},{name:"República Checa",code:"CZ",defaultVat:21,reducedVat:[15,10]},{name:"Hungria",code:"HU",defaultVat:27,reducedVat:[18,5]},{name:"Roménia",code:"RO",defaultVat:19,reducedVat:[9,5]},{name:"Bulgária",code:"BG",defaultVat:20,reducedVat:[9]},{name:"Croácia",code:"HR",defaultVat:25,reducedVat:[13,5]},{name:"Eslováquia",code:"SK",defaultVat:20,reducedVat:[10]},{name:"Eslovénia",code:"SI",defaultVat:22,reducedVat:[9.5]},{name:"Estónia",code:"EE",defaultVat:20,reducedVat:[9]},{name:"Letónia",code:"LV",defaultVat:21,reducedVat:[12,5]},{name:"Lituânia",code:"LT",defaultVat:21,reducedVat:[9,5]},{name:"Dinamarca",code:"DK",defaultVat:25,reducedVat:[]},{name:"Suécia",code:"SE",defaultVat:25,reducedVat:[12,6]},{name:"Finlândia",code:"FI",defaultVat:24,reducedVat:[14,10]},{name:"Irlanda",code:"IE",defaultVat:23,reducedVat:[13.5,9,4.8]},{name:"Chipre",code:"CY",defaultVat:19,reducedVat:[9,5]},{name:"Malta",code:"MT",defaultVat:18,reducedVat:[7,5]},{name:"Reino Unido",code:"GB",defaultVat:20,reducedVat:[5]},{name:"Suíça",code:"CH",defaultVat:7.7,reducedVat:[3.7,2.5]},{name:"Noruega",code:"NO",defaultVat:25,reducedVat:[15,12]},{name:"Islândia",code:"IS",defaultVat:24,reducedVat:[11]},{name:"Estados Unidos",code:"US",defaultVat:0,reducedVat:[]},{name:"Canadá",code:"CA",defaultVat:5,reducedVat:[]},{name:"México",code:"MX",defaultVat:16,reducedVat:[8]},{name:"Brasil",code:"BR",defaultVat:17,reducedVat:[12,7]},{name:"Argentina",code:"AR",defaultVat:21,reducedVat:[10.5]},{name:"Chile",code:"CL",defaultVat:19,reducedVat:[]},{name:"Colômbia",code:"CO",defaultVat:19,reducedVat:[5]},{name:"Peru",code:"PE",defaultVat:18,reducedVat:[]},{name:"Uruguai",code:"UY",defaultVat:22,reducedVat:[10]},{name:"China",code:"CN",defaultVat:13,reducedVat:[9,6]},{name:"Japão",code:"JP",defaultVat:10,reducedVat:[8]},{name:"Coreia do Sul",code:"KR",defaultVat:10,reducedVat:[]},{name:"Índia",code:"IN",defaultVat:18,reducedVat:[12,5]},{name:"Singapura",code:"SG",defaultVat:8,reducedVat:[]},{name:"Tailândia",code:"TH",defaultVat:7,reducedVat:[]},{name:"Malásia",code:"MY",defaultVat:0,reducedVat:[]},{name:"Indonésia",code:"ID",defaultVat:11,reducedVat:[]},{name:"Filipinas",code:"PH",defaultVat:12,reducedVat:[]},{name:"Vietname",code:"VN",defaultVat:10,reducedVat:[5]},{name:"Austrália",code:"AU",defaultVat:10,reducedVat:[]},{name:"Nova Zelândia",code:"NZ",defaultVat:15,reducedVat:[]},{name:"África do Sul",code:"ZA",defaultVat:15,reducedVat:[]},{name:"Marrocos",code:"MA",defaultVat:20,reducedVat:[14,10,7]},{name:"Egito",code:"EG",defaultVat:14,reducedVat:[]},{name:"Nigéria",code:"NG",defaultVat:7.5,reducedVat:[]},{name:"Quénia",code:"KE",defaultVat:16,reducedVat:[]},{name:"Emirados Árabes Unidos",code:"AE",defaultVat:5,reducedVat:[]},{name:"Arábia Saudita",code:"SA",defaultVat:15,reducedVat:[]},{name:"Israel",code:"IL",defaultVat:17,reducedVat:[]},{name:"Turquia",code:"TR",defaultVat:18,reducedVat:[8,1]},{name:"Rússia",code:"RU",defaultVat:20,reducedVat:[10]},{name:"Ucrânia",code:"UA",defaultVat:20,reducedVat:[7]}];function S(){const[e,t]=i.useState([]),[r,l]=i.useState(!0),[o,n]=i.useState(!1),[d,c]=i.useState(null),[x,m]=i.useState(!0),[g,u]=i.useState(""),[p,h]=i.useState({name:"",country:"",rate:0,type:"IVA",is_active:!0,is_default:!1});i.useEffect(()=>{b(),y()},[]);const b=async()=>{try{const{data:e,error:r}=await s.from("tax_settings").select("*").order("created_at",{ascending:!1});if(r)throw r;const a=(e||[]).map(e=>({id:e.id,name:e.name||e.tax_name||"Sem nome",country:e.country||e.region||"Não especificado",rate:e.rate||e.tax_rate||0,type:e.type||"IVA",is_active:void 0===e.is_active||e.is_active,is_default:e.is_default||!1,created_at:e.created_at}));t(a)}catch(e){}finally{l(!1)}},y=async()=>{try{const{data:e,error:t}=await s.from("site_settings").select("value").eq("key","global_vat_enabled").single();if(t&&"PGRST116"!==t.code)throw t;m("true"===e?.value||!0===e?.value)}catch(e){}},f=()=>{h({name:"",country:"",rate:0,type:"IVA",is_active:!0,is_default:!1})},j=C.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.code.toLowerCase().includes(g.toLowerCase())),N={total:e.length,active:e.filter(e=>e.is_active).length,countries:new Set(e.map(e=>e.country)).size,avgRate:e.length>0?(e.reduce((e,t)=>e+t.rate,0)/e.length).toFixed(1):"0"};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx("i",{className:"ri-loader-4-line text-4xl text-yellow-500 animate-spin"}),a.jsx("p",{className:"text-gray-400",children:"A carregar regras de IVA..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-percent-line text-yellow-500"}),"Gestão de IVA / TVA / Impostos"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Configure taxas de IVA por país e categoria de produto"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-gray-800 px-4 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium",children:"IVA/TVA Global:"}),a.jsx("button",{onClick:async()=>{try{const e=!x,{error:t}=await s.from("site_settings").upsert({key:"global_vat_enabled",value:String(e),updated_at:(new Date).toISOString()});if(t)throw t;m(e),alert(e?"IVA/TVA ativado globalmente!":"IVA/TVA desativado globalmente!")}catch(e){alert("Erro ao atualizar configuração de IVA")}},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(x?"bg-green-500":"bg-gray-600"),children:a.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(x?"translate-x-6":"translate-x-1")})}),a.jsx("span",{className:"text-sm font-bold "+(x?"text-green-500":"text-red-500"),children:x?"ATIVO":"DESATIVADO"})]}),a.jsxs("button",{onClick:()=>{n(!0),c(null),f()},className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity flex items-center gap-2 whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line"}),"Nova Regra de IVA"]})]})]}),!x&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-alert-line text-red-500 text-xl mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-red-500",children:"⚠️ IVA/TVA Desativado Globalmente"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Nenhum imposto será calculado nos produtos e checkout. Ative o IVA/TVA global acima para começar a cobrar impostos."})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-file-list-3-line text-2xl text-blue-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total de Regras"}),a.jsx("p",{className:"text-2xl font-bold",children:N.total})]})]})}),a.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-checkbox-circle-line text-2xl text-green-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Regras Ativas"}),a.jsx("p",{className:"text-2xl font-bold",children:N.active})]})]})}),a.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-global-line text-2xl text-purple-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Países Configurados"}),a.jsx("p",{className:"text-2xl font-bold",children:N.countries})]})]})}),a.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-percent-line text-2xl text-yellow-500"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Taxa Média"}),a.jsxs("p",{className:"text-2xl font-bold",children:[N.avgRate,"%"]})]})]})})]}),a.jsx("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:"ri-information-line text-blue-500 text-xl mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-blue-500",children:"✅ Sistema IOSS Ready - Conformidade Total UE"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"O sistema está 100% preparado para o regime IOSS (Import One-Stop Shop) da União Europeia:"}),a.jsxs("ul",{className:"text-sm text-gray-400 mt-2 space-y-1 ml-4",children:[a.jsx("li",{children:"✅ Cálculo automático de IVA por país de destino"}),a.jsx("li",{children:"✅ Breakdown detalhado de impostos no checkout"}),a.jsx("li",{children:"✅ Suporte a dropshipping dentro e fora da UE"}),a.jsx("li",{children:"✅ Conformidade legal automática com regulamentos fiscais"}),a.jsx("li",{children:"✅ Relatórios prontos para declaração de IVA"})]})]})]})}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-earth-line text-blue-500"}),"Países Disponíveis (",C.length,")"]}),a.jsxs("div",{className:"relative",children:[a.jsx("i",{className:"ri-search-line absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Pesquisar país...",value:g,onChange:e=>u(e.target.value),className:"bg-gray-700 text-white pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-96 overflow-y-auto",children:j.map(t=>{const r=e.some(e=>e.country===t.name);return a.jsxs("div",{className:"bg-gray-700 rounded-lg p-3 flex items-center justify-between hover:bg-gray-600 transition-colors "+(r?"border-2 border-green-500/30":""),children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:t.name}),r&&a.jsx("span",{className:"text-xs bg-green-500/20 text-green-500 px-2 py-0.5 rounded",children:"Configurado"})]}),a.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[a.jsx("span",{className:"font-mono",children:t.code}),a.jsx("span",{className:"mx-2",children:"•"}),a.jsxs("span",{children:["IVA Padrão: ",t.defaultVat,"%"]})]}),t.reducedVat.length>0&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Taxas Reduzidas: ",t.reducedVat.join("%, "),"%"]})]}),!r&&a.jsxs("button",{onClick:()=>(e=>{h({name:`${"PT"===e.code?"IVA":"FR"===e.code?"TVA":"VAT"} ${e.name} (Padrão)`,country:e.name,rate:e.defaultVat,type:"PT"===e.code?"IVA":"FR"===e.code?"TVA":"VAT",is_active:!0,is_default:!0}),n(!0)})(t),className:"ml-3 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm whitespace-nowrap transition-colors",children:[a.jsx("i",{className:"ri-add-line mr-1"}),"Criar Regra"]})]},t.code)})})]}),a.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Nome da Regra"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"País"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Taxa"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Padrão"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:0===e.length?a.jsx("tr",{children:a.jsxs("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:[a.jsx("i",{className:"ri-inbox-line text-4xl mb-2"}),a.jsx("p",{children:"Nenhuma regra de IVA configurada"}),a.jsx("p",{className:"text-sm mt-1",children:'Clique em "Nova Regra de IVA" ou escolha um país acima para começar'})]})}):e.map(e=>a.jsxs("tr",{className:"hover:bg-gray-700/50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"ri-money-euro-circle-line text-yellow-500"}),a.jsx("span",{className:"font-medium",children:e.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-gray-300",children:e.country})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"font-mono font-bold text-yellow-500",children:[e.rate,"%"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-gray-300",children:e.type})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_active?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-500/20 text-green-500",children:[a.jsx("i",{className:"ri-checkbox-circle-line"}),"Ativo"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-gray-600 text-gray-400",children:[a.jsx("i",{className:"ri-close-circle-line"}),"Inativo"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_default&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-500/20 text-blue-500",children:[a.jsx("i",{className:"ri-star-fill"}),"Padrão"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:[a.jsx("button",{onClick:()=>(e=>{c(e),h({name:e.name,country:e.country,rate:e.rate,type:e.type,is_active:e.is_active,is_default:e.is_default}),n(!0)})(e),className:"text-blue-500 hover:text-blue-400 mr-3 transition-colors",title:"Editar",children:a.jsx("i",{className:"ri-edit-line text-lg"})}),a.jsx("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir esta regra de IVA?"))try{const{error:t}=await s.from("tax_settings").delete().eq("id",e);if(t)throw t;alert("Regra de IVA excluída com sucesso!"),b()}catch(t){alert("Erro ao excluir regra de IVA")}})(e.id),className:"text-red-500 hover:text-red-400 transition-colors",title:"Excluir",children:a.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]},e.id))})]})})}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[a.jsx("i",{className:"ri-percent-line text-yellow-500"}),d?"Editar Regra de IVA":"Nova Regra de IVA"]}),a.jsx("button",{onClick:()=>{n(!1),c(null),f()},className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{const e={name:p.name,tax_name:p.name,country:p.country,region:p.country,rate:p.rate,tax_rate:p.rate,type:p.type,is_active:p.is_active,is_default:p.is_default};if(d){const{error:t}=await s.from("tax_settings").update(e).eq("id",d.id);if(t)throw t;alert("Regra de IVA atualizada com sucesso!")}else{const{error:t}=await s.from("tax_settings").insert([e]);if(t)throw t;alert("Regra de IVA criada com sucesso!")}n(!1),c(null),f(),b()}catch(t){alert("Erro ao salvar regra de IVA")}},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Nome da Regra *"}),a.jsx("input",{type:"text",value:p.name,onChange:e=>h({...p,name:e.target.value}),className:"w-full bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Ex: IVA Portugal Padrão",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"País *"}),a.jsxs("select",{value:p.country,onChange:e=>h({...p,country:e.target.value}),className:"w-full bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione um país"}),C.map(e=>a.jsxs("option",{value:e.name,children:[e.name," (",e.code,") - ",e.defaultVat,"%"]},e.code))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Taxa de IVA (%) *"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:p.rate,onChange:e=>h({...p,rate:parseFloat(e.target.value)}),className:"w-full bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Ex: 23",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tipo de Imposto *"}),a.jsxs("select",{value:p.type,onChange:e=>h({...p,type:e.target.value}),className:"w-full bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0,children:[a.jsx("option",{value:"IVA",children:"IVA (Imposto sobre Valor Acrescentado)"}),a.jsx("option",{value:"TVA",children:"TVA (Taxe sur la Valeur Ajoutée)"}),a.jsx("option",{value:"VAT",children:"VAT (Value Added Tax)"}),a.jsx("option",{value:"GST",children:"GST (Goods and Services Tax)"}),a.jsx("option",{value:"Sales Tax",children:"Sales Tax"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:p.is_active,onChange:e=>h({...p,is_active:e.target.checked}),className:"w-4 h-4 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500"}),a.jsx("span",{className:"text-sm",children:"Regra Ativa"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:p.is_default,onChange:e=>h({...p,is_default:e.target.checked}),className:"w-4 h-4 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500"}),a.jsx("span",{className:"text-sm",children:"Definir como Padrão"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap",children:d?"Atualizar Regra":"Criar Regra"}),a.jsx("button",{type:"button",onClick:()=>{n(!1),c(null),f()},className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors whitespace-nowrap",children:"Cancelar"})]})]})]})})})]})}const $={modern:{name:"🌟 Moderno (Azul)",light:{primary:"#3b82f6",secondary:"#1e40af",accent:"#60a5fa",background:"#ffffff",surface:"#f8fafc",text:"#1e293b",textSecondary:"#64748b",border:"#e2e8f0",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#94a3b8",border:"#334155",success:"#34d399",warning:"#fbbf24",error:"#f87171"}},elegant:{name:"💎 Elegante (Roxo)",light:{primary:"#8b5cf6",secondary:"#6d28d9",accent:"#a78bfa",background:"#ffffff",surface:"#faf5ff",text:"#1f2937",textSecondary:"#6b7280",border:"#e5e7eb",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#a78bfa",secondary:"#8b5cf6",accent:"#c4b5fd",background:"#18181b",surface:"#27272a",text:"#fafafa",textSecondary:"#a1a1aa",border:"#3f3f46",success:"#34d399",warning:"#fbbf24",error:"#f87171"}},energetic:{name:"🔥 Energético (Laranja)",light:{primary:"#f97316",secondary:"#ea580c",accent:"#fb923c",background:"#ffffff",surface:"#fff7ed",text:"#1c1917",textSecondary:"#78716c",border:"#e7e5e4",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#fb923c",secondary:"#f97316",accent:"#fdba74",background:"#1c1917",surface:"#292524",text:"#fafaf9",textSecondary:"#a8a29e",border:"#44403c",success:"#34d399",warning:"#fbbf24",error:"#f87171"}},professional:{name:"💼 Profissional (Cinza)",light:{primary:"#475569",secondary:"#334155",accent:"#64748b",background:"#ffffff",surface:"#f8fafc",text:"#0f172a",textSecondary:"#64748b",border:"#e2e8f0",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#94a3b8",secondary:"#64748b",accent:"#cbd5e1",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#94a3b8",border:"#334155",success:"#34d399",warning:"#fbbf24",error:"#f87171"}},nature:{name:"🌿 Natureza (Verde)",light:{primary:"#10b981",secondary:"#059669",accent:"#34d399",background:"#ffffff",surface:"#f0fdf4",text:"#064e3b",textSecondary:"#6b7280",border:"#d1fae5",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#34d399",secondary:"#10b981",accent:"#6ee7b7",background:"#064e3b",surface:"#065f46",text:"#ecfdf5",textSecondary:"#a7f3d0",border:"#047857",success:"#34d399",warning:"#fbbf24",error:"#f87171"}},sunset:{name:"🌅 Pôr do Sol (Rosa)",light:{primary:"#ec4899",secondary:"#db2777",accent:"#f472b6",background:"#ffffff",surface:"#fdf2f8",text:"#831843",textSecondary:"#9f1239",border:"#fce7f3",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},dark:{primary:"#f472b6",secondary:"#ec4899",accent:"#f9a8d4",background:"#500724",surface:"#831843",text:"#fce7f3",textSecondary:"#fbcfe8",border:"#9f1239",success:"#34d399",warning:"#fbbf24",error:"#f87171"}}},P=[{id:"home",name:"🏠 Página Inicial",icon:"ri-home-line"},{id:"products",name:"🛍️ Produtos",icon:"ri-shopping-bag-line"},{id:"services",name:"⚙️ Serviços",icon:"ri-tools-line"},{id:"about",name:"ℹ️ Sobre Nós",icon:"ri-information-line"},{id:"contact",name:"📞 Contato",icon:"ri-phone-line"},{id:"cart",name:"🛒 Carrinho",icon:"ri-shopping-cart-line"},{id:"favorites",name:"❤️ Favoritos",icon:"ri-heart-line"},{id:"profile",name:"👤 Perfil",icon:"ri-user-line"}];function V(){const{darkMode:e}=r(),[t,l]=i.useState(!1),[o,n]=i.useState(!1),[d,c]=i.useState("modern"),[x,m]=i.useState("home"),[g,u]=i.useState({preset:"modern",customColors:{light:$.modern.light,dark:$.modern.dark},pageSettings:{}});i.useEffect(()=>{p()},[]);const p=async()=>{try{l(!0);const{data:e,error:t}=await s.from("site_settings").select("value").eq("key","theme_settings").single();if(t&&"PGRST116"!==t.code)throw t;e?.value&&(u(e.value),c(e.value.preset||"modern"))}catch(e){}finally{l(!1)}},h=()=>{const t=g.customColors[e?"dark":"light"],r=document.documentElement;Object.entries(t).forEach(([e,t])=>{r.style.setProperty(`--color-${e}`,t)})},b=(e,t,r)=>{u({...g,customColors:{...g.customColors,[e]:{...g.customColors[e],[t]:r}}})};if(t)return a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("i",{className:"ri-loader-4-line text-4xl animate-spin text-purple-500"}),a.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Carregando configurações..."})]})});const y=g.customColors[e?"dark":"light"];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[a.jsx("i",{className:"ri-palette-line text-purple-500"}),"🎨 Editor de Temas"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Controlo total de cores e temas Dark/Light por página"})]}),a.jsx("button",{onClick:async()=>{try{n(!0),h();const{error:e}=await s.from("site_settings").upsert({key:"theme_settings",value:g,updated_at:(new Date).toISOString()});if(e)throw e;alert("✅ Tema salvo com sucesso! Recarregando..."),setTimeout(()=>window.location.reload(),1e3)}catch(e){alert("❌ Erro ao salvar tema")}finally{n(!1)}},disabled:o,className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all whitespace-nowrap disabled:opacity-50",children:o?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line"}),"💾 Salvar Tema"]})})]}),a.jsxs("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-xl p-6 space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx("i",{className:"ri-paint-brush-line text-purple-500"}),"🎨 Paletas Profissionais"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Escolha uma paleta pré-definida ou personalize suas próprias cores"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries($).map(([e,t])=>a.jsxs("button",{onClick:()=>{return c(t=e),void u({...g,preset:t,customColors:{light:$[t].light,dark:$[t].dark}});var t},className:"p-4 rounded-xl border-2 transition-all text-left "+(d===e?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-300"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"font-semibold",children:t.name}),d===e&&a.jsx("i",{className:"ri-checkbox-circle-fill text-purple-500 text-xl"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-300",style:{backgroundColor:t.light.primary},title:"Primária Light"}),a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-300",style:{backgroundColor:t.light.secondary},title:"Secundária Light"}),a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-300",style:{backgroundColor:t.light.accent},title:"Destaque Light"}),a.jsx("div",{className:"w-px bg-gray-300 dark:bg-gray-600"}),a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-600",style:{backgroundColor:t.dark.primary},title:"Primária Dark"}),a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-600",style:{backgroundColor:t.dark.secondary},title:"Secundária Dark"}),a.jsx("div",{className:"w-8 h-8 rounded-lg border border-gray-600",style:{backgroundColor:t.dark.accent},title:"Destaque Dark"})]})]},e))})]}),a.jsxs("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-xl p-6 space-y-6",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx("i",{className:"ri-brush-line text-orange-500"}),"🎨 Personalizar Cores"]}),a.jsx("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:["light","dark"].map(e=>a.jsx("button",{onClick:()=>{},className:"px-4 py-2 font-medium transition-all "+("light"===e?"border-b-2 border-yellow-500 text-yellow-600":"text-gray-500"),children:"light"===e?"☀️ Light Mode":"🌙 Dark Mode"},e))}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(y).map(([t,r])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"block text-sm font-medium capitalize",children:["primary"===t&&"🎨 Cor Primária","secondary"===t&&"🎨 Cor Secundária","accent"===t&&"✨ Cor de Destaque","background"===t&&"🖼️ Fundo","surface"===t&&"📄 Superfície","text"===t&&"📝 Texto","textSecondary"===t&&"💬 Texto Secundário","border"===t&&"🔲 Borda","success"===t&&"✅ Sucesso","warning"===t&&"⚠️ Aviso","error"===t&&"❌ Erro"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"color",value:r,onChange:r=>b(e?"dark":"light",t,r.target.value),className:"w-16 h-10 rounded border border-gray-300 dark:border-gray-600 cursor-pointer"}),a.jsx("input",{type:"text",value:r,onChange:r=>b(e?"dark":"light",t,r.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-sm font-mono",placeholder:"#000000"})]})]},t))}),a.jsxs("div",{className:"mt-6 p-6 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-600 space-y-4",children:[a.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[a.jsx("i",{className:"ri-eye-line"}),"👁️ Preview"]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.primary,color:"#ffffff"},children:"Botão Primário"}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.secondary,color:"#ffffff"},children:"Botão Secundário"}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.accent,color:"#ffffff"},children:"Botão Destaque"}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.success,color:"#ffffff"},children:"✅ Sucesso"}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.warning,color:"#ffffff"},children:"⚠️ Aviso"}),a.jsx("button",{className:"px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:y.error,color:"#ffffff"},children:"❌ Erro"})]})]})]}),a.jsxs("div",{className:(e?"bg-gray-800":"bg-white")+" rounded-xl p-6 space-y-4",children:[a.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx("i",{className:"ri-pages-line text-blue-500"}),"📄 Configurações por Página"]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ative/desative Dark Mode para páginas específicas"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:P.map(e=>a.jsxs("div",{className:"p-4 rounded-xl border-2 "+(g.pageSettings[e.id]?.darkModeEnabled?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:`${e.icon} text-lg`}),a.jsx("span",{className:"font-medium text-sm",children:e.name})]}),a.jsx("button",{onClick:()=>{return t=e.id,void u({...g,pageSettings:{...g.pageSettings,[t]:{...g.pageSettings[t],darkModeEnabled:!g.pageSettings[t]?.darkModeEnabled}}});var t},className:"w-12 h-6 rounded-full transition-all "+(g.pageSettings[e.id]?.darkModeEnabled?"bg-purple-500":"bg-gray-300"),children:a.jsx("div",{className:"w-5 h-5 bg-white rounded-full transition-all "+(g.pageSettings[e.id]?.darkModeEnabled?"translate-x-6":"translate-x-0.5")})})]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:g.pageSettings[e.id]?.darkModeEnabled?"🌙 Dark Mode Ativo":"☀️ Light Mode Ativo"})]},e.id))})]})]})}function E(){const[e,t]=i.useState({site_name:"JokaTech",site_tagline:"Sua Loja Completa",free_shipping_threshold:100,currency_symbol:"€",topbar_email:"jokadamas616@gmail.com",topbar_phone:"+352 621 717 862",topbar_promo_text:"Envio grátis em compras acima de €100",show_topbar:!0,enable_theme_toggle:!0,primary_color:"#f59e0b",secondary_color:"#111827",accent_color:"#d97706",carousel_max_items:10,carousel_auto_play:!0,carousel_interval:3e3,footer_about_text:"Soluções digitais completas para o seu negócio. Qualidade, inovação e resultados garantidos.",footer_social_facebook:"https://facebook.com",footer_social_instagram:"https://instagram.com",footer_social_twitter:"https://twitter.com",footer_social_linkedin:"https://linkedin.com",footer_social_youtube:"https://youtube.com",show_newsletter:!0,newsletter_title:"Subscreva a nossa Newsletter",newsletter_description:"Receba as últimas novidades e ofertas exclusivas",contact_email:"jokadamas616@gmail.com",contact_phone:"+352 621 717 862",whatsapp_number:"+352621717862",business_address:"Luxemburgo, Europa",business_hours:"Seg-Sex: 9h-18h"}),[r,l]=i.useState({home:{hero_title:"Sua Loja",hero_subtitle:"Completa",hero_description:"Descubra milhares de produtos premium com os melhores preços do mercado. Qualidade garantida, entrega rápida e atendimento excepcional.",show_categories:!0,show_featured_products:!0,show_services:!0,show_stats:!0},products:{page_title:"Nossos Produtos",page_description:"Explore nossa coleção completa",show_filters:!0,products_per_page:12},services:{page_title:"Nossos Serviços",page_description:"Soluções profissionais para seu negócio",show_categories:!0},about:{page_title:"Sobre Nós",page_description:"Conheça nossa história",mission_text:"Nossa missão é oferecer os melhores produtos e serviços.",vision_text:"Ser referência em qualidade e inovação."},contact:{page_title:"Entre em Contacto",page_description:"Estamos aqui para ajudar",show_map:!0,show_form:!0},cart:{page_title:"Carrinho de Compras",empty_cart_message:"Seu carrinho está vazio",continue_shopping_text:"Continuar Comprando"},favorites:{page_title:"Meus Favoritos",empty_favorites_message:"Você ainda não tem favoritos"}}),[o,n]=i.useState(!1),[d,c]=i.useState(null),[x,m]=i.useState("global");i.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:e,error:r}=await s.from("site_settings").select("*").limit(1).maybeSingle();!r&&e&&t(t=>({...t,...e}))}catch(e){}};return a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"⚙️ Configurações do Site"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1",children:"Controlo total de TODAS as páginas e elementos do site"})]}),a.jsx("button",{onClick:async()=>{n(!0),c(null);try{const{data:t}=await s.from("site_settings").select("id").limit(1).maybeSingle();if(t){const{error:r}=await s.from("site_settings").update({...e,updated_at:(new Date).toISOString()}).eq("id",t.id);if(r)throw r}else{const{error:t}=await s.from("site_settings").insert({...e,updated_at:(new Date).toISOString()});if(t)throw t}c({type:"success",text:"✅ Configurações salvas! A página será recarregada..."}),setTimeout(()=>{window.location.reload()},1500)}catch(t){c({type:"error",text:"❌ Erro ao salvar configurações"})}finally{n(!1)}},disabled:o,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-amber-500 to-amber-600 text-white font-semibold rounded-lg hover:from-amber-600 hover:to-amber-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer flex items-center justify-center gap-2 shadow-lg",children:o?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"A guardar..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line"}),a.jsx("span",{className:"hidden sm:inline",children:"Guardar Alterações"}),a.jsx("span",{className:"sm:hidden",children:"Guardar"})]})})]}),d&&a.jsx("div",{className:"p-3 sm:p-4 rounded-lg "+("success"===d.type?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800"),children:a.jsxs("div",{className:"flex items-center gap-2 text-sm sm:text-base",children:[a.jsx("i",{className:"success"===d.type?"ri-checkbox-circle-line":"ri-error-warning-line"}),a.jsx("span",{children:d.text})]})}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 -mx-4 px-4 sm:mx-0 sm:px-0",children:a.jsx("div",{className:"flex gap-1 sm:gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[{id:"global",label:"🌐 Global",icon:"ri-global-line",color:"blue"},{id:"home",label:"🏠 Início",icon:"ri-home-line",color:"purple"},{id:"products",label:"🛍️ Produtos",icon:"ri-shopping-bag-line",color:"green"},{id:"services",label:"⚙️ Serviços",icon:"ri-service-line",color:"cyan"},{id:"about",label:"ℹ️ Sobre",icon:"ri-information-line",color:"indigo"},{id:"contact",label:"📞 Contato",icon:"ri-phone-line",color:"orange"},{id:"cart",label:"🛒 Carrinho",icon:"ri-shopping-cart-line",color:"pink"},{id:"favorites",label:"❤️ Favoritos",icon:"ri-heart-line",color:"red"},{id:"header",label:"📋 Header",icon:"ri-layout-top-line",color:"yellow"},{id:"footer",label:"📄 Footer",icon:"ri-layout-bottom-line",color:"teal"},{id:"theme",label:"🎨 Tema",icon:"ri-palette-line",color:"violet"}].map(e=>a.jsxs("button",{onClick:()=>m(e.id),className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2 sm:py-2.5 font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer text-xs sm:text-sm rounded-t-lg "+(x===e.id?`border-${e.color}-500 bg-${e.color}-50 dark:bg-${e.color}-900/20 text-${e.color}-600 dark:text-${e.color}-400`:"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800/50"),children:[a.jsx("span",{className:"text-base sm:text-lg",children:e.label.split(" ")[0]}),a.jsx("span",{className:"hidden sm:inline",children:e.label.split(" ").slice(1).join(" ")})]},e.id))})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6 space-y-4 sm:space-y-6 shadow-lg",children:["global"===x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-global-line text-xl sm:text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Configurações Globais"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Aplicam-se a todo o site"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🏪 Nome do Site"}),a.jsx("input",{type:"text",value:e.site_name,onChange:r=>t({...e,site_name:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"JokaTech"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"✨ Slogan do Site"}),a.jsx("input",{type:"text",value:e.site_tagline,onChange:r=>t({...e,site_tagline:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"Sua Loja Completa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🚚 Envio Grátis Acima de (€)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:e.free_shipping_threshold,onChange:r=>t({...e,free_shipping_threshold:parseFloat(r.target.value)||0}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Atualiza automaticamente em TODO o site"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"💰 Símbolo da Moeda"}),a.jsx("input",{type:"text",value:e.currency_symbol,onChange:r=>t({...e,currency_symbol:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"€"})]})]})]}),"home"===x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-home-line text-xl sm:text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Página Inicial"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Hero, categorias, produtos em destaque"})]})]}),a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📝 Título do Hero"}),a.jsx("input",{type:"text",value:r.home.hero_title,onChange:e=>l({...r,home:{...r.home,hero_title:e.target.value}}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"Sua Loja"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"✨ Palavra em Destaque (Gradiente)"}),a.jsx("input",{type:"text",value:r.home.hero_subtitle,onChange:e=>l({...r,home:{...r.home,hero_subtitle:e.target.value}}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"Completa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"💬 Descrição do Hero"}),a.jsx("textarea",{value:r.home.hero_description,onChange:e=>l({...r,home:{...r.home,hero_description:e.target.value}}),rows:3,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none text-sm sm:text-base",placeholder:"Descubra milhares de produtos..."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.home.show_categories,onChange:e=>l({...r,home:{...r.home,show_categories:e.target.checked}}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"📂 Mostrar Categorias"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Seção de categorias"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.home.show_featured_products,onChange:e=>l({...r,home:{...r.home,show_featured_products:e.target.checked}}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"🔥 Produtos em Destaque"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carousel de produtos"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.home.show_services,onChange:e=>l({...r,home:{...r.home,show_services:e.target.checked}}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"⚙️ Mostrar Serviços"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Carousel de serviços"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("input",{type:"checkbox",checked:r.home.show_stats,onChange:e=>l({...r,home:{...r.home,show_stats:e.target.checked}}),className:"w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"📊 Mostrar Estatísticas"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Badges de confiança"})]})]})]})]})]}),"header"===x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-layout-top-line text-xl sm:text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Header & Topbar"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Topo de todas as páginas"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg cursor-pointer border-2 border-yellow-200 dark:border-yellow-800",children:[a.jsx("input",{type:"checkbox",checked:e.show_topbar,onChange:r=>t({...e,show_topbar:r.target.checked}),className:"w-5 h-5 text-yellow-600 rounded focus:ring-2 focus:ring-yellow-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"📢 Mostrar Topbar"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Barra promocional no topo"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📧 E-mail (Topbar)"}),a.jsx("input",{type:"email",value:e.topbar_email,onChange:r=>t({...e,topbar_email:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📞 Telefone (Topbar)"}),a.jsx("input",{type:"text",value:e.topbar_phone,onChange:r=>t({...e,topbar_phone:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🎁 Texto Promocional (Topbar)"}),a.jsx("input",{type:"text",value:e.topbar_promo_text,onChange:r=>t({...e,topbar_promo_text:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:"Envio grátis em compras acima de €100"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 Dica: Mencione o valor de envio grátis aqui"})]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.enable_theme_toggle,onChange:r=>t({...e,enable_theme_toggle:r.target.checked}),className:"w-5 h-5 text-yellow-600 rounded focus:ring-2 focus:ring-yellow-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"🌓 Ativar Dark/Light Mode"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Botão de alternar tema"})]})]})]}),"footer"===x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-layout-bottom-line text-xl sm:text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Footer & Redes Sociais"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Rodapé de todas as páginas"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📝 Texto Sobre a Empresa"}),a.jsx("textarea",{value:e.footer_about_text,onChange:r=>t({...e,footer_about_text:r.target.value}),rows:3,className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none text-sm sm:text-base"})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-links-line"}),"Redes Sociais"]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:[{key:"footer_social_facebook",icon:"ri-facebook-fill",label:"Facebook",color:"blue"},{key:"footer_social_instagram",icon:"ri-instagram-line",label:"Instagram",color:"pink"},{key:"footer_social_twitter",icon:"ri-twitter-x-line",label:"Twitter/X",color:"gray"},{key:"footer_social_linkedin",icon:"ri-linkedin-fill",label:"LinkedIn",color:"blue"},{key:"footer_social_youtube",icon:"ri-youtube-fill",label:"YouTube",color:"red"}].map(r=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 flex items-center justify-center bg-${r.color}-100 dark:bg-${r.color}-900/30 text-${r.color}-600 dark:text-${r.color}-400 rounded-lg flex-shrink-0`,children:a.jsx("i",{className:r.icon})}),a.jsx("input",{type:"url",value:e[r.key],onChange:a=>t({...e,[r.key]:a.target.value}),className:"flex-1 px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base",placeholder:`https://${r.label.toLowerCase()}.com/...`})]},r.key))})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 sm:p-4 bg-teal-50 dark:bg-teal-900/20 rounded-lg cursor-pointer border-2 border-teal-200 dark:border-teal-800 mb-4",children:[a.jsx("input",{type:"checkbox",checked:e.show_newsletter,onChange:r=>t({...e,show_newsletter:r.target.checked}),className:"w-5 h-5 text-teal-600 rounded focus:ring-2 focus:ring-teal-500 cursor-pointer"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"📬 Mostrar Newsletter"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Formulário de subscrição"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📝 Título da Newsletter"}),a.jsx("input",{type:"text",value:e.newsletter_title,onChange:r=>t({...e,newsletter_title:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"💬 Descrição da Newsletter"}),a.jsx("input",{type:"text",value:e.newsletter_description,onChange:r=>t({...e,newsletter_description:r.target.value}),className:"w-full px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm sm:text-base"})]})]})]})]}),"theme"===x&&a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-violet-500 to-violet-600 rounded-xl flex items-center justify-center",children:a.jsx("i",{className:"ri-palette-line text-xl sm:text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"Cores do Tema"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Personalize as cores principais"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6",children:[{key:"primary_color",label:"🎨 Cor Primária",desc:"Botões, links, destaques"},{key:"secondary_color",label:"🎨 Cor Secundária",desc:"Textos, backgrounds"},{key:"accent_color",label:"🎨 Cor de Destaque",desc:"Hover, ênfase"}].map(r=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:r.label}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"color",value:e[r.key],onChange:a=>t({...e,[r.key]:a.target.value}),className:"w-16 h-12 rounded-lg cursor-pointer border-2 border-gray-300 dark:border-gray-600"}),a.jsx("input",{type:"text",value:e[r.key],onChange:a=>t({...e,[r.key]:a.target.value}),className:"flex-1 px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r.desc})]},r.key))}),a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"👁️ Preview das Cores"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{key:"primary_color",label:"Primária"},{key:"secondary_color",label:"Secundária"},{key:"accent_color",label:"Destaque"}].map(t=>a.jsx("div",{className:"p-6 rounded-lg text-center transition-transform hover:scale-105",style:{backgroundColor:e[t.key]},children:a.jsx("span",{className:"text-white font-semibold text-sm drop-shadow-lg",children:t.label})},t.key))})]})]}),["products","services","about","contact","cart","favorites"].includes(x)&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("i",{className:"ri-tools-line text-4xl text-gray-400 dark:text-gray-500"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Em Desenvolvimento"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Configurações da página ",a.jsx("strong",{children:x})," em breve!"]})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-4 sm:p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx("i",{className:"ri-information-line text-xl text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm sm:text-base font-bold text-blue-900 dark:text-blue-100 mb-2",children:"💡 Como Funciona"}),a.jsxs("ul",{className:"text-xs sm:text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[a.jsx("li",{children:"✅ Todas as mudanças atualizam IMEDIATAMENTE no site"}),a.jsx("li",{children:"✅ Envio grátis atualiza em TODO o site automaticamente"}),a.jsx("li",{children:"✅ Cores aplicam-se a todos os elementos"}),a.jsx("li",{children:"✅ Textos do header/footer aparecem em todas as páginas"}),a.jsx("li",{children:"✅ Configurações por página controlam seções específicas"})]})]})]})}),a.jsx("style",{children:"\n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n        .scrollbar-hide {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n      "})]})}const A="https://vxlhwibkbptkthrnznqi.supabase.co/functions/v1/woocommerce-proxy";async function T(e=50){try{const{data:t,error:r}=await s.from("integrations_woocommerce").select("*").maybeSingle();if(r||!t)throw new Error("Configuração WooCommerce não encontrada. Por favor, conecte primeiro.");const a={store_url:t.store_url,consumer_key:t.consumer_key,consumer_secret:t.consumer_secret,api_version:t.api_version||"wc/v3",use_ssl:t.use_ssl??!0,products_only:t.products_only??!0};return await async function(e,t=50,a=1){try{const r=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"fetch",config:e,limit:t,page:a})});if(!r.ok){const e=await r.text();throw new Error(`Erro ${r.status}: ${e}`)}return await r.json()}catch(r){return{success:!1,message:r.message||"Erro ao buscar produtos",products:[]}}}(a,e)}catch(t){return{success:!1,message:t.message||"Erro ao buscar produtos",products:[]}}}function I({darkMode:e}){const[t,r]=i.useState({storeUrl:"",consumerKey:"",consumerSecret:"",apiVersion:"wc/v3",useSsl:!0,onlyProducts:!0}),[l,o]=i.useState(!1),[n,d]=i.useState(!1),[c,x]=i.useState(null),[m,g]=i.useState(!1),[u,p]=i.useState(!1),[h,b]=i.useState(!0),[y,f]=i.useState(!0),[j,N]=i.useState([]),[v,w]=i.useState(!1);i.useEffect(()=>{k()},[]);const k=async()=>{try{f(!0);const{data:e,error:t}=await s.from("integrations_woocommerce").select("*").maybeSingle();t||e&&(o(!0),r({storeUrl:e.store_url||"",consumerKey:"••••••••",consumerSecret:"••••••••",apiVersion:e.api_version||"wc/v3",useSsl:e.use_ssl??!0,onlyProducts:e.products_only??!0}))}catch(e){}finally{f(!1)}},_=e=>{r(t=>({...t,useSsl:e}))},C=e=>{r(t=>({...t,onlyProducts:e}))};return y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"w-8 h-8 border-2 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6 border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:"🛒 Integração WooCommerce"}),a.jsx("p",{className:(e?"text-gray-400":"text-gray-600")+" mt-1",children:"Conecte sua loja WordPress + WooCommerce"})]}),l&&a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 text-green-500 rounded-lg border border-green-500/30",children:[a.jsx("i",{className:"ri-checkbox-circle-fill text-xl"}),a.jsx("span",{className:"font-medium",children:"Conectado"})]})]}),h&&a.jsx("div",{className:(e?"bg-gradient-to-br from-blue-900/30 to-purple-900/30 border-blue-700":"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-300")+" border-2 rounded-xl p-6 mb-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("i",{className:"ri-book-open-fill text-blue-500 text-3xl mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-xl mb-4",children:"📘 Guia Completo: Como Configurar WordPress no InfinityFree"}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"1"}),a.jsx("h4",{className:"font-bold text-lg",children:"Criar Conta no InfinityFree"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsxs("p",{children:["• Aceda: ",a.jsx("a",{href:"https://infinityfree.net",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"infinityfree.net"})]}),a.jsx("p",{children:"• Registe-se com email válido"}),a.jsx("p",{children:"• Confirme o email de verificação"}),a.jsx("p",{children:"• Faça login no painel de controle"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"2"}),a.jsx("h4",{className:"font-bold text-lg",children:"⚠️ IMPORTANTE: Configurar Domínio Corretamente"})]}),a.jsxs("div",{className:"ml-10 space-y-3 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsxs("div",{className:(e?"bg-yellow-900/30 border-yellow-700":"bg-yellow-50 border-yellow-400")+" border-l-4 p-3 rounded",children:[a.jsx("p",{className:"font-bold text-yellow-600 dark:text-yellow-400 mb-2",children:"🚨 O SEU PROBLEMA:"}),a.jsxs("p",{className:"mb-2",children:["Está tentando acessar ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"joka.ct.ws/wp"})," mas o WordPress não responde!"]}),a.jsx("p",{className:"font-bold text-green-600 dark:text-green-400",children:"✅ SOLUÇÃO:"})]}),a.jsx("p",{className:"font-bold",children:"Opção A - Subdomínio Separado (RECOMENDADO):"}),a.jsxs("ol",{className:"list-decimal ml-6 space-y-1",children:[a.jsx("li",{children:"No InfinityFree, crie conta de hosting separada"}),a.jsxs("li",{children:["Use subdomínio: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded font-bold",children:"store.joka.ct.ws"})]}),a.jsx("li",{children:"Instale WordPress nesta conta"}),a.jsxs("li",{children:["WordPress ficará em: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded font-bold",children:"https://store.joka.ct.ws"})]}),a.jsxs("li",{children:["API em: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded font-bold",children:"https://store.joka.ct.ws/wp-json/wc/v3/"})]})]}),a.jsx("p",{className:"font-bold mt-3",children:"Opção B - Mesmo Domínio (Mais Complexo):"}),a.jsxs("ol",{className:"list-decimal ml-6 space-y-1",children:[a.jsx("li",{children:"Crie pasta /wp no File Manager"}),a.jsx("li",{children:"Instale WordPress manualmente na pasta /wp"}),a.jsx("li",{children:"Configure .htaccess corretamente"}),a.jsxs("li",{children:["WordPress em: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"https://joka.ct.ws/wp"})]}),a.jsx("li",{children:"⚠️ Mais difícil de configurar permalinks"})]}),a.jsxs("div",{className:(e?"bg-green-900/30 border-green-700":"bg-green-50 border-green-400")+" border-l-4 p-3 rounded mt-3",children:[a.jsx("p",{className:"font-bold text-green-600 dark:text-green-400",children:"💡 RECOMENDAÇÃO:"}),a.jsx("p",{children:"Use a Opção A (subdomínio separado) - é MUITO mais fácil e funciona melhor!"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"3"}),a.jsx("h4",{className:"font-bold text-lg",children:"Instalar WordPress via Softaculous"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsx("p",{children:'• No painel InfinityFree, clique "Softaculous"'}),a.jsx("p",{children:'• Procure "WordPress" e clique "Install"'}),a.jsxs("p",{children:["• Escolha protocolo: ",a.jsx("strong",{children:"https://"})]}),a.jsxs("p",{children:["• Escolha domínio: ",a.jsx("strong",{children:"store.joka.ct.ws"})]}),a.jsx("p",{children:'• Deixe "In Directory" VAZIO (muito importante!)'}),a.jsx("p",{children:"• Defina nome do site, admin username e password"}),a.jsx("p",{children:'• Clique "Install"'}),a.jsx("p",{children:"• Aguarde 2-5 minutos"}),a.jsxs("p",{children:["• Teste: abra ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"https://store.joka.ct.ws"})," no navegador"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"4"}),a.jsx("h4",{className:"font-bold text-lg",children:"Instalar WooCommerce Plugin"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsxs("p",{children:["• Faça login no WordPress: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"https://store.joka.ct.ws/wp-admin"})]}),a.jsx("p",{children:"• Vá para: Plugins → Adicionar Novo"}),a.jsx("p",{children:'• Procure "WooCommerce"'}),a.jsx("p",{children:'• Clique "Instalar Agora" → "Ativar"'}),a.jsx("p",{children:"• Siga o assistente de configuração (pode pular)"}),a.jsx("p",{children:"• Configure moeda, país, etc."})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-red-600 text-white rounded-full font-bold",children:"5"}),a.jsx("h4",{className:"font-bold text-lg",children:"⚠️ CRÍTICO: Configurar Permalinks"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsx("div",{className:(e?"bg-red-900/30 border-red-700":"bg-red-50 border-red-400")+" border-l-4 p-3 rounded mb-3",children:a.jsx("p",{className:"font-bold text-red-600 dark:text-red-400",children:"🚨 SEM ISTO A API NÃO FUNCIONA!"})}),a.jsx("p",{children:"• WordPress → Definições → Permalinks"}),a.jsxs("p",{children:["• Selecione: ",a.jsx("strong",{children:'"Nome do post"'})]}),a.jsx("p",{children:'• Clique "Salvar alterações"'}),a.jsxs("p",{children:["• Teste: abra ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"https://store.joka.ct.ws/wp-json/"})]}),a.jsx("p",{children:"• Deve mostrar JSON (não erro 404!)"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"6"}),a.jsx("h4",{className:"font-bold text-lg",children:"Gerar Chaves API do WooCommerce"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsx("p",{children:"• WooCommerce → Configurações → Avançado → REST API"}),a.jsx("p",{children:'• Clique "Adicionar chave"'}),a.jsxs("p",{children:["• Descrição: ",a.jsx("strong",{children:'"Integração JokaTech"'})]}),a.jsxs("p",{children:["• Utilizador: ",a.jsx("strong",{children:"(seu admin)"})]}),a.jsxs("p",{children:["• Permissões: ",a.jsx("strong",{children:"Leitura/Escrita"})]}),a.jsx("p",{children:'• Clique "Gerar chave API"'}),a.jsx("p",{children:"• ⚠️ COPIE as chaves AGORA (só aparecem uma vez!):"}),a.jsxs("p",{className:"ml-4",children:["- Consumer Key: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"ck_..."})]}),a.jsxs("p",{className:"ml-4",children:["- Consumer Secret: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"cs_..."})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-600 text-white rounded-full font-bold",children:"7"}),a.jsx("h4",{className:"font-bold text-lg",children:"Configurar CORS (Anti-bloqueio)"})]}),a.jsxs("div",{className:"ml-10 space-y-3 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsx("p",{className:"font-bold",children:"No InfinityFree File Manager:"}),a.jsxs("p",{children:["1. Abra o ficheiro: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"wp-config.php"})]}),a.jsxs("p",{children:["2. Adicione ANTES de ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded",children:"/* That's all, stop editing! */"}),":"]}),a.jsx("pre",{className:(e?"bg-gray-900":"bg-gray-800")+" text-green-400 p-3 rounded mt-2 overflow-x-auto text-xs",children:"// CORS para integração com joka.ct.ws\nheader('Access-Control-Allow-Origin: https://joka.ct.ws');\nheader('Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS');\nheader('Access-Control-Allow-Headers: Content-Type, Authorization');\nheader('Access-Control-Allow-Credentials: true');\n\nif ($_SERVER['REQUEST_METHOD'] === 'OPTIONS') {\n    http_response_code(200);\n    exit;\n}"}),a.jsx("p",{children:"3. Salve o ficheiro"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-green-600 text-white rounded-full font-bold",children:"8"}),a.jsx("h4",{className:"font-bold text-lg",children:"Conectar Aqui Embaixo"})]}),a.jsxs("div",{className:"ml-10 space-y-2 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsxs("p",{children:["• Cole a URL: ",a.jsx("code",{className:"bg-black/20 px-2 py-0.5 rounded font-bold",children:"https://store.joka.ct.ws"})]}),a.jsx("p",{children:"• Cole o Consumer Key"}),a.jsx("p",{children:"• Cole o Consumer Secret"}),a.jsx("p",{children:'• ✅ Marque "Usar SSL"'}),a.jsx("p",{children:'• ✅ Marque "Sincronizar apenas produtos"'}),a.jsx("p",{children:'• Clique "Testar Conexão"'}),a.jsx("p",{children:'• Se sucesso (✅), clique "Salvar Conexão"'}),a.jsx("p",{children:'• Depois clique "Importar Todos"'})]})]}),a.jsxs("div",{className:(e?"bg-orange-900/30 border-orange-700":"bg-orange-50 border-orange-400")+" border-l-4 p-4 rounded mt-6",children:[a.jsx("p",{className:"font-bold text-orange-600 dark:text-orange-400 mb-2",children:"🆘 Se der erro:"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsxs("li",{children:["❌ ",a.jsx("strong",{children:"Erro 404:"})," Permalinks não configurados (Passo 5)"]}),a.jsxs("li",{children:["❌ ",a.jsx("strong",{children:"Erro CORS:"})," wp-config.php não editado (Passo 7)"]}),a.jsxs("li",{children:["❌ ",a.jsx("strong",{children:"Erro 401:"})," Chaves API erradas (Passo 6)"]}),a.jsxs("li",{children:["❌ ",a.jsx("strong",{children:"Site não responde:"})," WordPress não instalado corretamente (Passo 3)"]}),a.jsxs("li",{children:["❌ ",a.jsx("strong",{children:"Timeout:"}),' Desmarque "Usar SSL" temporariamente']})]})]})]})]}),a.jsx("button",{onClick:()=>b(!1),className:(e?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900")+" transition-colors ml-4",children:a.jsx("i",{className:"ri-close-line text-2xl"})})]})}),!h&&a.jsxs("button",{onClick:()=>b(!0),className:`mb-6 px-4 py-2 ${e?"bg-blue-900/30 text-blue-400 border-blue-700":"bg-blue-50 text-blue-600 border-blue-300"} border-2 rounded-lg hover:opacity-80 transition-opacity flex items-center gap-2 font-medium`,children:[a.jsx("i",{className:"ri-book-open-line text-xl"}),"Mostrar Guia Completo de Instalação"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-200":"text-gray-700"),children:"🌐 URL da Loja WooCommerce *"}),a.jsx("input",{type:"text",value:t.storeUrl,onChange:e=>{r(t=>({...t,storeUrl:e.target.value}))},placeholder:"https://store.joka.ct.ws",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} border-2 focus:outline-none focus:ring-2 focus:ring-[#b62bff] focus:border-transparent transition-all`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-200":"text-gray-700"),children:"🔑 Consumer Key *"}),a.jsx("input",{type:"text",value:t.consumerKey,onChange:e=>{r(t=>({...t,consumerKey:e.target.value}))},placeholder:"ck_xxxxxxxxxxxxxxxx",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} border-2 focus:outline-none focus:ring-2 focus:ring-[#b62bff] focus:border-transparent font-mono text-sm transition-all`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-200":"text-gray-700"),children:"🔐 Consumer Secret *"}),a.jsx("input",{type:"password",value:t.consumerSecret,onChange:e=>{r(t=>({...t,consumerSecret:e.target.value}))},placeholder:"cs_xxxxxxxxxxxxxxxx",className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} border-2 focus:outline-none focus:ring-2 focus:ring-[#b62bff] focus:border-transparent font-mono text-sm transition-all`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(e?"text-gray-200":"text-gray-700"),children:"⚙️ Versão da API"}),a.jsxs("select",{value:t.apiVersion,onChange:e=>{r(t=>({...t,apiVersion:e.target.value}))},className:`w-full px-4 py-3 rounded-lg ${e?"bg-gray-900 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"} border-2 focus:outline-none focus:ring-2 focus:ring-[#b62bff] focus:border-transparent transition-all cursor-pointer`,children:[a.jsx("option",{value:"wc/v3",children:"wc/v3 (Recomendado)"}),a.jsx("option",{value:"wc/v2",children:"wc/v2"}),a.jsx("option",{value:"wc/v1",children:"wc/v1"})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{onClick:()=>_(!t.useSsl),className:"flex items-start gap-3 cursor-pointer select-none group",children:[a.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 mt-0.5",children:a.jsx("input",{type:"checkbox",checked:t.useSsl,onChange:e=>_(e.target.checked),onClick:e=>e.stopPropagation(),className:"w-6 h-6 text-[#b62bff] bg-transparent border-2 border-gray-400 rounded cursor-pointer focus:ring-2 focus:ring-[#b62bff] focus:ring-offset-2 checked:bg-[#b62bff] checked:border-[#b62bff] transition-all appearance-none",style:{backgroundImage:t.useSsl?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z' clip-rule='evenodd'/%3E%3C/svg%3E\")":"none",backgroundSize:"100% 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:`text-sm font-medium ${e?"text-gray-200":"text-gray-800"} group-hover:text-[#b62bff] transition-colors`,children:"🔒 Usar SSL (HTTPS)"}),a.jsx("p",{className:"text-xs mt-0.5 text-gray-500",children:"Recomendado para produção"})]})]}),a.jsxs("div",{onClick:()=>C(!t.onlyProducts),className:"flex items-start gap-3 cursor-pointer select-none group",children:[a.jsx("div",{className:"relative flex items-center justify-center w-6 h-6 mt-0.5",children:a.jsx("input",{type:"checkbox",checked:t.onlyProducts,onChange:e=>C(e.target.checked),onClick:e=>e.stopPropagation(),className:"w-6 h-6 text-[#b62bff] bg-transparent border-2 border-gray-400 rounded cursor-pointer focus:ring-2 focus:ring-[#b62bff] focus:ring-offset-2 checked:bg-[#b62bff] checked:border-[#b62bff] transition-all appearance-none",style:{backgroundImage:t.onlyProducts?"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z' clip-rule='evenodd'/%3E%3C/svg%3E\")":"none",backgroundSize:"100% 100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:`text-sm font-medium ${e?"text-gray-200":"text-gray-800"} group-hover:text-[#b62bff] transition-colors`,children:"📦 Sincronizar apenas produtos"}),a.jsx("p",{className:"text-xs mt-0.5 text-gray-500",children:"Ignora pedidos e clientes"})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:async()=>{if(t.storeUrl&&t.consumerKey&&t.consumerSecret){d(!0),x(null);try{const e=await async function(e){try{const{storeUrl:t,consumerKey:r,consumerSecret:a,apiVersion:s,useSsl:l}=e;if(!t||!r||!a)return{success:!1,message:"❌ Preencha todos os campos obrigatórios (URL, Consumer Key e Consumer Secret)"};const i=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"test",config:{store_url:t,consumer_key:r,consumer_secret:a,api_version:s||"wc/v3",use_ssl:l}})});if(!i.ok){const e=await i.text();throw new Error(`Erro ${i.status}: ${e}`)}return await i.json()}catch(t){return{success:!1,message:`❌ Erro inesperado ao testar conexão\n\nDetalhes: ${t.message}\n\n✅ Tente:\n1. Verificar se o site está online: abra no navegador\n2. Verificar se o WordPress está instalado\n3. Verificar se o WooCommerce está ativo\n4. Aguardar alguns minutos e tentar novamente`}}}(t);x(e),e.success?alert('✅ Conexão bem-sucedida!\n\nAgora clique em "Salvar Conexão" para guardar.'):alert(`❌ Erro na conexão:\n\n${e.message}`)}catch(e){x({success:!1,message:e.message||"Erro inesperado"}),alert(`❌ Erro: ${e.message}`)}finally{d(!1)}}else alert("❌ Preencha todos os campos obrigatórios!")},disabled:n||!t.storeUrl||!t.consumerKey||!t.consumerSecret,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg transition-all",children:n?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Testando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-plug-line"}),"Testar Conexão"]})}),a.jsx("button",{onClick:async()=>{if(c?.success){g(!0);try{const e=t.consumerKey.replace(/•/g,""),r=t.consumerSecret.replace(/•/g,""),{error:a}=await s.from("integrations_woocommerce").upsert({store_url:t.storeUrl.trim(),consumer_key:e,consumer_secret:r,api_version:t.apiVersion,use_ssl:t.useSsl,products_only:t.onlyProducts,updated_at:(new Date).toISOString()});if(a)throw a;alert("✅ Conexão salva!\n\nAgora pode importar produtos."),await k()}catch(e){alert(`❌ Erro ao salvar: ${e.message}`)}finally{g(!1)}}else alert("❌ Primeiro teste a conexão!")},disabled:m||!c?.success,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap font-medium shadow-lg transition-all",children:m?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line"}),"Salvar Conexão"]})}),l&&a.jsxs("button",{onClick:async()=>{if(confirm("Desconectar o WooCommerce?"))try{const{error:e}=await s.from("integrations_woocommerce").delete().match({store_url:t.storeUrl});if(e)throw e;o(!1),r({storeUrl:"",consumerKey:"",consumerSecret:"",apiVersion:"wc/v3",useSsl:!0,onlyProducts:!0}),x(null),N([]),w(!1),alert("✅ Desconectado!")}catch(e){alert(`❌ Erro: ${e.message}`)}},className:"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2 whitespace-nowrap font-medium shadow-lg transition-all",children:[a.jsx("i",{className:"ri-link-unlink"}),"Desconectar"]})]}),c&&a.jsx("div",{className:"mt-6 p-4 rounded-lg border-2 "+(c.success?e?"bg-green-900/20 border-green-600":"bg-green-50 border-green-400":e?"bg-red-900/20 border-red-600":"bg-red-50 border-red-400"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("i",{className:(c.success?"ri-checkbox-circle-fill text-green-500":"ri-error-warning-fill text-red-500")+" text-3xl mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("pre",{className:"text-sm whitespace-pre-wrap font-sans "+(c.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"),style:{fontFamily:"inherit"},children:c.message}),c.success&&c.data&&a.jsxs("div",{className:"mt-3 space-y-1 text-sm "+(e?"text-gray-300":"text-gray-700"),children:[a.jsxs("p",{children:["📦 Produtos: ",a.jsx("strong",{children:c.data.totalProducts})]}),a.jsxs("p",{children:["🔗 URL: ",a.jsx("strong",{children:c.data.storeUrl})]}),a.jsxs("p",{children:["⚙️ WooCommerce: ",a.jsx("strong",{children:c.data.wooVersion})]}),a.jsxs("p",{children:["📡 API: ",a.jsx("strong",{children:c.data.apiVersion})]})]})]})]})})]}),l&&a.jsxs("div",{className:`${e?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6 border ${e?"border-gray-700":"border-gray-200"}`,children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[a.jsx("i",{className:"ri-download-cloud-line text-[#ff6a00]"}),"Importação de Produtos"]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:async()=>{p(!0);try{const e=await T(50);e.success?(N(e.products||[]),w(!0),alert(`✅ Preview carregado!\n\n${e.products?.length||0} produtos encontrados.`)):alert(`❌ Erro:\n\n${e.message}`)}catch(e){alert(`❌ Erro: ${e.message}`)}finally{p(!1)}},disabled:u,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:u?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin"}),"Carregando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-eye-line"}),"Preview (50 produtos)"]})}),a.jsx("button",{onClick:async()=>{if(confirm("Importar TODOS os produtos?\n\nPode demorar alguns minutos.")){p(!0);try{const e=await async function(e,t){try{const{data:a,error:l}=await s.from("woocommerce_import_jobs").insert({status:"pending",total_items:0,processed_items:0}).select().single();if(l)throw l;const i="preview"===e?50:1e3,o=await T(i);if(!o.success)throw new Error(o.message);await s.from("woocommerce_import_jobs").update({status:"running",total_items:o.products.length}).eq("id",a.id);let n=0,d=0,c=0;const x=[];for(const e of o.products)try{const{data:r}=await s.from("products").select("id").eq("sku",e.sku).maybeSingle();if(r&&t.update_existing){const a={title:e.name,updated_at:(new Date).toISOString()};t.sync_stock_only?a.stock=e.stock||0:(a.description=e.description,a.price=parseFloat(e.price)||0,a.stock=e.stock||0,a.weight=e.weight,a.dimensions=e.dimensions,t.import_images&&e.images.length>0&&(a.images=e.images));const{error:l}=await s.from("products").update(a).eq("id",r.id);if(l)throw l;await s.from("product_mappings").upsert({woo_product_id:e.id,local_product_id:r.id,sku:e.sku,last_synced_at:(new Date).toISOString()}),c++}else if(!r&&t.create_new){const{data:r,error:a}=await s.from("products").insert({title:e.name,description:e.description,sku:e.sku,price:parseFloat(e.price)||0,stock:e.stock||0,weight:e.weight,dimensions:e.dimensions,images:t.import_images?e.images:[],is_active:!0,created_at:(new Date).toISOString()}).select().single();if(a)throw a;r&&(await s.from("product_mappings").insert({woo_product_id:e.id,local_product_id:r.id,sku:e.sku,last_synced_at:(new Date).toISOString()}),d++)}n++,n%10==0&&await s.from("woocommerce_import_jobs").update({processed_items:n}).eq("id",a.id)}catch(r){x.push(`${e.sku}: ${r.message}`)}return await s.from("woocommerce_import_jobs").update({status:x.length>0&&0===n?"failed":"completed",processed_items:n,completed_at:(new Date).toISOString(),error_message:x.length>0?x.slice(0,5).join("; "):null}).eq("id",a.id),await s.from("integrations_woocommerce").update({last_sync_at:(new Date).toISOString()}).limit(1),localStorage.setItem("last_woo_sync",JSON.stringify({timestamp:(new Date).toISOString(),processed:n,created:d,updated:c,errors:x.length})),{success:!0,job_id:a.id,processed:n,created:d,updated:c,total:o.products.length,errors:x}}catch(r){return{success:!1,message:r.message||"Erro ao importar produtos"}}}("full",{update_existing:!0,create_new:!0,sync_stock_only:!1,import_images:!0});e.success?alert(`✅ Importação concluída!\n\nProcessados: ${e.processed}/${e.total}\nCriados: ${e.created}\nAtualizados: ${e.updated}`):alert(`❌ Erro:\n\n${e.message}`)}catch(e){alert(`❌ Erro: ${e.message}`)}finally{p(!1)}}},disabled:u,className:"px-6 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity flex items-center gap-2 whitespace-nowrap font-medium shadow-lg",children:u?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Importando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-download-line"}),"Importar Todos"]})})]}),v&&j.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-bold text-lg",children:["Preview (",j.length," produtos)"]}),a.jsx("button",{onClick:()=>w(!1),className:(e?"text-gray-400 hover:text-white":"text-gray-500 hover:text-gray-900")+" transition-colors",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:e?"bg-gray-900":"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left font-semibold "+(e?"text-gray-200":"text-gray-700"),children:"Imagem"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold "+(e?"text-gray-200":"text-gray-700"),children:"Nome"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold "+(e?"text-gray-200":"text-gray-700"),children:"SKU"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold "+(e?"text-gray-200":"text-gray-700"),children:"Preço"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold "+(e?"text-gray-200":"text-gray-700"),children:"Stock"})]})}),a.jsx("tbody",{children:j.slice(0,10).map((t,r)=>a.jsxs("tr",{className:"border-t "+(e?"border-gray-700":"border-gray-200"),children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:`w-12 h-12 ${e?"bg-gray-700":"bg-gray-200"} rounded overflow-hidden`,children:t.image&&a.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"})})}),a.jsx("td",{className:"px-4 py-3 "+(e?"text-gray-200":"text-gray-800"),children:t.name}),a.jsx("td",{className:"px-4 py-3 text-sm "+(e?"text-gray-400":"text-gray-600"),children:t.sku||"-"}),a.jsxs("td",{className:"px-4 py-3 text-[#b62bff] font-medium",children:["€",t.price]}),a.jsx("td",{className:"px-4 py-3 "+(e?"text-gray-300":"text-gray-700"),children:t.stock})]},r))})]})})]})]})]})}function D(){const[e,t]=i.useState(null),[r,l]=i.useState(!0),[o,n]=i.useState(!1),[d,c]=i.useState(null),[x,m]=i.useState("hero");i.useEffect(()=>{g()},[]);const g=async()=>{try{const{data:e,error:r}=await s.from("contact_page_config").select("*").single();if(r)throw r;t(e)}catch(e){}finally{l(!1)}},u=(r,a,s)=>{if(!e)return;const l=[...e.contact_methods];l[r]={...l[r],[a]:s},t({...e,contact_methods:l})},p=(r,a,s)=>{if(!e)return;const l=[...e.faqs];l[r]={...l[r],[a]:s},t({...e,faqs:l})},h=(r,a,s)=>{if(!e)return;const l=[...e.form_subjects];l[r]={...l[r],[a]:s},t({...e,form_subjects:l})},b=(r,a,s)=>{if(!e)return;const l=[...e.social_media];l[r]={...l[r],[a]:s},t({...e,social_media:l})};return r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("i",{className:"ri-loader-4-line text-4xl text-purple-500 animate-spin"})}):e?a.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl lg:text-2xl font-bold text-gray-900 dark:text-white",children:"📞 Página de Contacto"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Controlo total: textos, números, emails, redes sociais, símbolos"})]}),a.jsx("button",{onClick:async()=>{if(e){n(!0),c(null);try{const{error:t}=await s.from("contact_page_config").update({...e,updated_at:(new Date).toISOString()}).eq("id","00000000-0000-0000-0000-000000000001");if(t)throw t;c({type:"success",text:"✅ Configurações salvas com sucesso!"}),setTimeout(()=>c(null),3e3)}catch(t){c({type:"error",text:"❌ Erro ao salvar configurações"})}finally{n(!1)}}},disabled:o,className:"w-full sm:w-auto px-4 lg:px-6 py-2.5 lg:py-3 bg-gradient-to-r from-purple-500 to-orange-500 text-white text-sm font-semibold rounded-lg hover:from-purple-600 hover:to-orange-600 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer hover:scale-105 shadow-lg",children:o?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-loader-4-line animate-spin mr-2"}),"A guardar..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line mr-2"}),"Guardar"]})})]}),d&&a.jsx("div",{className:"p-3 lg:p-4 rounded-lg text-sm "+("success"===d.type?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-800"),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"success"===d.type?"ri-checkbox-circle-line":"ri-error-warning-line"}),a.jsx("span",{children:d.text})]})}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 -mx-4 px-4 lg:mx-0 lg:px-0",children:a.jsx("div",{className:"flex gap-1 overflow-x-auto pb-px scrollbar-hide",children:[{id:"hero",label:"Hero",icon:"ri-image-line",color:"purple"},{id:"methods",label:"Contactos",icon:"ri-phone-line",color:"green"},{id:"social",label:"Redes Sociais",icon:"ri-share-line",color:"blue"},{id:"form",label:"Formulário",icon:"ri-mail-send-line",color:"orange"},{id:"faq",label:"FAQ",icon:"ri-question-answer-line",color:"yellow"},{id:"map",label:"Mapa",icon:"ri-map-pin-line",color:"red"},{id:"footer",label:"Rodapé",icon:"ri-layout-bottom-line",color:"indigo"}].map(e=>a.jsxs("button",{onClick:()=>m(e.id),className:"px-3 lg:px-6 py-2 lg:py-3 text-xs lg:text-sm font-medium whitespace-nowrap transition-all duration-200 border-b-2 cursor-pointer flex-shrink-0 "+(x===e.id?`border-${e.color}-500 text-${e.color}-600 dark:text-${e.color}-400 bg-${e.color}-50 dark:bg-${e.color}-900/20 rounded-t-lg`:"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800/50 rounded-t-lg"),children:[a.jsx("i",{className:`${e.icon} mr-1 lg:mr-2`}),a.jsx("span",{className:"hidden sm:inline",children:e.label})]},e.id))})}),"hero"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[a.jsx("i",{className:"ri-image-line text-purple-500"}),"Configurações do Hero"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"📝 Título Principal"}),a.jsx("input",{type:"text",value:e.hero_title,onChange:r=>t({...e,hero_title:r.target.value}),className:"w-full px-3 lg:px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Entre em"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"✨ Palavra em Destaque (Gradiente)"}),a.jsx("input",{type:"text",value:e.hero_highlight,onChange:r=>t({...e,hero_highlight:r.target.value}),className:"w-full px-3 lg:px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Contacto"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"💬 Subtítulo"}),a.jsx("textarea",{value:e.hero_subtitle,onChange:r=>t({...e,hero_subtitle:r.target.value}),rows:2,className:"w-full px-3 lg:px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Estamos prontos para transformar suas ideias em realidade..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"🖼️ URL da Imagem de Fundo"}),a.jsx("input",{type:"text",value:e.hero_bg_image,onChange:r=>t({...e,hero_bg_image:r.target.value}),className:"w-full px-3 lg:px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://..."})]})]})]}),"methods"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("i",{className:"ri-phone-line text-green-500"}),"Métodos de Contacto"]}),a.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Email, telefone, WhatsApp, etc."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.show_contact_methods,onChange:r=>t({...e,show_contact_methods:r.target.checked}),className:"w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500 cursor-pointer"}),a.jsx("span",{className:"text-xs lg:text-sm text-gray-700 dark:text-gray-300",children:"Mostrar"})]}),a.jsxs("button",{onClick:()=>{e&&t({...e,contact_methods:[...e.contact_methods,{icon:"ri-mail-line",title:"Novo Método",value:"",link:"",description:"",color:"purple",enabled:!0}]})},className:"px-3 lg:px-4 py-1.5 lg:py-2 text-xs lg:text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors cursor-pointer whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line mr-1"}),"Adicionar"]})]})]}),a.jsx("div",{className:"space-y-3 lg:space-y-4",children:e.contact_methods.map((r,s)=>a.jsxs("div",{className:"p-3 lg:p-4 border border-gray-200 dark:border-gray-700 rounded-lg space-y-3 lg:space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["📞 Método ",s+1]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.enabled,onChange:e=>u(s,"enabled",e.target.checked),className:"w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500 cursor-pointer"}),a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Ativo"})]}),a.jsx("button",{onClick:()=>(r=>{e&&t({...e,contact_methods:e.contact_methods.filter((e,t)=>t!==r)})})(s),className:"text-red-500 hover:text-red-600 cursor-pointer p-1",children:a.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🎨 Ícone (Remix Icon)"}),a.jsx("input",{type:"text",value:r.icon,onChange:e=>u(s,"icon",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ri-mail-line"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🎨 Cor"}),a.jsxs("select",{value:r.color,onChange:e=>u(s,"color",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white cursor-pointer",children:[a.jsx("option",{value:"purple",children:"🟣 Roxo"}),a.jsx("option",{value:"green",children:"🟢 Verde"}),a.jsx("option",{value:"orange",children:"🟠 Laranja"}),a.jsx("option",{value:"blue",children:"🔵 Azul"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📝 Título"}),a.jsx("input",{type:"text",value:r.title,onChange:e=>u(s,"title",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"E-mail"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📧 Valor (Email/Telefone)"}),a.jsx("input",{type:"text",value:r.value,onChange:e=>u(s,"value",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"email@exemplo.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🔗 Link (mailto:/tel:/https:)"}),a.jsx("input",{type:"text",value:r.link,onChange:e=>u(s,"link",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"mailto:email@exemplo.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💬 Descrição"}),a.jsx("input",{type:"text",value:r.description,onChange:e=>u(s,"description",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Resposta em até 24 horas"})]})]})]},s))})]}),"social"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("i",{className:"ri-share-line text-blue-500"}),"Redes Sociais"]}),a.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Facebook, Instagram, LinkedIn, Twitter, etc."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.show_social_media,onChange:r=>t({...e,show_social_media:r.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"}),a.jsx("span",{className:"text-xs lg:text-sm text-gray-700 dark:text-gray-300",children:"Mostrar"})]}),a.jsxs("button",{onClick:()=>{e&&t({...e,social_media:[...e.social_media,{platform:"Nova Rede",icon:"ri-links-line",url:"",enabled:!0,color:"purple"}]})},className:"px-3 lg:px-4 py-1.5 lg:py-2 text-xs lg:text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors cursor-pointer whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line mr-1"}),"Adicionar"]})]})]}),a.jsx("div",{className:"space-y-3 lg:space-y-4",children:e.social_media?.map((r,s)=>a.jsxs("div",{className:"p-3 lg:p-4 border border-gray-200 dark:border-gray-700 rounded-lg space-y-3 lg:space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["🌐 Rede ",s+1]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.enabled,onChange:e=>b(s,"enabled",e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"}),a.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-300",children:"Ativo"})]}),a.jsx("button",{onClick:()=>(r=>{e&&t({...e,social_media:e.social_media.filter((e,t)=>t!==r)})})(s),className:"text-red-500 hover:text-red-600 cursor-pointer p-1",children:a.jsx("i",{className:"ri-delete-bin-line text-lg"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📱 Plataforma"}),a.jsx("input",{type:"text",value:r.platform,onChange:e=>b(s,"platform",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Facebook"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🎨 Ícone (Remix Icon)"}),a.jsx("input",{type:"text",value:r.icon,onChange:e=>b(s,"icon",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ri-facebook-fill"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🔗 URL"}),a.jsx("input",{type:"text",value:r.url,onChange:e=>b(s,"url",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://facebook.com/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🎨 Cor"}),a.jsxs("select",{value:r.color,onChange:e=>b(s,"color",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white cursor-pointer",children:[a.jsx("option",{value:"blue",children:"🔵 Azul (Facebook)"}),a.jsx("option",{value:"pink",children:"🩷 Rosa (Instagram)"}),a.jsx("option",{value:"sky",children:"🔷 Azul Claro (Twitter)"}),a.jsx("option",{value:"red",children:"🔴 Vermelho (YouTube)"}),a.jsx("option",{value:"purple",children:"🟣 Roxo (LinkedIn)"}),a.jsx("option",{value:"green",children:"🟢 Verde (WhatsApp)"})]})]})]})]},s))})]}),"form"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[a.jsx("i",{className:"ri-mail-send-line text-orange-500"}),"Configurações do Formulário"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📝 Título do Formulário"}),a.jsx("input",{type:"text",value:e.form_title,onChange:r=>t({...e,form_title:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💬 Subtítulo"}),a.jsx("input",{type:"text",value:e.form_subtitle,onChange:r=>t({...e,form_subtitle:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{className:"pt-3 lg:pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 lg:mb-4",children:"🏷️ Labels dos Campos"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"👤 Nome"}),a.jsx("input",{type:"text",value:e.form_name_label,onChange:r=>t({...e,form_name_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📧 E-mail"}),a.jsx("input",{type:"text",value:e.form_email_label,onChange:r=>t({...e,form_email_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📞 Telefone"}),a.jsx("input",{type:"text",value:e.form_phone_label,onChange:r=>t({...e,form_phone_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📋 Assunto"}),a.jsx("input",{type:"text",value:e.form_subject_label,onChange:r=>t({...e,form_subject_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💬 Mensagem"}),a.jsx("input",{type:"text",value:e.form_message_label,onChange:r=>t({...e,form_message_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📱 Método de Contacto Preferido"}),a.jsx("input",{type:"text",value:e.form_contact_method_label,onChange:r=>t({...e,form_contact_method_label:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})]}),a.jsxs("div",{className:"pt-3 lg:pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3 lg:mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"📋 Assuntos do Formulário"}),a.jsxs("button",{onClick:()=>{e&&t({...e,form_subjects:[...e.form_subjects,{value:"",label:""}]})},className:"px-2 lg:px-3 py-1 text-xs bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors cursor-pointer",children:[a.jsx("i",{className:"ri-add-line mr-1"}),"Adicionar"]})]}),a.jsx("div",{className:"space-y-2",children:e.form_subjects.map((r,s)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:r.value,onChange:e=>h(s,"value",e.target.value),className:"flex-1 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"valor"}),a.jsx("input",{type:"text",value:r.label,onChange:e=>h(s,"label",e.target.value),className:"flex-1 px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Label"}),a.jsx("button",{onClick:()=>(r=>{e&&t({...e,form_subjects:e.form_subjects.filter((e,t)=>t!==r)})})(s),className:"text-red-500 hover:text-red-600 cursor-pointer p-1",children:a.jsx("i",{className:"ri-delete-bin-line"})})]},s))})]}),a.jsx("div",{className:"pt-3 lg:pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🔘 Texto do Botão"}),a.jsx("input",{type:"text",value:e.form_submit_button,onChange:r=>t({...e,form_submit_button:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🔢 Limite de Caracteres (Mensagem)"}),a.jsx("input",{type:"number",min:"100",max:"2000",value:e.form_max_message_length,onChange:r=>t({...e,form_max_message_length:parseInt(r.target.value)||500}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"✅ Mensagem de Sucesso"}),a.jsx("input",{type:"text",value:e.form_success_message,onChange:r=>t({...e,form_success_message:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"❌ Mensagem de Erro"}),a.jsx("input",{type:"text",value:e.form_error_message,onChange:r=>t({...e,form_error_message:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]})})]})]}),"faq"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("i",{className:"ri-question-answer-line text-yellow-500"}),"Perguntas Frequentes"]}),a.jsx("p",{className:"text-xs lg:text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Configure as FAQs exibidas na página"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.show_faq,onChange:r=>t({...e,show_faq:r.target.checked}),className:"w-4 h-4 text-yellow-600 rounded focus:ring-2 focus:ring-yellow-500 cursor-pointer"}),a.jsx("span",{className:"text-xs lg:text-sm text-gray-700 dark:text-gray-300",children:"Mostrar"})]}),a.jsxs("button",{onClick:()=>{e&&t({...e,faqs:[...e.faqs,{question:"",answer:""}]})},className:"px-3 lg:px-4 py-1.5 lg:py-2 text-xs lg:text-sm bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors cursor-pointer whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line mr-1"}),"Adicionar"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4 mb-4 lg:mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📝 Título da Seção"}),a.jsx("input",{type:"text",value:e.faq_title,onChange:r=>t({...e,faq_title:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💬 Subtítulo"}),a.jsx("input",{type:"text",value:e.faq_subtitle,onChange:r=>t({...e,faq_subtitle:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsx("div",{className:"space-y-3 lg:space-y-4",children:e.faqs.map((r,s)=>a.jsxs("div",{className:"p-3 lg:p-4 border border-gray-200 dark:border-gray-700 rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:["❓ FAQ ",s+1]}),a.jsx("button",{onClick:()=>(r=>{e&&t({...e,faqs:e.faqs.filter((e,t)=>t!==r)})})(s),className:"text-red-500 hover:text-red-600 cursor-pointer p-1",children:a.jsx("i",{className:"ri-delete-bin-line text-lg"})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"❓ Pergunta"}),a.jsx("input",{type:"text",value:r.question,onChange:e=>p(s,"question",e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Qual é a pergunta?"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💡 Resposta"}),a.jsx("textarea",{value:r.answer,onChange:e=>p(s,"answer",e.target.value),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Resposta detalhada..."})]})]},s))})]}),"map"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[a.jsx("i",{className:"ri-map-pin-line text-red-500"}),"Configurações do Mapa"]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.show_map,onChange:r=>t({...e,show_map:r.target.checked}),className:"w-4 h-4 text-red-600 rounded focus:ring-2 focus:ring-red-500 cursor-pointer"}),a.jsx("span",{className:"text-xs lg:text-sm text-gray-700 dark:text-gray-300",children:"Mostrar Mapa"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📝 Título da Seção"}),a.jsx("input",{type:"text",value:e.map_title,onChange:r=>t({...e,map_title:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"💬 Subtítulo"}),a.jsx("input",{type:"text",value:e.map_subtitle,onChange:r=>t({...e,map_subtitle:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"🗺️ URL do Google Maps Embed"}),a.jsx("textarea",{value:e.map_embed_url,onChange:r=>t({...e,map_embed_url:r.target.value}),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none font-mono",placeholder:"https://www.google.com/maps/embed?pb=..."}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 Cole o URL do iframe do Google Maps (Compartilhar → Incorporar um mapa)"})]})]})]}),"footer"===x&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 lg:p-6 space-y-4 lg:space-y-6",children:[a.jsxs("h3",{className:"text-base lg:text-lg font-semibold text-gray-900 dark:text-white pb-3 lg:pb-4 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2",children:[a.jsx("i",{className:"ri-layout-bottom-line text-indigo-500"}),"Configurações do Rodapé"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"📝 Texto do Rodapé"}),a.jsx("input",{type:"text",value:e.footer_text,onChange:r=>t({...e,footer_text:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Transformando ideias em realidade digital"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"© Copyright"}),a.jsx("input",{type:"text",value:e.footer_copyright,onChange:r=>t({...e,footer_copyright:r.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"© 2025 Sua Empresa. Todos os direitos reservados."})]})]})]})]}):null}function O(){const{darkMode:e}=r(),[t,l]=i.useState([]),[o,n]=i.useState([]),[d,c]=i.useState({title:"Seleção Especial",subtitle:"Os Melhores Produtos Para Você",description:"Confira nossa curadoria exclusiva de produtos premium com os melhores preços e qualidade garantida",badge_text:"Produtos em Destaque",button_text:"Ver Todos os Produtos",wallpaper_url:"https://readdy.ai/api/search-image?query=modern%20abstract%20ecommerce%20shopping%20background%20with%20floating%20geometric%20shapes%20vibrant%20purple%20orange%20pink%20gradient%20dynamic%20composition%20professional%20lighting%20particles%20glow%20effects%20futuristic%20digital%20marketplace%20atmosphere%20no%20people&width=1920&height=800&seq=featured-products-wallpaper-v1&orientation=landscape",show_section:!0,auto_scroll_speed:20,max_products:10}),[x,m]=i.useState(!0),[g,u]=i.useState(!1),[p,h]=i.useState(null),[b,y]=i.useState("products"),[f,j]=i.useState(!1),[N,v]=i.useState(""),[w,k]=i.useState(1);i.useEffect(()=>{_()},[]);const _=async()=>{try{m(!0);const{data:e,error:t}=await s.from("products").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw t;const r=(e||[]).map(e=>({...e,images:e.images&&Array.isArray(e.images)&&e.images.length>0?e.images:[`https://readdy.ai/api/search-image?query=professional%20$%7Bproduct.name%7D%20product%20photography%20simple%20clean%20white%20background%20high%20quality%20detailed%20studio%20lighting&width=600&height=600&seq=prod-${e.id}&orientation=squarish`]}));l(r);const a=r.filter(e=>e.featured).sort((e,t)=>(e.display_order||0)-(t.display_order||0));n(a);const{data:i,error:o}=await s.from("home_page_config").select("*").eq("section","featured_products").single();o&&o.code,i&&c({id:i.id,title:i.title||d.title,subtitle:i.subtitle||d.subtitle,description:i.description||d.description,badge_text:i.badge_text||d.badge_text,button_text:i.button_text||d.button_text,wallpaper_url:i.wallpaper_url||d.wallpaper_url,show_section:!1!==i.show_section,auto_scroll_speed:i.auto_scroll_speed||d.auto_scroll_speed,max_products:i.max_products||d.max_products})}catch(e){C("error","Erro ao carregar dados")}finally{m(!1)}},C=(e,t)=>{h({type:e,text:t}),setTimeout(()=>h(null),5e3)},S=async e=>{try{const r=t.find(t=>t.id===e);if(!r)return;const a=!r.featured;if(a&&o.length>=d.max_products)return void C("error",`❌ Limite de ${d.max_products} produtos em destaque atingido!`);const{error:l}=await s.from("products").update({featured:a,display_order:a?o.length:null}).eq("id",e);if(l)throw l;C("success",a?"✅ Produto adicionado aos destaques!":"✅ Produto removido dos destaques!"),await _()}catch(r){C("error","Erro ao atualizar produto")}},$=async(e,t)=>{try{const{error:r}=await s.from("products").update({display_order:t}).eq("id",e);if(r)throw r;await _()}catch(r){C("error","Erro ao atualizar ordem")}},P=(e,t)=>{if("up"===t&&0===e)return;if("down"===t&&e===o.length-1)return;const r="up"===t?e-1:e+1,a=o[e],s=o[r];$(a.id,r),$(s.id,e)},V=t.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())||e.description?.toLowerCase().includes(N.toLowerCase())||e.sku?.toLowerCase().includes(N.toLowerCase())),E=Math.ceil(V.length/12),A=12*(w-1),T=A+12,I=V.slice(A,T),D=t.filter(e=>!e.featured),O=t.length,R=d.max_products-o.length;return x?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-semibold "+(e?"text-gray-300":"text-gray-600"),children:"A carregar produtos..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"🌟 Produtos em Destaque"}),a.jsx("p",{className:e?"text-gray-400":"text-gray-600",children:"Gerir produtos exibidos no carrossel da página inicial"})]})}),p&&a.jsxs("div",{className:`p-4 rounded-xl border-2 ${"success"===p.type?"bg-green-500/10 border-green-500/50 text-green-500":"bg-red-500/10 border-red-500/50 text-red-500"} flex items-center gap-3 animate-pulse`,children:[a.jsx("i",{className:("success"===p.type?"ri-checkbox-circle-fill":"ri-error-warning-fill")+" text-2xl"}),a.jsx("span",{className:"font-medium",children:p.text})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/20":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200"} shadow-lg hover:shadow-xl transition-all duration-300`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-box-3-line text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold mb-1 "+(e?"text-gray-400":"text-gray-600"),children:"Total de Produtos"}),a.jsx("p",{className:"text-3xl font-black "+(e?"text-white":"text-gray-900"),children:O})]})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gradient-to-br from-amber-500/10 to-amber-600/10 border border-amber-500/20":"bg-gradient-to-br from-amber-50 to-amber-100 border border-amber-200"} shadow-lg hover:shadow-xl transition-all duration-300`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-star-fill text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold mb-1 "+(e?"text-gray-400":"text-gray-600"),children:"Em Destaque"}),a.jsxs("p",{className:"text-3xl font-black "+(e?"text-white":"text-gray-900"),children:[o.length,"/",d.max_products]}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"Exibidos na homepage"})]})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gradient-to-br from-green-500/10 to-green-600/10 border border-green-500/20":"bg-gradient-to-br from-green-50 to-green-100 border border-green-200"} shadow-lg hover:shadow-xl transition-all duration-300`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-check-line text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold mb-1 "+(e?"text-gray-400":"text-gray-600"),children:"Disponíveis"}),a.jsx("p",{className:"text-3xl font-black "+(e?"text-white":"text-gray-900"),children:D.length}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"Podem ser adicionados"})]})]})}),a.jsx("div",{className:`p-6 rounded-xl ${e?"bg-gradient-to-br from-purple-500/10 to-purple-600/10 border border-purple-500/20":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"} shadow-lg hover:shadow-xl transition-all duration-300`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-dashboard-line text-2xl text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold mb-1 "+(e?"text-gray-400":"text-gray-600"),children:"Vagas Restantes"}),a.jsx("p",{className:"text-3xl font-black "+(e?"text-white":"text-gray-900"),children:R}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["De ",d.max_products," vagas"]})]})]})})]}),a.jsxs("div",{className:"flex gap-2 p-1 rounded-xl "+(e?"bg-gray-900":"bg-gray-100"),children:[a.jsxs("button",{onClick:()=>y("products"),className:"flex-1 px-6 py-3 rounded-lg font-semibold transition-all duration-300 whitespace-nowrap "+("products"===b?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg":e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-star-line mr-2"}),"Gerir Produtos (",o.length,")"]}),a.jsxs("button",{onClick:()=>y("config"),className:"flex-1 px-6 py-3 rounded-lg font-semibold transition-all duration-300 whitespace-nowrap "+("config"===b?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg":e?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[a.jsx("i",{className:"ri-settings-3-line mr-2"}),"Configurações"]})]}),"products"===b?a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"} shadow-lg`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-1 "+(e?"text-white":"text-gray-900"),children:"⭐ Produtos em Destaque"}),a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:[o.length," de ",d.max_products," produtos • Arraste para reordenar"]})]}),a.jsxs("button",{onClick:()=>{j(!0),k(1),v("")},disabled:o.length>=d.max_products,className:"px-6 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg flex items-center gap-2 whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed "+(o.length>=d.max_products?"":"cursor-pointer"),children:[a.jsx("i",{className:"ri-add-line text-xl"}),o.length>=d.max_products?`Limite Atingido (${d.max_products})`:"Adicionar Produto"]})]}),0===o.length?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500/20 to-orange-500/20 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("i",{className:"ri-star-line text-5xl text-amber-500"})}),a.jsx("h3",{className:"text-xl font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Nenhum produto em destaque"}),a.jsx("p",{className:"text-sm mb-6 "+(e?"text-gray-400":"text-gray-600"),children:"Adicione produtos para exibir no carrossel da página inicial"}),a.jsxs("button",{onClick:()=>{j(!0),k(1),v("")},className:"px-6 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg cursor-pointer whitespace-nowrap",children:[a.jsx("i",{className:"ri-add-line mr-2"}),"Adicionar Primeiro Produto"]})]}):a.jsx("div",{className:"space-y-3",children:o.map((t,r)=>a.jsx("div",{className:`group p-4 rounded-xl ${e?"bg-gray-800/50 hover:bg-gray-800":"bg-gray-50 hover:bg-gray-100"} border ${e?"border-gray-700":"border-gray-200"} transition-all duration-300 hover:shadow-lg`,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-shrink-0 w-10 h-10 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center text-white font-bold shadow-lg",children:["#",r+1]}),a.jsx("img",{src:t.images[0],alt:t.name,className:"w-20 h-20 object-cover rounded-lg shadow-md",onError:e=>{e.target.src=`https://readdy.ai/api/search-image?query=professional%20$%7Bproduct.name%7D%20product%20photography&width=200&height=200&seq=prod-fallback-${t.id}&orientation=squarish`}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-bold mb-1 truncate "+(e?"text-white":"text-gray-900"),children:t.name}),a.jsx("p",{className:"text-sm mb-2 line-clamp-1 "+(e?"text-gray-400":"text-gray-600"),children:t.description}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-lg font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:["€",t.price.toFixed(2)]}),a.jsxs("span",{className:"text-xs px-2 py-1 rounded-full "+(t.stock>10?"bg-green-500/20 text-green-500":t.stock>0?"bg-amber-500/20 text-amber-500":"bg-red-500/20 text-red-500"),children:["Stock: ",t.stock]}),t.sku&&a.jsxs("span",{className:"text-xs "+(e?"text-gray-500":"text-gray-400"),children:["SKU: ",t.sku]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>P(r,"up"),disabled:0===r,className:`w-10 h-10 rounded-lg ${e?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-50"} border ${e?"border-gray-600":"border-gray-300"} flex items-center justify-center transition-all hover:scale-110 disabled:opacity-30 disabled:cursor-not-allowed ${0===r?"":"cursor-pointer"}`,children:a.jsx("i",{className:"ri-arrow-up-s-line text-xl"})}),a.jsx("button",{onClick:()=>P(r,"down"),disabled:r===o.length-1,className:`w-10 h-10 rounded-lg ${e?"bg-gray-700 hover:bg-gray-600":"bg-white hover:bg-gray-50"} border ${e?"border-gray-600":"border-gray-300"} flex items-center justify-center transition-all hover:scale-110 disabled:opacity-30 disabled:cursor-not-allowed ${r===o.length-1?"":"cursor-pointer"}`,children:a.jsx("i",{className:"ri-arrow-down-s-line text-xl"})})]}),a.jsx("button",{onClick:()=>S(t.id),className:"w-10 h-10 rounded-lg bg-red-500/10 hover:bg-red-500/20 text-red-500 flex items-center justify-center transition-all hover:scale-110 cursor-pointer",title:"Remover dos destaques",children:a.jsx("i",{className:"ri-close-line text-xl"})})]})},t.id))})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-settings-3-line mr-2"}),"Configurações Gerais"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10 border border-[#b62bff]/20",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold mb-1 "+(e?"text-white":"text-gray-900"),children:"Mostrar Seção"}),a.jsx("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:"Exibir carrossel de produtos em destaque na homepage"})]}),a.jsx("button",{onClick:()=>c({...d,show_section:!d.show_section}),className:"relative w-14 h-8 rounded-full transition-colors cursor-pointer "+(d.show_section?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00]":"bg-gray-300"),children:a.jsx("div",{className:"absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform "+(d.show_section?"translate-x-6":"translate-x-0")})})]}),a.jsxs("div",{className:"p-4 rounded-lg border-2 "+(e?"border-amber-500/30 bg-amber-500/5":"border-amber-300 bg-amber-50"),children:[a.jsxs("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-dashboard-line mr-2"}),"Limite Máximo de Produtos em Destaque"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"number",min:o.length,max:"50",value:d.max_products,onChange:e=>{const t=parseInt(e.target.value)||10;t>=o.length&&c({...d,max_products:t})},className:`flex-1 px-4 py-3 rounded-xl border-2 ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] font-bold text-lg`}),a.jsxs("div",{className:`px-4 py-3 rounded-xl ${e?"bg-gray-800":"bg-white"} border-2 ${e?"border-gray-700":"border-gray-300"} min-w-[120px] text-center`,children:[a.jsx("p",{className:`text-xs ${e?"text-gray-400":"text-gray-600"} mb-1`,children:"Em uso"}),a.jsxs("p",{className:"text-2xl font-black "+(e?"text-white":"text-gray-900"),children:[o.length,"/",d.max_products]})]})]}),a.jsxs("div",{className:"mt-3 flex items-start gap-2",children:[a.jsx("i",{className:"ri-information-line text-amber-500 mt-0.5"}),a.jsxs("div",{className:"text-xs "+(e?"text-gray-400":"text-gray-600"),children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Atualmente:"})," ",o.length," produtos em destaque"]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Vagas disponíveis:"})," ",R," de ",d.max_products]}),a.jsxs("p",{className:(e?"text-amber-400":"text-amber-600")+" font-semibold",children:["⚠️ O limite não pode ser menor que ",o.length," (produtos atualmente em destaque)"]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Velocidade do Scroll Automático (ms)"}),a.jsx("input",{type:"number",min:"10",max:"100",value:d.auto_scroll_speed,onChange:e=>c({...d,auto_scroll_speed:parseInt(e.target.value)||20}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`}),a.jsx("p",{className:"text-xs mt-1 "+(e?"text-gray-500":"text-gray-400"),children:"Menor valor = mais rápido (recomendado: 20ms)"})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-text mr-2"}),"Textos da Seção"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Texto do Badge"}),a.jsx("input",{type:"text",value:d.badge_text,onChange:e=>c({...d,badge_text:e.target.value}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Produtos em Destaque"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Título Principal"}),a.jsx("input",{type:"text",value:d.title,onChange:e=>c({...d,title:e.target.value}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Seleção Especial"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Subtítulo"}),a.jsx("input",{type:"text",value:d.subtitle,onChange:e=>c({...d,subtitle:e.target.value}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Os Melhores Produtos Para Você"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Descrição"}),a.jsx("textarea",{value:d.description,onChange:e=>c({...d,description:e.target.value}),rows:3,className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] resize-none`,placeholder:"Confira nossa curadoria exclusiva..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"Texto do Botão"}),a.jsx("input",{type:"text",value:d.button_text,onChange:e=>c({...d,button_text:e.target.value}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Ver Todos os Produtos"})]})]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${e?"bg-gray-900":"bg-white"} border ${e?"border-gray-800":"border-gray-200"}`,children:[a.jsxs("h2",{className:"text-xl font-bold mb-6 "+(e?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-image-line mr-2"}),"Imagem de Fundo (Wallpaper)"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2 "+(e?"text-white":"text-gray-900"),children:"URL da Imagem"}),a.jsx("input",{type:"text",value:d.wallpaper_url,onChange:e=>c({...d,wallpaper_url:e.target.value}),className:`w-full px-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"https://..."}),a.jsx("p",{className:"text-xs mt-1 "+(e?"text-gray-500":"text-gray-400"),children:"Recomendado: 1920x800px, formato landscape"})]}),d.wallpaper_url&&a.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-[#b62bff]/30",children:a.jsx("img",{src:d.wallpaper_url,alt:"Preview",className:"w-full h-48 object-cover"})})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{try{if(u(!0),d.max_featured<o.length)return void C("error",`❌ O limite não pode ser menor que ${o.length} (produtos atualmente em destaque)`);const e={max_featured:d.max_featured,auto_scroll:d.auto_scroll,auto_scroll_speed:d.auto_scroll_speed,show_arrows:d.show_arrows,show_dots:d.show_dots,updated_at:(new Date).toISOString()};if(d.id){const{error:t}=await s.from("home_page_config").update(e).eq("id",d.id);if(t)throw new Error(t.message||"Erro ao atualizar configuração")}else{const{data:t,error:r}=await s.from("home_page_config").insert([e]).select().single();if(r)throw new Error(r.message||"Erro ao criar configuração");t&&c({...d,id:t.id})}C("success","✅ Configuração salva com sucesso!"),await _()}catch(e){C("error",`❌ Erro: ${e?.message||"Erro desconhecido ao salvar configuração"}`)}finally{u(!1)}},disabled:g,className:"px-8 py-4 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-xl font-bold text-lg hover:opacity-90 transition-all duration-300 cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed shadow-xl hover:shadow-2xl hover:scale-105 flex items-center gap-3",children:g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"A guardar..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line text-xl"}),"Guardar Configurações"]})})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:(e?"bg-gray-900":"bg-white")+" rounded-2xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between bg-gradient-to-r from-[#b62bff]/10 to-[#ff6a00]/10",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold "+(e?"text-white":"text-gray-900"),children:"🛍️ Selecionar Produtos"}),a.jsxs("p",{className:"text-sm mt-1 "+(e?"text-gray-400":"text-gray-600"),children:["Escolha produtos para adicionar aos destaques • ",V.length," produtos disponíveis"]})]}),a.jsx("button",{onClick:()=>j(!1),className:`w-10 h-10 rounded-lg ${e?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"} flex items-center justify-center transition-colors cursor-pointer`,children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsxs("div",{className:"p-6 border-b border-gray-800",children:[a.jsxs("div",{className:"relative",children:[a.jsx("i",{className:"ri-search-line absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl"}),a.jsx("input",{type:"text",value:N,onChange:e=>{v(e.target.value),k(1)},placeholder:"Pesquisar por nome, descrição ou SKU...",className:`w-full pl-12 pr-4 py-3 rounded-xl border ${e?"bg-gray-800 border-gray-700 text-white placeholder-gray-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`})]}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:[V.length," produto(s) encontrado(s)"]}),a.jsxs("p",{className:"text-sm font-semibold "+(e?"text-gray-300":"text-gray-700"),children:[o.length,"/",d.max_products," em destaque"]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:0===I.length?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("i",{className:"ri-inbox-line text-6xl text-gray-400 mb-4"}),a.jsx("p",{className:"text-lg "+(e?"text-gray-400":"text-gray-600"),children:"Nenhum produto encontrado"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(t=>{const r=t.featured;return a.jsx("div",{className:`p-4 rounded-xl border ${r?e?"bg-amber-500/10 border-amber-500/50":"bg-amber-50 border-amber-300":e?"bg-gray-800 border-gray-700 hover:border-[#b62bff]":"bg-gray-50 border-gray-200 hover:border-[#b62bff]"} transition-all duration-300 hover:shadow-lg group`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"relative mb-3 overflow-hidden rounded-lg",children:[a.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-40 object-cover group-hover:scale-110 transition-transform duration-300",onError:e=>{e.target.src=`https://readdy.ai/api/search-image?query=professional%20$%7Bproduct.name%7D%20product&width=400&height=400&seq=modal-${t.id}&orientation=squarish`}}),0===t.stock&&a.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:a.jsx("span",{className:"px-3 py-1 bg-red-500 text-white text-sm font-bold rounded-full",children:"Esgotado"})}),r&&a.jsxs("div",{className:"absolute top-2 right-2 px-2 py-1 bg-amber-500 text-white text-xs font-bold rounded-full flex items-center gap-1",children:[a.jsx("i",{className:"ri-star-fill"}),"Em Destaque"]})]}),a.jsx("h4",{className:"font-bold mb-2 line-clamp-2 min-h-[3rem] "+(e?"text-white":"text-gray-900"),children:t.name}),a.jsx("p",{className:"text-sm mb-3 line-clamp-2 min-h-[2.5rem] "+(e?"text-gray-400":"text-gray-600"),children:t.description}),a.jsxs("div",{className:"flex items-center justify-between mb-3 mt-auto",children:[a.jsxs("span",{className:"text-xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:["€",t.price.toFixed(2)]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(t.stock>10?"bg-green-500/20 text-green-500":t.stock>0?"bg-amber-500/20 text-amber-500":"bg-red-500/20 text-red-500"),children:t.stock>0?`Stock: ${t.stock}`:"Esgotado"})]}),t.sku&&a.jsxs("p",{className:"text-xs mb-3 "+(e?"text-gray-500":"text-gray-400"),children:["SKU: ",t.sku]}),a.jsxs("button",{onClick:()=>S(t.id),disabled:!r&&o.length>=d.max_products,className:`w-full px-4 py-2.5 ${r?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-[#b62bff] to-[#ff6a00]"} text-white rounded-lg font-semibold transition-all duration-300 hover:scale-105 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${!r&&o.length>=d.max_products?"":"cursor-pointer"}`,children:[a.jsx("i",{className:(r?"ri-close-line":"ri-add-line")+" text-lg"}),a.jsx("span",{children:r?"Remover dos Destaques":"Adicionar aos Destaques"})]})]})},t.id)})})}),E>1&&a.jsx("div",{className:"p-6 border-t "+(e?"border-gray-800":"border-gray-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm "+(e?"text-gray-400":"text-gray-600"),children:["Mostrando ",A+1,"-",Math.min(T,V.length)," de ",V.length]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>k(e=>Math.max(1,e-1)),disabled:1===w,className:`px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 ${1===w?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-105"} ${e?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:[a.jsx("i",{className:"ri-arrow-left-s-line"}),"Anterior"]}),a.jsx("div",{className:"flex items-center gap-1",children:(()=>{const e=[];if(E<=5)for(let t=1;t<=E;t++)e.push(t);else if(w<=3){for(let t=1;t<=4;t++)e.push(t);e.push("..."),e.push(E)}else if(w>=E-2){e.push(1),e.push("...");for(let t=E-3;t<=E;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=w-1;t<=w+1;t++)e.push(t);e.push("..."),e.push(E)}return e})().map((t,r)=>"number"==typeof t?a.jsx("button",{onClick:()=>k(t),className:`w-10 h-10 rounded-lg font-semibold transition-all ${w===t?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg scale-110":e?"bg-gray-800 text-gray-300 hover:bg-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"} cursor-pointer`,children:t},r):a.jsx("span",{className:"w-10 h-10 flex items-center justify-center "+(e?"text-gray-500":"text-gray-400"),children:t},r))}),a.jsxs("button",{onClick:()=>k(e=>Math.min(E,e+1)),disabled:w===E,className:`px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 ${w===E?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-105"} ${e?"bg-gray-800 text-white hover:bg-gray-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:["Próximo",a.jsx("i",{className:"ri-arrow-right-s-line"})]})]})]})})]})})]})}const R=i.lazy(()=>e(()=>import("./ServicesManagement-TAOpBXEU.js"),__vite__mapDeps([0,1,2,3,4])));function M(){const[e,c]=i.useState("dashboard"),[x,b]=i.useState(!0),[w,k]=i.useState("admin"),{user:C,signOut:$}=t(),{darkMode:P}=r();l(),i.useEffect(()=>{(async()=>{if(C)try{const{data:e,error:t}=await s.from("profiles").select("role").eq("id",C.id).single();if(t)return;e?.role&&k(e.role)}catch(e){}})()},[C]);return a.jsxs("div",{className:"min-h-screen "+(P?"bg-[#0b0011]":"bg-gray-50"),children:[a.jsx(o,{sidebarOpen:x,setSidebarOpen:b,userRole:w}),a.jsxs("div",{className:"flex",children:[a.jsx(n,{activeSection:e,setActiveSection:c,sidebarOpen:x}),a.jsx("main",{className:`flex-1 transition-all duration-300 ${x?"ml-64":"ml-0"} pt-16`,children:a.jsx("div",{className:"p-6",children:(()=>{switch(e){case"dashboard":default:return a.jsx(d,{darkMode:P});case"products":return a.jsx(m,{darkMode:P});case"services":return a.jsx(i.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"w-12 h-12 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}),children:a.jsx(R,{})});case"categories":return a.jsx(g,{darkMode:P});case"featured-products":return a.jsx(O,{});case"orders":return a.jsx(u,{darkMode:P});case"customers":return a.jsx(p,{darkMode:P});case"content":return a.jsx(h,{darkMode:P});case"marketing":return a.jsx(y,{darkMode:P});case"financial":return a.jsx(f,{darkMode:P});case"security":return a.jsx(j,{darkMode:P});case"automation":return a.jsx(N,{darkMode:P});case"support":return a.jsx(v,{darkMode:P});case"shipping":return a.jsx(_,{darkMode:P});case"tax":return a.jsx(S,{darkMode:P});case"site-settings":return a.jsx(E,{});case"contact-page":return a.jsx(D,{});case"theme":return a.jsx(V,{darkMode:P});case"woocommerce":return a.jsx(I,{})}})()})})]})]})}export{M as default};
