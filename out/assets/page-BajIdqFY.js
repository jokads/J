import{a as e,u as t,s,j as r}from"./index-BH-fJ4Ku.js";import{h as a,c as i}from"./react-vendor-Bx1kqAC_.js";import"./supabase-vendor-Bh6n7b__.js";function l(){const{slug:l}=a(),{addToCart:o}=e(),{darkMode:n}=t(),[c,d]=i.useState(null),[x,g]=i.useState([]),[h,m]=i.useState(!0),[p,b]=i.useState(1),[y,u]=i.useState(0),[f,j]=i.useState(!1);i.useEffect(()=>{l&&N()},[l]);const N=async()=>{m(!0);try{const{data:e,error:t}=await s.from("products").select("*").eq("slug",l).eq("status","active").single();if(t)throw t;if(e){d(e);const{data:t}=await s.from("products").select("*").eq("category_id",e.category_id).eq("status","active").neq("id",e.id).limit(4);t&&g(t)}}catch(e){}finally{m(!1)}};if(h)return r.jsx("div",{className:"min-h-screen "+(n?"bg-[#0b0011]":"bg-gray-50"),children:r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"w-16 h-16 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})})});if(!c)return r.jsx("div",{className:"min-h-screen "+(n?"bg-[#0b0011]":"bg-gray-50"),children:r.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[r.jsx("i",{className:`ri-error-warning-line text-6xl ${n?"text-gray-700":"text-gray-300"} mb-4`}),r.jsx("h2",{className:`text-2xl font-bold ${n?"text-white":"text-gray-900"} mb-2`,children:"Produto não encontrado"}),r.jsx("p",{className:(n?"text-gray-400":"text-gray-600")+" mb-6",children:"O produto que você está procurando não existe ou foi removido."}),r.jsx("button",{onClick:()=>window.REACT_APP_NAVIGATE("/category"),className:"px-6 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:opacity-90 transition-opacity cursor-pointer whitespace-nowrap",children:"Ver Todos os Produtos"})]})});const v=Array.isArray(c.images)&&c.images.length>0?c.images:["https://readdy.ai/api/search-image?query=modern%20product%20photography%20on%20clean%20white%20background%20professional%20lighting%20high%20quality%20detailed&width=800&height=800&seq="+c.id+"&orientation=squarish"];return r.jsxs("div",{className:"min-h-screen "+(n?"bg-[#0b0011]":"bg-gray-50"),children:[f&&r.jsx("div",{className:"fixed top-24 right-4 z-50 animate-slide-in-right",children:r.jsxs("div",{className:"bg-green-500 text-white px-6 py-4 rounded-lg shadow-2xl flex items-center gap-3",children:[r.jsx("i",{className:"ri-checkbox-circle-line text-2xl"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Produto adicionado!"}),r.jsx("p",{className:"text-sm opacity-90",children:"Item adicionado ao carrinho com sucesso"})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("nav",{className:"mb-8",children:r.jsxs("ol",{className:"flex items-center gap-2 text-sm",children:[r.jsx("li",{children:r.jsx("button",{onClick:()=>window.REACT_APP_NAVIGATE("/"),className:(n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900")+" transition-colors cursor-pointer",children:"Início"})}),r.jsx("li",{className:n?"text-gray-600":"text-gray-400",children:"/"}),r.jsx("li",{children:r.jsx("button",{onClick:()=>window.REACT_APP_NAVIGATE("/category"),className:(n?"text-gray-400 hover:text-white":"text-gray-600 hover:text-gray-900")+" transition-colors cursor-pointer",children:"Produtos"})}),r.jsx("li",{className:n?"text-gray-600":"text-gray-400",children:"/"}),r.jsx("li",{className:n?"text-white":"text-gray-900",children:c.name})]})}),r.jsx("div",{className:`${n?"bg-gray-900":"bg-white"} rounded-2xl shadow-xl overflow-hidden border ${n?"border-gray-800":"border-gray-200"} mb-12`,children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 p-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"relative w-full h-[500px] bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden mb-4",children:[r.jsx("img",{src:v[y],alt:c.name,className:"w-full h-full object-cover object-top"}),c.stock<10&&c.stock>0&&r.jsxs("div",{className:"absolute top-4 left-4 px-4 py-2 bg-yellow-500 text-black text-sm font-bold rounded-full shadow-lg",children:["Últimas ",c.stock," unidades"]}),0===c.stock&&r.jsx("div",{className:"absolute top-4 left-4 px-4 py-2 bg-red-500 text-white text-sm font-bold rounded-full shadow-lg",children:"Esgotado"})]}),v.length>1&&r.jsx("div",{className:"grid grid-cols-4 gap-3",children:v.map((e,t)=>r.jsx("button",{onClick:()=>u(t),className:"relative w-full h-24 rounded-lg overflow-hidden cursor-pointer transition-all "+(y===t?"ring-4 ring-[#b62bff] scale-105":"ring-2 ring-gray-300 dark:ring-gray-700 hover:ring-[#b62bff] hover:scale-105"),children:r.jsx("img",{src:e,alt:`${c.name} - Imagem ${t+1}`,className:"w-full h-full object-cover object-top"})},t))})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:`text-4xl font-bold ${n?"text-white":"text-gray-900"} mb-4`,children:c.name}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-baseline gap-3 mb-2",children:r.jsxs("span",{className:"text-5xl font-bold "+(n?"text-white":"text-gray-900"),children:["R$ ",c.price.toFixed(2).replace(".",",")]})}),r.jsxs("p",{className:"text-lg "+(n?"text-gray-400":"text-gray-600"),children:["ou 12x de R$ ",(c.price/12).toFixed(2).replace(".",",")," sem juros"]}),r.jsxs("p",{className:`text-sm ${n?"text-green-400":"text-green-600"} mt-2 flex items-center gap-2`,children:[r.jsx("i",{className:"ri-truck-line"}),"Frete grátis para todo o Brasil"]})]}),c.short_description&&r.jsx("p",{className:`text-lg ${n?"text-gray-300":"text-gray-700"} mb-6 leading-relaxed`,children:c.short_description}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-300":"text-gray-700"} mb-3`,children:"Quantidade:"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center border-2 border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>b(Math.max(1,p-1)),className:`px-5 py-3 ${n?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors cursor-pointer`,children:r.jsx("i",{className:"ri-subtract-line text-xl"})}),r.jsx("input",{type:"number",min:"1",max:c.stock,value:p,onChange:e=>b(Math.max(1,Math.min(c.stock,parseInt(e.target.value)||1))),className:`w-20 text-center text-lg font-semibold ${n?"bg-gray-900 text-white":"bg-white text-gray-900"} border-none focus:outline-none`}),r.jsx("button",{onClick:()=>b(Math.min(c.stock,p+1)),disabled:p>=c.stock,className:`px-5 py-3 ${n?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900"} transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed`,children:r.jsx("i",{className:"ri-add-line text-xl"})})]}),r.jsxs("span",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:[c.stock," unidades disponíveis"]})]})]}),r.jsxs("div",{className:"flex gap-4 mb-6",children:[r.jsxs("button",{onClick:async()=>{if(c)try{await o(c,p),j(!0),setTimeout(()=>j(!1),3e3)}catch(e){}},disabled:0===c.stock,className:`flex-1 px-8 py-4 ${n?"bg-gray-800 hover:bg-gray-700":"bg-gray-200 hover:bg-gray-300"} ${n?"text-white":"text-gray-900"} rounded-xl transition-colors cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 font-semibold text-lg`,children:[r.jsx("i",{className:"ri-shopping-cart-line text-2xl"}),"Adicionar ao Carrinho"]}),r.jsxs("button",{onClick:async()=>{if(c)try{await o(c,p),window.REACT_APP_NAVIGATE("/cart")}catch(e){}},disabled:0===c.stock,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-xl hover:opacity-90 transition-opacity cursor-pointer whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 font-semibold text-lg shadow-lg",children:[r.jsx("i",{className:"ri-shopping-bag-line text-2xl"}),"Comprar Agora"]})]}),r.jsxs("div",{className:`grid grid-cols-2 gap-4 p-6 ${n?"bg-gray-800":"bg-gray-50"} rounded-xl`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"ri-shield-check-line text-2xl "+(n?"text-green-400":"text-green-600")}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold "+(n?"text-white":"text-gray-900"),children:"Compra Segura"}),r.jsx("p",{className:"text-xs "+(n?"text-gray-400":"text-gray-600"),children:"Pagamento protegido"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"ri-refresh-line text-2xl "+(n?"text-blue-400":"text-blue-600")}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold "+(n?"text-white":"text-gray-900"),children:"Devolução Grátis"}),r.jsx("p",{className:"text-xs "+(n?"text-gray-400":"text-gray-600"),children:"Até 30 dias"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"ri-customer-service-2-line text-2xl "+(n?"text-purple-400":"text-purple-600")}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold "+(n?"text-white":"text-gray-900"),children:"Suporte 24/7"}),r.jsx("p",{className:"text-xs "+(n?"text-gray-400":"text-gray-600"),children:"Atendimento rápido"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("i",{className:"ri-medal-line text-2xl "+(n?"text-yellow-400":"text-yellow-600")}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold "+(n?"text-white":"text-gray-900"),children:"Garantia"}),r.jsx("p",{className:"text-xs "+(n?"text-gray-400":"text-gray-600"),children:"12 meses"})]})]})]})]})]})}),c.description&&r.jsxs("div",{className:`${n?"bg-gray-900":"bg-white"} rounded-2xl shadow-xl p-8 border ${n?"border-gray-800":"border-gray-200"} mb-12`,children:[r.jsx("h2",{className:`text-3xl font-bold ${n?"text-white":"text-gray-900"} mb-6`,children:"Descrição do Produto"}),r.jsx("div",{className:"prose max-w-none "+(n?"prose-invert":""),dangerouslySetInnerHTML:{__html:c.description}})]}),x.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:`text-3xl font-bold ${n?"text-white":"text-gray-900"} mb-8`,children:"Produtos Relacionados"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map(e=>{const t=Array.isArray(e.images)&&e.images.length>0?e.images[0]:"https://readdy.ai/api/search-image?query=modern%20product%20photography%20on%20clean%20white%20background%20professional%20lighting%20high%20quality&width=400&height=400&seq="+e.id+"&orientation=squarish";return r.jsxs("div",{onClick:()=>window.REACT_APP_NAVIGATE(`/produto/${e.slug}`),className:`group ${n?"bg-gray-900":"bg-white"} rounded-xl overflow-hidden border ${n?"border-gray-800":"border-gray-200"} hover:shadow-xl transition-all duration-300 cursor-pointer`,"data-product-shop":!0,children:[r.jsx("div",{className:"relative w-full h-64 bg-gray-100 dark:bg-gray-800 overflow-hidden",children:r.jsx("img",{src:t,alt:e.name,className:"w-full h-full object-cover object-top group-hover:scale-110 transition-transform duration-500"})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:`font-semibold ${n?"text-white":"text-gray-900"} line-clamp-2 mb-3 group-hover:text-[#b62bff] transition-colors`,children:e.name}),r.jsx("div",{className:"mb-4",children:r.jsxs("span",{className:"text-2xl font-bold "+(n?"text-white":"text-gray-900"),children:["R$ ",e.price.toFixed(2).replace(".",",")]})})]})]},e.id)})})]})]}),r.jsx("style",{children:`\n        @keyframes slide-in-right {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n        .animate-slide-in-right {\n          animation: slide-in-right 0.3s ease-out;\n        }\n        .prose {\n          color: ${n?"#d1d5db":"#374151"};\n        }\n        .prose h1, .prose h2, .prose h3, .prose h4 {\n          color: ${n?"#ffffff":"#111827"};\n        }\n        .prose a {\n          color: #b62bff;\n        }\n        .prose strong {\n          color: ${n?"#ffffff":"#111827"};\n        }\n      `})]})}export{l as default};
