import{o as e,u as t,j as a,s as r}from"./index-BH-fJ4Ku.js";import{c as s,u as i,L as n}from"./react-vendor-Bx1kqAC_.js";import"./supabase-vendor-Bh6n7b__.js";function l(){const[l,o]=s.useState(""),[d,c]=s.useState(""),[m,x]=s.useState(!1),[f,b]=s.useState(""),{signIn:u,user:g}=e(),{darkMode:h}=t(),p=i();s.useEffect(()=>{(async()=>{if(g)try{const{data:e}=await r.from("profiles").select("role").eq("id",g.id).maybeSingle();if(e){["superadmin","admin","manager","editor","financial","support"].includes(e.role)?p("/admin"):p("/")}else p("/")}catch(e){p("/")}})()},[g,p]);return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${h?"bg-[#0b0011]":"bg-gray-50"} px-4`,children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs(n,{to:"/",className:"flex items-center justify-center gap-2 mb-8",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#b62bff] to-[#ff6a00] rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"ri-store-3-line text-white text-2xl"})}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:"JokaTech"})]}),a.jsxs("div",{className:(h?"bg-[#170018] border-gray-800":"bg-white border-gray-200")+" rounded-2xl shadow-xl border p-8",children:[a.jsx("h1",{className:`text-2xl font-bold ${h?"text-white":"text-gray-900"} mb-2 text-center`,children:"Entrar na sua conta"}),a.jsx("p",{className:`text-sm ${h?"text-gray-400":"text-gray-600"} mb-6 text-center`,children:"Aceda à sua conta para continuar"}),f&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:f})}),a.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(""),x(!0);try{await u(l,d);const{data:{user:e}}=await r.auth.getUser();if(e){const{data:t}=await r.from("profiles").select("role").eq("id",e.id).maybeSingle();if(t){["superadmin","admin","manager","editor","financial","support"].includes(t.role)?p("/admin"):p("/")}else p("/")}}catch(t){b(t.message||"Erro ao fazer login. Verifique as suas credenciais.")}finally{x(!1)}},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"E-mail"}),a.jsx("input",{type:"email",value:l,onChange:e=>o(e.target.value),required:!0,className:`w-full px-4 py-3 ${h?"bg-[#0b0011] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"seu@email.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:`block text-sm font-medium ${h?"text-gray-300":"text-gray-700"} mb-2`,children:"Senha"}),a.jsx("input",{type:"password",value:d,onChange:e=>c(e.target.value),required:!0,className:`w-full px-4 py-3 ${h?"bg-[#0b0011] border-gray-700 text-white":"bg-gray-50 border-gray-300 text-gray-900"} border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"••••••••"})]}),a.jsx("button",{type:"submit",disabled:m,className:"w-full px-4 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] hover:opacity-90 disabled:opacity-50 text-white font-medium rounded-lg transition-opacity whitespace-nowrap disabled:cursor-not-allowed",children:m?"A entrar...":"Entrar"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm "+(h?"text-gray-400":"text-gray-600"),children:["Não tem uma conta?"," ",a.jsx(n,{to:"/register",className:"text-[#b62bff] hover:text-[#ff6a00] font-medium transition-colors",children:"Criar conta"})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(n,{to:"/",className:`text-sm ${h?"text-gray-400 hover:text-[#b62bff]":"text-gray-600 hover:text-[#b62bff]"} transition-colors`,children:[a.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Voltar ao site"]})})]})})}export{l as default};
