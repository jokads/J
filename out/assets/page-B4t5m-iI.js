import{o as e,u as t,a as r,s,j as a}from"./index-BH-fJ4Ku.js";import{u as l,c as i}from"./react-vendor-Bx1kqAC_.js";import"./supabase-vendor-Bh6n7b__.js";function d(){const{user:d,signOut:o}=e(),{darkMode:n}=t(),{items:c,removeFromCart:x,updateQuantity:m,total:b}=r(),g=l(),[h,u]=i.useState("overview"),[f,p]=i.useState(null),[j,y]=i.useState([]),[w,N]=i.useState([]),[v,C]=i.useState(!0),[k,P]=i.useState(!1),[_,$]=i.useState(!1),[S,F]=i.useState({}),[E,q]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[A,T]=i.useState(""),[D,z]=i.useState(""),[V,M]=i.useState(!1);i.useEffect(()=>{d?L():g("/login")},[d,g]);const L=async()=>{try{C(!0);const{data:e,error:t}=await s.from("profiles").select("*").eq("id",d?.id).single();if(t)throw t;p(e),F(e);const{data:r,error:a}=await s.from("orders").select("\n          id,\n          order_number,\n          total,\n          status,\n          created_at,\n          order_items (count)\n        ").eq("user_id",d?.id).order("created_at",{ascending:!1}).limit(10);!a&&r&&y(r.map(e=>({...e,items_count:e.order_items?.[0]?.count||0}))),await U()}catch(e){}finally{C(!1)}},U=async()=>{try{const{data:e,error:t}=await s.from("wishlist").select("\n          id,\n          product_id,\n          created_at,\n          products (\n            id,\n            title,\n            price,\n            images,\n            stock\n          )\n        ").eq("user_id",d?.id).order("created_at",{ascending:!1});!t&&e&&N(e)}catch(e){}},G=e=>{switch(e){case"delivered":return"bg-green-500/20 text-green-500";case"shipped":return"bg-blue-500/20 text-blue-500";case"processing":return"bg-yellow-500/20 text-yellow-500";case"cancelled":return"bg-red-500/20 text-red-500";default:return"bg-gray-500/20 text-gray-500"}},B=e=>{switch(e){case"delivered":return"Entregue";case"shipped":return"Enviado";case"processing":return"Processando";case"cancelled":return"Cancelado";default:return"Pendente"}};return v?a.jsx("div",{className:`min-h-screen ${n?"bg-[#0b0011]":"bg-gray-50"} flex items-center justify-center`,children:a.jsx("div",{className:"w-16 h-16 border-4 border-[#b62bff] border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:`min-h-screen ${n?"bg-[#0b0011]":"bg-gray-50"} py-8`,children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:`rounded-2xl p-8 mb-8 ${n?"bg-gradient-to-br from-[#1a0b2e] to-[#16001e] border border-[#b62bff]/20":"bg-white border border-gray-200"} shadow-2xl`,children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-[#b62bff] to-[#ff6a00] p-1 shadow-2xl",children:a.jsx("div",{className:"w-full h-full rounded-full bg-[#0b0011] flex items-center justify-center overflow-hidden",children:f?.avatar_url?a.jsx("img",{src:f.avatar_url,alt:"Avatar",className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-4xl font-bold text-white",children:f?.full_name?.charAt(0)||d?.email?.charAt(0)||"?"})})}),a.jsxs("label",{className:"absolute bottom-0 right-0 w-10 h-10 bg-[#b62bff] rounded-full flex items-center justify-center cursor-pointer hover:bg-[#9d24d9] transition-all shadow-lg group-hover:scale-110",children:[a.jsx("i",{className:"ri-camera-line text-white text-lg"}),a.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{try{const t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("❌ Por favor, selecione uma imagem válida");if(t.size>2097152)return void alert("❌ A imagem deve ter no máximo 2MB");M(!0);const r=t.name.split(".").pop(),a=`avatars/${`${d?.id}-${Date.now()}.${r}`}`,{error:l}=await s.storage.from("public").upload(a,t);if(l)throw l;const{data:{publicUrl:i}}=s.storage.from("public").getPublicUrl(a),{error:o}=await s.from("profiles").update({avatar_url:i}).eq("id",d?.id);if(o)throw o;p({...f,avatar_url:i}),alert("✅ Avatar atualizado com sucesso!")}catch(t){alert("❌ Erro ao fazer upload. Tente novamente.")}finally{M(!1)}},className:"hidden",disabled:V})]}),V&&a.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:a.jsx("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}),a.jsxs("div",{className:"flex-1 text-center md:text-left",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 "+(n?"text-white":"text-gray-900"),children:f?.full_name||"Utilizador"}),a.jsx("p",{className:"text-lg mb-4 "+(n?"text-gray-400":"text-gray-600"),children:d?.email}),a.jsxs("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start",children:[a.jsxs("div",{className:"px-4 py-2 rounded-lg "+(n?"bg-[#b62bff]/10 border border-[#b62bff]/30":"bg-purple-50 border border-purple-200"),children:[a.jsx("span",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Pedidos"}),a.jsx("p",{className:"text-xl font-bold text-[#b62bff]",children:j.length})]}),a.jsxs("div",{className:"px-4 py-2 rounded-lg "+(n?"bg-[#ff6a00]/10 border border-[#ff6a00]/30":"bg-orange-50 border border-orange-200"),children:[a.jsx("span",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Carrinho"}),a.jsx("p",{className:"text-xl font-bold text-[#ff6a00]",children:c.length})]}),a.jsxs("div",{className:"px-4 py-2 rounded-lg "+(n?"bg-green-500/10 border border-green-500/30":"bg-green-50 border border-green-200"),children:[a.jsx("span",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Favoritos"}),a.jsx("p",{className:"text-xl font-bold text-green-500",children:w.length})]}),a.jsxs("div",{className:"px-4 py-2 rounded-lg "+(n?"bg-blue-500/10 border border-blue-500/30":"bg-blue-50 border border-blue-200"),children:[a.jsx("span",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Membro desde"}),a.jsx("p",{className:"text-xl font-bold text-blue-500",children:new Date(f?.created_at||"").getFullYear()})]})]})]}),a.jsxs("button",{onClick:o,className:"px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium shadow-lg hover:shadow-xl hover:scale-105",children:[a.jsx("i",{className:"ri-logout-box-line"}),"Sair"]})]})}),a.jsx("div",{className:`rounded-2xl mb-8 ${n?"bg-gradient-to-br from-[#1a0b2e] to-[#16001e] border border-[#b62bff]/20":"bg-white border border-gray-200"} shadow-2xl overflow-hidden`,children:a.jsx("div",{className:"flex overflow-x-auto",children:[{id:"overview",icon:"ri-dashboard-line",label:"Visão Geral"},{id:"orders",icon:"ri-shopping-bag-line",label:"Pedidos"},{id:"cart",icon:"ri-shopping-cart-line",label:"Carrinho"},{id:"wishlist",icon:"ri-heart-line",label:"Favoritos"},{id:"settings",icon:"ri-settings-line",label:"Configurações"},{id:"security",icon:"ri-shield-check-line",label:"Segurança"}].map(e=>a.jsxs("button",{onClick:()=>u(e.id),className:"flex-1 min-w-[140px] px-6 py-4 flex items-center justify-center gap-2 font-medium transition-all whitespace-nowrap "+(h===e.id?"bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white shadow-lg":n?"text-gray-400 hover:text-white hover:bg-white/5":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[a.jsx("i",{className:`${e.icon} text-xl`}),a.jsx("span",{children:e.label})]},e.id))})}),a.jsxs("div",{className:`rounded-2xl p-8 ${n?"bg-gradient-to-br from-[#1a0b2e] to-[#16001e] border border-[#b62bff]/20":"bg-white border border-gray-200"} shadow-2xl`,children:["overview"===h&&a.jsxs("div",{className:"space-y-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 "+(n?"text-white":"text-gray-900"),children:"Visão Geral da Conta"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:`p-6 rounded-xl ${n?"bg-gradient-to-br from-[#b62bff]/20 to-[#b62bff]/5 border border-[#b62bff]/30":"bg-gradient-to-br from-purple-50 to-purple-100 border border-purple-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 bg-[#b62bff] rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-money-euro-circle-line text-white text-3xl"})}),a.jsx("i",{className:"ri-arrow-up-line text-green-500 text-xl"})]}),a.jsx("p",{className:"text-sm mb-1 "+(n?"text-gray-400":"text-gray-600"),children:"Total Gasto"}),a.jsxs("p",{className:"text-3xl font-bold text-[#b62bff] mb-1",children:["€",j.reduce((e,t)=>e+t.total,0).toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Em ",j.length," ",1===j.length?"pedido":"pedidos"]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${n?"bg-gradient-to-br from-[#ff6a00]/20 to-[#ff6a00]/5 border border-[#ff6a00]/30":"bg-gradient-to-br from-orange-50 to-orange-100 border border-orange-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 bg-[#ff6a00] rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-shopping-cart-2-line text-white text-3xl"})}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold "+(n?"bg-[#ff6a00]/20 text-[#ff6a00]":"bg-orange-200 text-orange-700"),children:c.length})]}),a.jsx("p",{className:"text-sm mb-1 "+(n?"text-gray-400":"text-gray-600"),children:"Carrinho Atual"}),a.jsxs("p",{className:"text-3xl font-bold text-[#ff6a00] mb-1",children:["€",b.toFixed(2)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[c.length," ",1===c.length?"item":"itens"]})]}),a.jsxs("div",{className:`p-6 rounded-xl ${n?"bg-gradient-to-br from-green-500/20 to-green-500/5 border border-green-500/30":"bg-gradient-to-br from-green-50 to-green-100 border border-green-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-heart-3-line text-white text-3xl"})}),a.jsx("i",{className:"ri-star-line text-yellow-500 text-xl"})]}),a.jsx("p",{className:"text-sm mb-1 "+(n?"text-gray-400":"text-gray-600"),children:"Lista de Favoritos"}),a.jsx("p",{className:"text-3xl font-bold text-green-500 mb-1",children:w.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Produtos salvos"})]}),a.jsxs("div",{className:`p-6 rounded-xl ${n?"bg-gradient-to-br from-blue-500/20 to-blue-500/5 border border-blue-500/30":"bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200"} hover:shadow-xl transition-all`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("i",{className:"ri-calendar-check-line text-white text-3xl"})}),a.jsx("i",{className:"ri-vip-crown-line text-yellow-500 text-xl"})]}),a.jsx("p",{className:"text-sm mb-1 "+(n?"text-gray-400":"text-gray-600"),children:"Membro desde"}),a.jsx("p",{className:"text-3xl font-bold text-blue-500 mb-1",children:new Date(f?.created_at||"").getFullYear()}),a.jsxs("p",{className:"text-xs text-gray-500",children:[Math.floor((Date.now()-new Date(f?.created_at||"").getTime())/864e5)," dias conosco"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 rounded-xl "+(n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold "+(n?"text-white":"text-gray-900"),children:"Últimos Pedidos"}),a.jsxs("button",{onClick:()=>u("orders"),className:"text-[#b62bff] hover:text-[#9d24d9] text-sm font-medium flex items-center gap-1",children:["Ver todos",a.jsx("i",{className:"ri-arrow-right-line"})]})]}),0===j.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"ri-shopping-bag-line text-4xl text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Nenhum pedido ainda"})]}):a.jsx("div",{className:"space-y-3",children:j.slice(0,3).map(e=>a.jsx("div",{className:`p-4 rounded-lg ${n?"bg-white/5 hover:bg-white/10":"bg-white hover:bg-gray-50"} transition-all cursor-pointer`,onClick:()=>u("orders"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-sm "+(n?"text-white":"text-gray-900"),children:["#",e.order_number]}),a.jsx("p",{className:"text-xs "+(n?"text-gray-400":"text-gray-600"),children:new Date(e.created_at).toLocaleDateString("pt-PT")})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-lg font-bold text-[#b62bff]",children:["€",e.total.toFixed(2)]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${G(e.status)}`,children:B(e.status)})]})]})},e.id))})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold "+(n?"text-white":"text-gray-900"),children:"Favoritos Recentes"}),a.jsxs("button",{onClick:()=>u("wishlist"),className:"text-[#b62bff] hover:text-[#9d24d9] text-sm font-medium flex items-center gap-1",children:["Ver todos",a.jsx("i",{className:"ri-arrow-right-line"})]})]}),0===w.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"ri-heart-line text-4xl text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Nenhum favorito ainda"})]}):a.jsx("div",{className:"space-y-3",children:w.slice(0,3).map(e=>a.jsx("div",{className:`p-4 rounded-lg ${n?"bg-white/5 hover:bg-white/10":"bg-white hover:bg-gray-50"} transition-all cursor-pointer`,onClick:()=>g(`/produto/${e.product_id}`),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0",children:e.products.images?.[0]&&a.jsx("img",{src:e.products.images[0],alt:e.products.title,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-sm truncate "+(n?"text-white":"text-gray-900"),children:e.products.title}),a.jsxs("p",{className:"text-lg font-bold text-[#b62bff]",children:["€",e.products.price.toFixed(2)]})]}),a.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 text-xl"})]})},e.id))})]})]})]}),"orders"===h&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 "+(n?"text-white":"text-gray-900"),children:"Histórico de Pedidos"}),0===j.length?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("i",{className:"ri-shopping-bag-line text-8xl text-gray-400 mb-4"}),a.jsx("p",{className:"text-xl mb-2 "+(n?"text-white":"text-gray-900"),children:"Nenhum pedido encontrado"}),a.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"Comece a comprar agora!"}),a.jsx("button",{onClick:()=>g("/"),className:"mt-6 px-8 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-xl transition-all font-medium",children:"Ver Produtos"})]}):a.jsx("div",{className:"space-y-4",children:j.map(e=>a.jsx("div",{className:`p-6 rounded-xl ${n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"} hover:shadow-xl transition-all`,children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("p",{className:"text-lg font-bold "+(n?"text-white":"text-gray-900"),children:["Pedido #",e.order_number]}),a.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${G(e.status)}`,children:B(e.status)})]}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:new Date(e.created_at).toLocaleDateString("pt-PT",{day:"2-digit",month:"long",year:"numeric"})}),a.jsxs("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:[e.items_count," ",1===e.items_count?"item":"itens"]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Total"}),a.jsxs("p",{className:"text-2xl font-bold text-[#b62bff]",children:["€",e.total.toFixed(2)]})]}),a.jsxs("button",{className:"px-6 py-2 bg-[#b62bff] hover:bg-[#9d24d9] text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium",children:[a.jsx("i",{className:"ri-eye-line"}),"Ver Detalhes"]})]})]})},e.id))})]}),"cart"===h&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold "+(n?"text-white":"text-gray-900"),children:"Meu Carrinho"}),a.jsxs("button",{onClick:()=>g("/cart"),className:"px-6 py-2 bg-[#b62bff] hover:bg-[#9d24d9] text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium",children:[a.jsx("i",{className:"ri-shopping-cart-line"}),"Ver Carrinho Completo"]})]}),0===c.length?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("i",{className:"ri-shopping-cart-line text-8xl text-gray-400 mb-4"}),a.jsx("p",{className:"text-xl mb-2 "+(n?"text-white":"text-gray-900"),children:"Seu carrinho está vazio"}),a.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"Adicione produtos para começar suas compras!"}),a.jsx("button",{onClick:()=>g("/"),className:"mt-6 px-8 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-xl transition-all font-medium",children:"Explorar Produtos"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-6 rounded-xl "+(n?"bg-gradient-to-br from-[#b62bff]/20 to-[#ff6a00]/20 border border-[#b62bff]/30":"bg-gradient-to-br from-purple-50 to-orange-50 border border-purple-200"),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:["Total de itens: ",c.reduce((e,t)=>e+t.quantity,0)]}),a.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-[#b62bff] to-[#ff6a00] bg-clip-text text-transparent",children:["€",b.toFixed(2)]})]}),a.jsxs("button",{onClick:()=>g("/checkout"),className:"px-8 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-xl transition-all font-medium flex items-center gap-2",children:[a.jsx("i",{className:"ri-secure-payment-line"}),"Finalizar Compra"]})]})}),a.jsx("div",{className:"space-y-4",children:c.map(e=>a.jsx("div",{className:`p-6 rounded-xl ${n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"} hover:shadow-xl transition-all`,children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[a.jsx("div",{className:"w-full md:w-32 h-32 rounded-lg bg-gray-200 overflow-hidden flex-shrink-0",children:e.product.images?.[0]&&a.jsx("img",{src:e.product.images[0],alt:e.product.title,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold mb-2 "+(n?"text-white":"text-gray-900"),children:e.product.title}),a.jsxs("p",{className:"text-2xl font-bold text-[#b62bff] mb-4",children:["€",e.product.price.toFixed(2)]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>m(e.id,e.quantity-1),disabled:e.quantity<=1,className:`w-10 h-10 rounded-lg ${n?"bg-white/10 hover:bg-white/20":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:a.jsx("i",{className:"ri-subtract-line text-xl"})}),a.jsx("span",{className:"text-xl font-bold min-w-[3rem] text-center "+(n?"text-white":"text-gray-900"),children:e.quantity}),a.jsx("button",{onClick:()=>m(e.id,e.quantity+1),disabled:e.quantity>=e.product.stock,className:`w-10 h-10 rounded-lg ${n?"bg-white/10 hover:bg-white/20":"bg-gray-200 hover:bg-gray-300"} flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed`,children:a.jsx("i",{className:"ri-add-line text-xl"})})]}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Subtotal"}),a.jsxs("p",{className:"text-2xl font-bold text-[#ff6a00]",children:["€",(e.product.price*e.quantity).toFixed(2)]})]}),a.jsx("button",{onClick:()=>x(e.id),className:"w-10 h-10 bg-red-500 hover:bg-red-600 rounded-lg flex items-center justify-center text-white transition-all",children:a.jsx("i",{className:"ri-delete-bin-line text-xl"})})]})]})]})},e.id))})]})]}),"wishlist"===h&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 "+(n?"text-white":"text-gray-900"),children:"Lista de Favoritos"}),0===w.length?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("i",{className:"ri-heart-line text-8xl text-gray-400 mb-4"}),a.jsx("p",{className:"text-xl mb-2 "+(n?"text-white":"text-gray-900"),children:"Sua lista está vazia"}),a.jsx("p",{className:n?"text-gray-400":"text-gray-600",children:"Adicione produtos aos favoritos!"}),a.jsx("button",{onClick:()=>g("/"),className:"mt-6 px-8 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-xl transition-all font-medium",children:"Explorar Produtos"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(e=>a.jsxs("div",{className:`rounded-xl overflow-hidden ${n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"} hover:shadow-xl transition-all group`,children:[a.jsxs("div",{className:"relative h-48 bg-gray-200 overflow-hidden",children:[e.products.images?.[0]&&a.jsx("img",{src:e.products.images[0],alt:e.products.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),a.jsx("button",{onClick:()=>(async e=>{try{const{error:t}=await s.from("wishlist").delete().eq("id",e);if(t)throw t;await U()}catch(t){alert("❌ Erro ao remover item")}})(e.id),className:"absolute top-2 right-2 w-10 h-10 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white transition-all shadow-lg",children:a.jsx("i",{className:"ri-close-line text-xl"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 line-clamp-2 "+(n?"text-white":"text-gray-900"),children:e.products.title}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("p",{className:"text-2xl font-bold text-[#b62bff]",children:["€",e.products.price.toFixed(2)]}),a.jsx("span",{className:"text-sm "+(e.products.stock>0?"text-green-500":"text-red-500"),children:e.products.stock>0?"Em stock":"Esgotado"})]}),a.jsx("button",{onClick:()=>g(`/produto/${e.product_id}`),className:"w-full px-4 py-2 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-lg transition-all font-medium",children:"Ver Produto"})]})]},e.id))})]}),"settings"===h&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold "+(n?"text-white":"text-gray-900"),children:"Configurações do Perfil"}),_?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{$(!1),F(f)},className:"px-6 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium",children:[a.jsx("i",{className:"ri-close-line"}),"Cancelar"]}),a.jsx("button",{onClick:async()=>{try{P(!0);const{error:e}=await s.from("profiles").update({full_name:S.full_name,phone:S.phone,address:S.address,city:S.city,country:S.country,postal_code:S.postal_code,bio:S.bio}).eq("id",d?.id);if(e)throw e;p({...f,...S}),$(!1),alert("✅ Perfil atualizado com sucesso!")}catch(e){alert("❌ Erro ao salvar perfil. Tente novamente.")}finally{P(!1)}},disabled:k,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium disabled:opacity-50",children:k?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ri-save-line"}),"Salvar"]})})]}):a.jsxs("button",{onClick:()=>$(!0),className:"px-6 py-2 bg-[#b62bff] hover:bg-[#9d24d9] text-white rounded-lg transition-all flex items-center gap-2 whitespace-nowrap font-medium",children:[a.jsx("i",{className:"ri-edit-line"}),"Editar"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Nome Completo"}),a.jsx("input",{type:"text",value:S.full_name||"",onChange:e=>F({...S,full_name:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Email"}),a.jsx("input",{type:"email",value:d?.email||"",disabled:!0,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-gray-400":"bg-gray-100 border border-gray-300 text-gray-600"} cursor-not-allowed`}),a.jsx("p",{className:"text-xs mt-1 text-gray-500",children:"O email não pode ser alterado"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Telefone"}),a.jsx("input",{type:"tel",value:S.phone||"",onChange:e=>F({...S,phone:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Cidade"}),a.jsx("input",{type:"text",value:S.city||"",onChange:e=>F({...S,city:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"País"}),a.jsx("input",{type:"text",value:S.country||"",onChange:e=>F({...S,country:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Código Postal"}),a.jsx("input",{type:"text",value:S.postal_code||"",onChange:e=>F({...S,postal_code:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Morada"}),a.jsx("input",{type:"text",value:S.address||"",onChange:e=>F({...S,address:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50`})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Bio"}),a.jsx("textarea",{rows:4,value:S.bio||"",onChange:e=>F({...S,bio:e.target.value}),disabled:!_,className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-gray-50 border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff] disabled:opacity-50 resize-none`,placeholder:"Conte-nos um pouco sobre você..."})]})]})]}),"security"===h&&a.jsxs("div",{className:"space-y-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 "+(n?"text-white":"text-gray-900"),children:"Segurança da Conta"}),a.jsxs("div",{className:"p-6 rounded-xl "+(n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 "+(n?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-lock-password-line text-[#b62bff]"}),"Alterar Senha"]}),A&&a.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-lg text-red-500",children:A}),D&&a.jsx("div",{className:"mb-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg text-green-500",children:D}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Nova Senha"}),a.jsx("input",{type:"password",value:E.newPassword,onChange:e=>q({...E,newPassword:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-white border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Mínimo 6 caracteres"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2 "+(n?"text-gray-300":"text-gray-700"),children:"Confirmar Nova Senha"}),a.jsx("input",{type:"password",value:E.confirmPassword,onChange:e=>q({...E,confirmPassword:e.target.value}),className:`w-full px-4 py-3 rounded-lg ${n?"bg-white/5 border border-white/10 text-white":"bg-white border border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-[#b62bff]`,placeholder:"Digite a senha novamente"})]}),a.jsxs("button",{onClick:async()=>{try{if(T(""),z(""),E.newPassword!==E.confirmPassword)return void T("As senhas não coincidem");if(E.newPassword.length<6)return void T("A senha deve ter pelo menos 6 caracteres");const{error:e}=await s.auth.updateUser({password:E.newPassword});if(e)throw e;z("✅ Senha alterada com sucesso!"),q({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>z(""),3e3)}catch(e){T("❌ Erro ao alterar senha. Tente novamente.")}},className:"px-8 py-3 bg-gradient-to-r from-[#b62bff] to-[#ff6a00] text-white rounded-lg hover:shadow-xl transition-all font-medium flex items-center gap-2",children:[a.jsx("i",{className:"ri-lock-line"}),"Alterar Senha"]})]})]}),a.jsxs("div",{className:"p-6 rounded-xl "+(n?"bg-white/5 border border-white/10":"bg-gray-50 border border-gray-200"),children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 "+(n?"text-white":"text-gray-900"),children:[a.jsx("i",{className:"ri-shield-check-line text-green-500"}),"Informações de Segurança"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-green-500/10 border border-green-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-mail-check-line text-green-500 text-2xl"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold "+(n?"text-white":"text-gray-900"),children:"Email Verificado"}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Seu email está verificado e seguro"})]})]}),a.jsx("i",{className:"ri-checkbox-circle-fill text-green-500 text-2xl"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-blue-500/10 border border-blue-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-lock-2-line text-blue-500 text-2xl"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold "+(n?"text-white":"text-gray-900"),children:"Conexão Segura"}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Todas as suas informações são criptografadas"})]})]}),a.jsx("i",{className:"ri-shield-check-line text-blue-500 text-2xl"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-purple-500/10 border border-purple-500/30",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"ri-user-shield-line text-purple-500 text-2xl"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold "+(n?"text-white":"text-gray-900"),children:"Privacidade Protegida"}),a.jsx("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:"Seus dados nunca são compartilhados"})]})]}),a.jsx("i",{className:"ri-checkbox-circle-fill text-purple-500 text-2xl"})]})]})]})]})]})]})})}export{d as default};
